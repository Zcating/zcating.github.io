{"version":3,"sources":["modules/rubiks-cube-viewer.ts","App.tsx","registerServiceWorker.ts","index.tsx"],"names":["PI_2","Math","PI","RubiksCubeViewer","element","scene","engine","camera","light1","light2","cubes","_multiMaterial","_didFinish","_operationQueue","_isRunning","resizeFn","resize","canvas","document","createElement","style","position","height","width","appendChild","this","BABYLON","useRightHandedSystem","Zero","lowerRadiusLimit","upperRadiusLimit","useBouncingBehavior","attachControl","minZ","wheelDeltaPercentage","pinchDeltaPercentage","wheelPrecision","pinchPrecision","_generateRubiksCube","runRenderLoop","render","window","addEventListener","subMaterials","push","diffuseTexture","colorTexture","removeEventListener","dispose","forEach","value","clockwise","coefficient","_rotate","z","ratio","_rotateAroundAxisZ","clockwize","times","y","_rotateAroundAxisY","x","_rotateAroundAxisX","operationQueue","doingOperation","operationChar","handler","setInterval","undefined","clearInterval","rotateRight","rotateLeft","rotateUp","rotateFront","rotateDown","rotateBack","splice","count","box","CreateBox","material","multiMaterial","subMeshes","verticesCount","getTotalVertices","set","color","context","getContext","fillStyle","fillRect","rect","lineJoin","lineWidth","colorString","toString","strokeStyle","stroke","fill","toDataURL","filter","rotation","objects","_animate","object","during","animating","requestAnimationFrame","timestamp","_animationCore","startTimestamp","previousTimestamp","currentTimestamp","cancelAnimationFrame","rad","rotate","X","WORLD","cos","sin","Y","Z","App","props","viewer","allOperations","disrupt","steps","prevStep","index","operationIndex","findIndex","number","floor","random","operation","setState","startAOperationQueue","reset","event","textContent","target","operate","state","getElementById","destroy","stepsView","id","className","onClick","React","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","error","ReactDOM","URL","process","origin","fetch","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.8bea6244.chunk.js","sourcesContent":["import * as BABYLON from 'babylonjs';\r\nimport {BehaviorSubject} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nconst THRESHOLD = 0.2;\r\nconst PI_2 = Math.PI / 2;\r\n// const PI_4 = Math.PI / 4;\r\n// const SQRT_2 = Math.sqrt(2);\r\n\r\nexport class RubiksCubeViewer {\r\n\r\n    scene: BABYLON.Scene;\r\n    engine: BABYLON.Engine;\r\n    camera: BABYLON.ArcRotateCamera;\r\n    light1: BABYLON.HemisphericLight;\r\n    light2: BABYLON.HemisphericLight;\r\n    cubes: BABYLON.Mesh[] = [];\r\n\r\n\r\n    // didFinish: boolean = false;\r\n\r\n    private _multiMaterial?: BABYLON.MultiMaterial;\r\n\r\n    private _didFinish = true;\r\n\r\n    // private _operationQueueSubject = new BehaviorSubject<string>('');\r\n    private _operationQueue: string[] = [];\r\n\r\n    private _isRunning = false;\r\n\r\n\r\n    private get multiMaterial() : BABYLON.MultiMaterial {\r\n        if (!this._multiMaterial) {\r\n            this._multiMaterial = new BABYLON.MultiMaterial('multi', this.scene);\r\n\r\n            this._multiMaterial.subMaterials.push(\r\n                // orange 0xF76102\r\n                new BABYLON.StandardMaterial('orange', this.scene),\r\n                // red 0x920702\r\n                new BABYLON.StandardMaterial('red', this.scene),\r\n                // yellow 0xFFFC05\r\n                new BABYLON.StandardMaterial('yellow', this.scene),\r\n                // white 0xFFFFFF\r\n                new BABYLON.StandardMaterial('white', this.scene),\r\n                // green 0x179505\r\n                new BABYLON.StandardMaterial('green', this.scene),\r\n                // blue 0x1A11FF\r\n                new BABYLON.StandardMaterial('blue', this.scene),\r\n            );\r\n            const subMaterials = this._multiMaterial.subMaterials as BABYLON.StandardMaterial[];\r\n            subMaterials[0]!.diffuseTexture = this.colorTexture(0x179505);\r\n            subMaterials[1]!.diffuseTexture = this.colorTexture(0x1A11FF);\r\n            subMaterials[2]!.diffuseTexture = this.colorTexture(0xF76102);\r\n            subMaterials[3]!.diffuseTexture = this.colorTexture(0x920702);\r\n            subMaterials[4]!.diffuseTexture = this.colorTexture(0xFFFC05);\r\n            subMaterials[5]!.diffuseTexture = this.colorTexture(0xFFFFFF);\r\n        }\r\n        return this._multiMaterial;\r\n    }\r\n\r\n    private resizeFn = () => {\r\n        this.engine.resize();\r\n    }\r\n\r\n    constructor(element: HTMLElement) {\r\n        const canvas = document.createElement('canvas');\r\n        canvas.style.position = 'absolute';\r\n        canvas.style.height = '100%';\r\n        canvas.style.width = '100%';\r\n        element.appendChild(canvas);\r\n        this.engine = new BABYLON.Engine(canvas, true, {}, true);\r\n        this.scene = new BABYLON.Scene(this.engine);\r\n        this.scene.useRightHandedSystem = true;\r\n        this.camera = new BABYLON.ArcRotateCamera('camera', 0, 0, 10, BABYLON.Vector3.Zero(), this.scene);\r\n        this.camera.position = new BABYLON.Vector3(4, 4, 4);\r\n        this.camera.lowerRadiusLimit = 4;\r\n        this.camera.upperRadiusLimit = 20;\r\n        this.camera.useBouncingBehavior = false;\r\n        this.camera.attachControl(canvas);\r\n        this.camera.minZ = 0.001;\r\n        this.camera.wheelDeltaPercentage = 0.01;\r\n        this.camera.pinchDeltaPercentage = 0.01;\r\n        this.camera.wheelPrecision = 500;\r\n        this.camera.pinchPrecision = 500;\r\n\r\n        this._generateRubiksCube();\r\n\r\n        this.light1 = new BABYLON.HemisphericLight('light', new BABYLON.Vector3(0, 0, 1), this.scene);\r\n        this.light2 = new BABYLON.HemisphericLight('light', new BABYLON.Vector3(0, 0, -1), this.scene);\r\n\r\n        this.engine.runRenderLoop(() => {\r\n            this.scene.render();\r\n        });\r\n\r\n        window.addEventListener('resize', this.resizeFn);\r\n\r\n        // this._operationQueueSubject.pipe(\r\n        //     filter(value => !!value),\r\n        // ).subscribe(value => {\r\n        //\r\n        // })\r\n    }\r\n\r\n    destroy() {\r\n        window.removeEventListener('resize', this.resizeFn);\r\n        this.engine.dispose();\r\n        this.scene.dispose();\r\n    }\r\n\r\n    public reset() {\r\n        // running state can't reset.\r\n        if (this._isRunning) {\r\n            return;\r\n        }\r\n        this.cubes.forEach(value => {\r\n            value.dispose();\r\n        });\r\n        this.cubes = [];\r\n        this._generateRubiksCube();\r\n    }\r\n\r\n\r\n    public rotateFront(clockwise: boolean, times: number = 1) : void {\r\n        const coefficient = clockwise ? -1 : 1;\r\n        this._rotate((value) => {\r\n            // get all front block\r\n            return value.position.z > THRESHOLD;\r\n        }, (value, ratio) => {\r\n            RubiksCubeViewer._rotateAroundAxisZ(value, coefficient * ratio * PI_2);\r\n        });\r\n    }\r\n\r\n    public rotateBack(clockwize: boolean, times: number = 1) : void {\r\n        const coefficient = clockwize ? 1 : -1;\r\n        this._rotate((value)=>{\r\n            // get all back block\r\n            return value.position.z < -THRESHOLD;\r\n        }, (value, ratio)=>{\r\n            RubiksCubeViewer._rotateAroundAxisZ(value, coefficient * ratio * PI_2 * times);\r\n        });\r\n    }\r\n\r\n    public rotateUp(clockwize: boolean, times: number = 1) : void {\r\n        const coefficient = clockwize ? 1 : -1;\r\n        this._rotate((value) => {\r\n            // get all up block\r\n            return value.position.y > THRESHOLD;\r\n        }, (value, ratio) => {\r\n            RubiksCubeViewer._rotateAroundAxisY(value, coefficient * ratio * PI_2);\r\n        });\r\n    }\r\n\r\n    public rotateDown(clockwize: boolean, times: number = 1) : void {\r\n        const coefficient = clockwize ? -1 : 1;\r\n        this._rotate((value) => {\r\n            // get all down block\r\n            return value.position.y < -THRESHOLD;\r\n        }, (value, ratio)=>{\r\n            RubiksCubeViewer._rotateAroundAxisY(value, coefficient * ratio * PI_2);\r\n        });\r\n    }\r\n\r\n    public rotateLeft(clockwize: boolean, times: number = 1) : void {\r\n        const coefficient = clockwize ? 1 : -1;\r\n        this._rotate((value)=>{\r\n             // get all left block\r\n            return value.position.x < -THRESHOLD;\r\n        }, (value, ratio)=>{\r\n            RubiksCubeViewer._rotateAroundAxisX(value, coefficient * ratio * PI_2);\r\n        });\r\n    }\r\n\r\n    public rotateRight(clockwize: boolean, times: number = 1) : void {\r\n        const coefficient = clockwize ? -1 : 1;\r\n        this._rotate((value) => {\r\n            // get right down block\r\n            return value.position.x > THRESHOLD;\r\n        }, (value, ratio) => {\r\n            RubiksCubeViewer._rotateAroundAxisX(value, coefficient * ratio * PI_2);\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * operate\r\n     */\r\n    /**\r\n     * startOperationQueue\r\n     */\r\n    public startAOperationQueue(operationQueue:string[]) {\r\n        if (this._isRunning) {\r\n            return;\r\n        }\r\n        this._operationQueue = operationQueue;\r\n        this.doingOperation();\r\n    }\r\n\r\n    public operate(operationChar: string) {\r\n        if (operationChar === null) {\r\n            return;\r\n        }\r\n        // this._operationQueueSubject.next(operationChar);\r\n        this._operationQueue.push(operationChar);\r\n        this.doingOperation();\r\n    }\r\n\r\n    /**\r\n     * doingOperation\r\n     */\r\n    public doingOperation() {\r\n        if (this._isRunning) {\r\n            return;\r\n        }\r\n        this._isRunning = true;\r\n\r\n        const handler = setInterval(() => {\r\n            const operationChar = this._operationQueue[0];\r\n            if(operationChar === undefined) {\r\n                clearInterval(handler);\r\n                this._isRunning = false;\r\n                return;\r\n            }\r\n            switch (operationChar) {\r\n                case 'R':\r\n                    this.rotateRight(true);\r\n                    break;\r\n                case 'R2':\r\n                    this.rotateRight(true, 2);\r\n                    break;\r\n                case 'R\\'':\r\n                    this.rotateRight(false);\r\n                    break;\r\n                case 'R\\'2':\r\n                    this.rotateRight(false, 2);\r\n                    break;\r\n                case 'L':\r\n                    this.rotateLeft(true);\r\n                    break;\r\n                case 'L2':\r\n                    this.rotateLeft(true, 2);\r\n                    break;\r\n                case 'L\\'':\r\n                    this.rotateLeft(false);\r\n                    break;\r\n                case 'L\\'2':\r\n                    this.rotateLeft(false, 2);\r\n                    break;\r\n                case 'U':\r\n                    this.rotateUp(true);\r\n                    break;\r\n                case 'U2':\r\n                    this.rotateUp(true);\r\n                    break;\r\n                case 'U\\'':\r\n                    this.rotateUp(false);\r\n                    break;\r\n                case 'U\\'2':\r\n                    this.rotateUp(false, 2);\r\n                    break;\r\n                case 'F':\r\n                    this.rotateFront(true);\r\n                    break;\r\n                case 'F2':\r\n                    this.rotateFront(true, 2);\r\n                    break;\r\n                case 'F\\'':\r\n                    this.rotateFront(false);\r\n                    break;\r\n                case 'F\\'2':\r\n                    this.rotateFront(false, 2);\r\n                    break;\r\n                case 'D':\r\n                    this.rotateDown(true);\r\n                    break;\r\n                case 'D2':\r\n                    this.rotateDown(true, 2);\r\n                    break;\r\n                case 'D\\'':\r\n                    this.rotateDown(false);\r\n                    break;\r\n                case 'D\\'2':\r\n                    this.rotateDown(false, 2);\r\n                    break;\r\n                case 'B':\r\n                    this.rotateBack(true);\r\n                    break;\r\n                case 'B2':\r\n                    this.rotateBack(true, 2);\r\n                    break;\r\n                case 'B\\'':\r\n                    this.rotateBack(false);\r\n                    break;\r\n                case 'B\\'2':\r\n                    this.rotateBack(false, 2);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            this._operationQueue.splice(0, 1);\r\n        }, 800);\r\n    }\r\n\r\n    // private\r\n    private _generateRubiksCube() {\r\n        for (let x = -1; x <= 1; x++) {\r\n            for(let y = -1; y <= 1; y++) {\r\n                for(let z = -1; z <= 1; z++) {\r\n                    if (x === 0 && y === 0 && z === 0) {\r\n                        continue;\r\n                    }\r\n                    const count = x + 3 + y + 3 + z + 3;\r\n                    const box = BABYLON.Mesh.CreateBox(`cube${count}`, 1, this.scene);\r\n                    box.material = this.multiMaterial;\r\n                    box.subMeshes = [];\r\n                    const verticesCount = box.getTotalVertices();\r\n                    box.subMeshes.push(new BABYLON.SubMesh(0, 0, verticesCount, 0, 6, box));\r\n                    box.subMeshes.push(new BABYLON.SubMesh(1, 1, verticesCount, 6, 6, box));\r\n                    box.subMeshes.push(new BABYLON.SubMesh(2, 2, verticesCount, 12, 6, box));\r\n                    box.subMeshes.push(new BABYLON.SubMesh(3, 3, verticesCount, 18, 6, box));\r\n                    box.subMeshes.push(new BABYLON.SubMesh(4, 4, verticesCount, 24, 6, box));\r\n                    box.subMeshes.push(new BABYLON.SubMesh(5, 5, verticesCount, 30, 6, box));\r\n                    box.position.set(x, y, z);\r\n                    this.cubes.push(box);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private colorTexture(color:number) : BABYLON.Texture {\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = 256;\r\n        canvas.height = 256;\r\n        const context = canvas.getContext('2d');\r\n        if (context != null) {\r\n            // first use black draw into the background\r\n            context.fillStyle = '#000000';\r\n            context.fillRect(0, 0, 256, 256);\r\n            context.rect(20, 20, 216, 216);\r\n            context.lineJoin = 'round';\r\n            context.lineWidth = 10;\r\n\r\n            // then use the color draw into the background\r\n            const colorString = '#' + color.toString(16);\r\n            context.fillStyle = colorString;\r\n            context.strokeStyle = colorString;\r\n            context.stroke();\r\n            context.fill();\r\n        }\r\n        return new BABYLON.Texture(canvas.toDataURL(), this.scene);\r\n    }\r\n\r\n    // rotation core function by using high level function\r\n    private _rotate(filter:(value: BABYLON.Mesh) => boolean, rotation:(value: BABYLON.Mesh, ratio:number)=>void) {\r\n        // test if current animation do finish;\r\n        if (!this._didFinish) {\r\n            return;\r\n        }\r\n        // start next animation.\r\n        this._didFinish = false;\r\n\r\n        const objects = this.cubes.filter(filter);\r\n        this._animate(500, (ratio:number) => {\r\n            for (const object of objects) {\r\n                rotation(object, ratio);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    // animate the rotate\r\n    // during : ms\r\n    private _animate(during: number = 500, animating: (ratio:number)=>void) {\r\n        requestAnimationFrame((timestamp:number) => {\r\n            this._animationCore(during, timestamp, timestamp, timestamp, animating);\r\n        });\r\n    }\r\n\r\n    // the animate core function\r\n    private _animationCore(during:number, startTimestamp:number, previousTimestamp:number,currentTimestamp:number, animating: (ratio:number)=>void) {\r\n        // check if diff bigger than during, and correct the timestamp\r\n        const correction = currentTimestamp - startTimestamp >= during ?(startTimestamp + during) : currentTimestamp;\r\n\r\n        // get the diff of contiguous frames\r\n        const diff = correction - previousTimestamp;\r\n\r\n        // run the animating clouse\r\n        animating(diff / during);\r\n\r\n        // run animation frame\r\n        const handler = requestAnimationFrame((timestamp:number) => {\r\n            this._animationCore(during, startTimestamp, currentTimestamp, timestamp, animating);\r\n        });\r\n\r\n        // diff is current timestamp - start timestamp\r\n        // check if diff bigger than during\r\n        if (currentTimestamp - startTimestamp >= during) {\r\n            cancelAnimationFrame(handler);\r\n            this._didFinish = true;\r\n        }\r\n    }\r\n\r\n    // rotation around X axis\r\n    private static _rotateAroundAxisX(object: BABYLON.Mesh, rad:number) {\r\n        const y = object.position.y;\r\n        const z = object.position.z;\r\n        object.rotate(BABYLON.Axis.X, rad, BABYLON.Space.WORLD);\r\n        object.position.y = Math.cos(rad) * y - Math.sin(rad) * z;\r\n        object.position.z = Math.cos(rad) * z + Math.sin(rad) * y;\r\n    }\r\n\r\n    // rotation around Y axis\r\n    private static _rotateAroundAxisY(object: BABYLON.Mesh, rad:number) {\r\n        const x = object.position.x;\r\n        const z = object.position.z;\r\n        object.rotate(BABYLON.Axis.Y, -rad, BABYLON.Space.WORLD);\r\n        object.position.x = Math.cos(rad) * x - Math.sin(rad) * z;\r\n        object.position.z = Math.cos(rad) * z + Math.sin(rad) * x;\r\n    }\r\n\r\n    // rotation around Z axis\r\n    private static _rotateAroundAxisZ(object: BABYLON.Mesh, rad:number) {\r\n        const x = object.position.x;\r\n        const y = object.position.y;\r\n        object.rotate(BABYLON.Axis.Z, rad, BABYLON.Space.WORLD);\r\n        object.position.x = Math.cos(rad) * x - Math.sin(rad) * y;\r\n        object.position.y = Math.cos(rad) * y + Math.sin(rad) * x;\r\n    }\r\n}\r\n","import * as React from 'react';\nimport { RubiksCubeViewer } from \"./modules/rubiks-cube-viewer\";\nimport './App.css';\n// import {Slider} from \"@material-ui/core\";\n\n\ninterface AppState {\n    steps: string;\n}\n\nclass App extends React.Component<{}, AppState> {\n\n    public viewer!: RubiksCubeViewer;\n\n    public allOperations = [\n        'L', 'L\\'', 'L2', 'L\\'2',\n        'R', 'R\\'', 'R2', 'R\\'2',\n        'U', 'U\\'', 'U2', 'U\\'2',\n        'D', 'D\\'', 'D2', 'D\\'2',\n        'F', 'F\\'', 'F2', 'F\\'2',\n        'B', 'B\\'', 'B2', 'B\\'2'\n    ];\n\n\n    get cameraWheel() {\n        if (this.viewer && this.viewer.camera) {\n            return this.viewer.camera.wheelPrecision;\n        }\n        return 0;\n    }\n\n    set cameraWheel(value: number) {\n        if (this.viewer && this.viewer.camera) {\n            this.viewer.camera.wheelPrecision = value;\n        }\n    }\n\n    constructor (props: {}) {\n        super(props);\n        this.state = {\n            steps: ''\n        };\n    }\n\n    public componentDidMount() {\n        this.viewer = new RubiksCubeViewer(document.getElementById('cube-container') as HTMLElement);\n    }\n\n    public componentWillUnmount(): void {\n        this.viewer.destroy();\n    }\n\n    public render() {\n        const stepsView = this.state.steps ? (<div id=\"steps-content\">{this.state.steps}</div>) : null;\n        return (\n        <div className=\"App\">\n            <div id=\"cube-container\" className=\"cube-container\"/>\n            {stepsView}\n            <footer className=\"cube-buttons\">\n                <button onClick={this.disrupt}>25 STEP DISRUPT</button>\n                <button onClick={this.rotateFront}>F</button>\n                <button onClick={this.rotateUp}>U</button>\n                <button onClick={this.rotateLeft}>L</button>\n                <button onClick={this.rotateRight}>R</button>\n                <button onClick={this.rotateDown}>D</button>\n                <button onClick={this.rotateBack}>B</button>\n                <button onClick={this.rotateFront}>F'</button>\n                <button onClick={this.rotateUp}>U'</button>\n                <button onClick={this.rotateLeft}>L'</button>\n                <button onClick={this.rotateRight}>R'</button>\n                <button onClick={this.rotateDown}>D'</button>\n                <button onClick={this.rotateBack}>B'</button>\n                <button onClick={this.reset}>reset</button>\n            </footer>\n            {/*<Slider*/}\n            {/*    value={this.cameraWheel}*/}\n            {/*    onChange={this.onChange}*/}\n            {/*    aria-labelledby=\"continuous-slider\"*/}\n            {/*    min={0}*/}\n            {/*    max={10000}*/}\n            {/*/>*/}\n        </div>\n        );\n    }\n\n    // onChange = (event: any, newValue: number | number[]) => {\n    //     console.log(newValue);\n    //     this.cameraWheel = newValue as number;\n    // }\n\n    // this algorithm is wrong...\n    // I am trying to think another one..\n    private disrupt = () => {\n        let steps = '';\n        const operationQueue = [];\n        let prevStep = '';\n\n        for (let index = 0; index < 25; index++) {\n            const operationIndex = this.allOperations.findIndex(value => value === prevStep);\n            let number = 0;\n            if (operationIndex === -1) {\n                number = (Math.floor(100 * Math.random())) % 24;\n            } else if (operationIndex < 4) {\n                while (number < 4) {\n                   number = (Math.floor(100 * Math.random())) % 24;\n                }\n            } else if (operationIndex < 8) {\n                while (number > 3 && number < 8) {\n                    number = (Math.floor(100 * Math.random())) % 24;\n                }\n            } else if (operationIndex < 12) {\n                while (number > 7 && number < 12) {\n                    number = (Math.floor(100 * Math.random())) % 24;\n                }\n            } else if (operationIndex < 16) {\n                while (number > 11 && number < 16) {\n                    number = (Math.floor(100 * Math.random())) % 24;\n                }\n            } else if (operationIndex < 20) {\n                while (number > 15 && number < 20) {\n                    number = (Math.floor(100 * Math.random())) % 24;\n                }\n            } else if (operationIndex < 24) {\n                while (number > 19 && number < 24) {\n                    number = (Math.floor(100 * Math.random())) % 24;\n                }\n            }\n            const operation = this.allOperations[number];\n            operationQueue.push(this.allOperations[number]);\n            steps += operation + ' ';\n            prevStep = operation;\n        }\n        this.setState({steps});\n        this.viewer.startAOperationQueue(operationQueue);\n    }\n\n    private reset = (event:React.MouseEvent) => {\n        this.viewer.reset();\n    }\n    private rotateFront = (event:React.MouseEvent) => {\n        const textContent = (event.target as HTMLElement).textContent;\n        this.viewer.operate(textContent as string);\n    }\n    private rotateUp = (event:React.MouseEvent) => {\n        const textContent = (event.target as HTMLElement).textContent;\n        this.viewer.operate(textContent as string);\n    }\n    private rotateLeft = (event:React.MouseEvent) => {\n        const textContent = (event.target as HTMLElement).textContent;\n        this.viewer.operate(textContent as string);\n    }\n    private rotateRight = (event:React.MouseEvent) => {\n        const textContent = (event.target as HTMLElement).textContent;\n        this.viewer.operate(textContent as string);\n    }\n    private rotateDown = (event:React.MouseEvent) => {\n        const textContent = (event.target as HTMLElement).textContent;\n        this.viewer.operate(textContent as string);\n    }\n    private rotateBack = (event:React.MouseEvent) => {\n        const textContent = (event.target as HTMLElement).textContent;\n        this.viewer.operate(textContent as string);\n    }\n}\n\nexport default App;\n","// tslint:disable:no-console\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the 'N+1' visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(\n            process.env.PUBLIC_URL!,\n            window.location.toString()\n        );\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Lets check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://goo.gl/SC7cgQ'\n                    );\n                });\n            } else {\n                // Is not local host. Just register service worker\n                registerValidSW(swUrl);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker) {\n                    installingWorker.onstatechange = () => {\n                        if (installingWorker.state === 'installed') {\n                            if (navigator.serviceWorker.controller) {\n                                // At this point, the old content will have been purged and\n                                // the fresh content will have been added to the cache.\n                                // It's the perfect time to display a 'New content is\n                                // available; please refresh.' message in your web app.\n                                console.log('New content is available; please refresh.');\n                            } else {\n                                // At this point, everything has been precached.\n                                // It's the perfect time to display a\n                                // 'Content is cached for offline use.' message.\n                                console.log('Content is cached for offline use.');\n                            }\n                        }\n                    };\n                }\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            if (\n                response.status === 404 ||\n                response.headers.get('content-type')!.indexOf('javascript') === -1\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root') as HTMLElement\n);\nregisterServiceWorker();\n"],"sourceRoot":""}