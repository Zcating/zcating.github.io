// threejs.org/license
(function(l,ja){"object"===typeof exports&&"undefined"!==typeof module?ja(exports):"function"===typeof define&&define.amd?define(["exports"],ja):(l=l||self,ja(l.THREE={}))})(this,function(l){function ja(){}function z(a,b){this.x=a||0;this.y=b||0}function J(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("three.matrix4: 0="==b&&void" the="" constructor="" no="" longer="" reads="" arguments.="" use="" .set()="" instead.")}function="" ka(a,b,c,d){this._x="a||0;this._y=b||0;this._z=c||0;this._w=void" 0!="=d?" d:1}function="" n(a,b,c){this.x="a||0;this.y=b||0;this.z=c||0}function" ra(){this.elements="[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error(" three.matrix3:"="" s(a,b,c,d,e,f,g,h,k,m){object.defineproperty(this,"id",{value:pf++});this.uuid="G.generateUUID();this.name=" ";this.image="void"" void="" z(0,0);this.repeat="new" z(1,1);this.center="new" z(0,0);this.rotation="0;this.matrixAutoUpdate=!0;this.matrix=new" ra;this.generatemipmaps="!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void" v(a,b,c,d){this.x="a||0;this.y=b||0;this.z=c||0;this.w=void" qa(a,="" b,c){this.width="a;this.height=b;this.scissor=new" v(0,0,a,b);this.scissortest="!1;this.viewport=new" v(0,0,a,b);c="c||{};this.texture=new" s(void="" 0,void="" 0,c.wraps,c.wrapt,c.magfilter,c.minfilter,c.format,c.type,c.anisotropy,c.encoding);this.texture.generatemipmaps="void" yd(a,b,c){qa.call(this,a,b,c);this.samples="4}function" jb(a,b,c){qa.call(this,a,b,c);this.activemipmaplevel="this.activeCubeFace=0}function" lb(a,b,c,d,e,f,g,h,k,m,q,p){s.call(this,null,f,g,h,k,m,d,e,q,p);this.image="{data:a,width:b,height:c};this.magFilter=void" ya(a,b){this.min="void" n(infinity,infinity,infinity);this.max="void" b?b:new="" n(-infinity,-infinity,-infinity)}function="" ga(a,b){this.center="void" n;this.radius="void" ra(a,b){this.normal="void" n(1,0,0);this.constant="void" ud(a,b,c,d,e,f){this.planes="[void" ra,void="" ra]}function="" kb(a){var="" b="{},c;for(c" in="" a){b[c]="{};for(var" d="" a[c]){var="" e="a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||" e.isvector4||e.istexture)?b[c][d]="e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return" b}function="" na(a){for(var="" d)b[e]="d[e]}return" h(a,b,c){return="" zd(){function="" a(e,f){!1!="=c&&(d(e,f),b.requestAnimationFrame(a))}var" setcontext:function(a){b="a}}}function" qf(a){function="" b(b,c){var="" instanceof="" float32array?c="5126:d" float64array?console.warn("three.webglattributes:="" unsupported="" data="" buffer="" format:="" float64array."):d="" uint16array?c="5123:d" int16array?c="5122:d" uint32array?c="5125:d" int32array?c="5124:d" int8array?c="5120:d" uint8array&&="" (c="5121);return{buffer:h,type:c,bytesPerElement:d.BYTES_PER_ELEMENT,version:b.version}}var" c="new" weakmap;return{get:function(a){a.isinterleavedbufferattribute&&(a="a.data);return" c.get(a)},remove:function(b){b.isinterleavedbufferattribute&&(b="b.data);var" f="c.get(d);if(void" if(f.version<d.version){var="" g="d,h=g.array,k=g.updateRange;a.bindBuffer(e,f.buffer);" !1="==g.dynamic?a.bufferData(e,h,35044):-1===k.count?a.bufferSubData(e,0,h):0===k.count?console.error(" three.webglobjects.updatebuffer:"="" dynamic="" three.bufferattribute="" marked="" as="" needsupdate="" but="" updaterange.count="" is="" 0,="" ensure="" you="" are="" using="" set="" methods="" or="" updating="" manually."):(a.buffersubdata(e,k.offset*h.bytes_per_element,h.subarray(k.offset,k.offset+k.count)),k.count="-1);f.version=d.version}}}}function" lb(a,b,c,d,e,f){this.a="a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new" n;this.vertexnormals="Array.isArray(d)?" d:[];this.color="e&&e.isColor?e:new" h;this.vertexcolors="Array.isArray(e)?e:[];this.materialIndex=void" mb(a,b,c,d){this._x="a||0;this._y=b||0;this._z=c||0;this._order=d||mb.DefaultOrder}function" $d(){this.mask="1}function" c(){object.defineproperty(this,"id",{value:rf++});this.uuid="G.generateUUID();this.name=" ";this.type="Object3D" ;this.parent="null;this.children=[];this.up=C.DefaultUp.clone();var"" a="new" n,b="new" mb,c="new" ka,d="new" n(1,1,1);b.onchange(function(){c.setfromeuler(b,!1)});c.onchange(function(){b.setfromquaternion(c,="" 0,!1)});object.defineproperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:b},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:d},modelviewmatrix:{value:new="" j},normalmatrix:{value:new="" ra}});this.matrix="new" j;this.matrixworld="new" j;this.matrixautoupdate="C.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new" $d;this.visible="!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=" !0;this.renderorder="0;this.userData={}}function" r(){object.defineproperty(this,"id",{value:sf+="2});this.uuid=G.generateUUID();this.name=" ;this.vertices="[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate="" this.elementsneedupdate="!1}function" l(a,b,c){if(array.isarray(a))throw="" new="" typeerror("three.bufferattribute:="" array="" should="" be="" typed="" array.");this.name="" ;this.array="a;this.itemSize=b;this.count=void" uc(a,b,c){l.call(this,new="" int8array(a),b,c)}function="" vc(a,b,c){l.call(this,new="" uint8array(a),b,c)}function="" wc(a,b,c){l.call(this,new="" uint8clampedarray(a),b,c)}function="" xc(a,b,c){l.call(this,="" int16array(a),b,c)}function="" nb(a,b,c){l.call(this,new="" uint16array(a),b,c)}function="" yc(a,b,c){l.call(this,new="" int32array(a),b,c)}function="" ob(a,b,c){l.call(this,new="" uint32array(a),b,c)}function="" b(a,b,c){l.call(this,new="" float32array(a),b,c)}function="" zc(a,b,c){l.call(this,new="" float64array(a),b,c)}function="" me(){this.vertices="[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;" this.groupsneedupdate="this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function" ne(a){if(0="==a.length)return-Infinity;for(var">b&&(b=a[c]);return b}function D(){Object.defineProperty(this,"id",{value:Tf+=2});this.uuid=G.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity};
this.userData={}}function Mb(a,b,c,d,e,f){R.call(this);this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new pb(a,b,c,d,e,f));this.mergeVertices()}function pb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,l,ta,F,da){var r=f/ta,u=g/F,x=f/2,w=g/2,A=l/2;g=ta+1;var I=F+1,y=f=0,N,z,B=new n;for(z=0;z<i;z++){var 0="==k&&(k=new" c="z*u-w;for(N=0;N<g;N++)B[a]=(N*r-x)*d,B[b]=C*e,B[c]=A,m.push(B.x,B.y,B.z),B[a]=0,B[b]=0,B[c]=0<l?1:-1,q.push(B.x," b.y,b.z),p.push(n="" ta),p.push(1-z="" f),f+="1}for(z=0;z<F;z++)for(N=0;N<ta;N++)a=t+N+g*(z+1),b=t+(N+1)+g*(z+1),c=t+(N+1)+g*z,k.push(t+N+g*z,a,c),k.push(a,b,c),y+=6;h.addGroup(v,y,da);v+=y;t+=f}D.call(this);this.type=" boxbuffergeometry";this.parameters="{width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var"" h="this;a=a||1;b=b||1;c=c||1;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var" k="[],m=[],q=[],p=[],t=0,v=0;g(" z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,"="" f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z",1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setindex(k);this.addattribute("position",new="" b(m,3));this.addattribute("normal",new="" b(q,3));this.addattribute("uv",new="" b(p,2))}function="" ac(a,b,c,d){r.call(this);this.type="PlaneGeometry" ;this.parameters="{width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new" qb(a,b,c,d));this.mergevertices()}function="" qb(a,b,c,d){d.call(this);this.type="PlaneBufferGeometry" e="a/2,f=b/2;c=Math.floor(c)||1;d=Math.floor(d)||1;var" g="c+1,h=d+1,k=a/c,m=b/d,q=[],p=[],t=[],v=[];for(a=0;a<h;a++){var" l="a*m-f;for(b=0;b<g;b++)p.push(b*k-e,-l,0),t.push(0,0,1),v.push(b/c),v.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,q.push(b+g*a,e,h),q.push(e,f,h);this.setIndex(q);this.addAttribute(" position",new"="" b(p,3));this.addattribute("normal",new="" b(t,="" 3));this.addattribute("uv",new="" b(v,2))}function="" q(){object.defineproperty(this,"id",{value:uf++});this.uuid="G.generateUUID();this.name=" ";this.type="Material" ;this.lights="this.fog=!0;this.blending=1;this.side=0;this.flatShading=!1;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows="" this.clipintersection="!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.visible=!0;this.userData={};this.needsUpdate=!0}function" ca(a){q.call(this);this.type="ShaderMaterial" ;this.defines="{};this.uniforms={};this.vertexShader=" void"="" main()="" {\n\tgl_position="projectionMatrix" *="" modelviewmatrix="" vec4(="" position,="" 1.0="" );\n}";this.fragmentshader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}" ;="" this.linewidth="1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void" 0;this.uniformsneedupdate="!1;void" 0!="=a&&(void" attributes="" should="" now="" be="" defined="" in="" three.buffergeometry="" instead."),this.setvalues(a))}="" function="" rb(a,b){this.origin="void" n;this.direction="void" n}function="" ua(a,b,c){this.a="void" n;this.b="void" n;this.c="void" xa(a){q.call(this);this.type="MeshBasicMaterial" ;this.color="new" h(16777215);this.lightmap="this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=" 1;this.wireframelinejoin="this.wireframeLinecap=" round";this.lights="this.morphTargets=this.skinning=!1;this.setValues(a)}function"" va(a,b){c.call(this);this.type="Mesh" ;this.geometry="void" d;this.material="void" xa({color:16777215*math.random()});this.drawmode="0;this.updateMorphTargets()}function" vf(a,b,c,d){function="" e(a,c){b.buffers.color.setclear(a.r,a.g,a.b,c,d)}var="" f="new" h(0),g="0,h,k,m=null,q=0;return{getClearColor:function(){return" f},setclearcolor:function(a,b){f.set(a);g="void" g},setclearalpha:function(a){g="a;e(f,g)},render:function(b,d,v,l){d=d.background;null===d?(e(f,g),m=null,q=0):d&&d.isColor&&(e(d,1),l=!0,m=null,q=0);(a.autoClear||l)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil);if(d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void" va(new="" pb(1,1,1),new="" ca({type:"backgroundcubematerial",uniforms:kb(sa.cube.uniforms),vertexshader:sa.cube.vertexshader,fragmentshader:sa.cube.fragmentshader,="" side:1,depthtest:!1,depthwrite:!1,fog:!1})),k.geometry.removeattribute("normal"),k.geometry.removeattribute("uv"),k.onbeforerender="function(a,b,c){this.matrixWorld.copyPosition(c.matrixWorld)},Object.defineProperty(k.material," map",{get:function(){return"="" this.uniforms.tcube.value}}),c.update(k));l="d.isWebGLRenderTargetCube?d.texture:d;k.material.uniforms.tCube.value=l;k.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1;if(m!==d||q!==l.version)k.material.needsUpdate=!0,m=d,q=l.version;b.unshift(k," k.geometry,k.material,0,0,null)}else="" if(d&&d.istexture){void="" qb(2,2),new="" ca({type:"backgroundmaterial",uniforms:kb(sa.background.uniforms),vertexshader:sa.background.vertexshader,fragmentshader:sa.background.fragmentshader,side:0,depthtest:!1,depthwrite:!1,fog:!1})),h.geometry.removeattribute("normal"),object.defineproperty(h.material,"map",{get:function(){return="" this.uniforms.t2d.value}}),c.update(h));h.material.uniforms.t2d.value="d;!0===d.matrixAutoUpdate&&d.updateMatrix();" h.material.uniforms.uvtransform.value.copy(d.matrix);if(m!="=d||q!==d.version)h.material.needsUpdate=!0,m=d,q=d.version;b.unshift(h,h.geometry,h.material,0,0,null)}}}}function" wf(a,b,c,d){var="" e;this.setmode="function(a){e=a};this.render=function(b,d){a.drawArrays(e,b,d);c.update(d,e)};this.renderInstances=function(f,g,h){if(d.isWebGL2)var" if(k="b.get(" angle_instanced_arrays"),null="==k){console.error("THREE.WebGLBufferRenderer:"" using="" three.instancedbuffergeometry="" but="" hardware="" does="" not="" support="" extension="" angle_instanced_arrays.");="" return}k[d.iswebgl2?"drawarraysinstanced":"drawarraysinstancedangle"](e,g,h,f.maxinstancedcount);c.update(h,e,f.maxinstancedcount)}}function="" xf(a,b,c){function="" d(b){if("highp"="==b){if(0<a.getShaderPrecisionFormat(35633,36338).precision&&0<a.getShaderPrecisionFormat(35632,36338).precision)return" highp";b="mediump" }return"mediump"="==b&&0<a.getShaderPrecisionFormat(35633,36337).precision&&0<a.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var"" e,f="undefined" !="=typeof" webgl2renderingcontext&&="" a="" instanceof="" webgl2renderingcontext,g="void" supported,="" using",h,"instead."),g="h);c=!0===c.logarithmicDepthBuffer;h=a.getParameter(34930);var" e)return="" e;var="" yf(){function="" a(){m.value!="=d&&(m.value=d,m.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=" 0}function="" b(a,b,d,e){var="" float32array(e);for(e="0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,k),h.normal.toArray(g,d),g[d+3]=h.constant}m.value=g;m.needsUpdate=!0}c.numPlanes=f;return" g}var="" ra,k="new" ra,m="{value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var" h};this.beginshadows="function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,k,l,r,u){if(!f||null===c||0===c.length||g&&!k)g?b(null):a();else{k=g?0:e;var" q="4*k,p=r.clippingState||null;m.value=p;p=b(c,l,q,u);for(c=0;c!==q;++c)p[c]=d[c];r.clippingState=p;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=k}}}function" zf(a){var="" b="{};return{get:function(c){if(void" b[c];switch(c){case="" "webgl_depth_texture":var="" d="a.getExtension(" webgl_depth_texture")||a.getextension("moz_webgl_depth_texture")||a.getextension("webkit_webgl_depth_texture");break;case"="" "ext_texture_filter_anisotropic":d="a.getExtension(" ext_texture_filter_anisotropic")||a.getextension("moz_ext_texture_filter_anisotropic")||a.getextension("webkit_ext_texture_filter_anisotropic");break;case"="" "webgl_compressed_texture_s3tc":d="a.getExtension(" webgl_compressed_texture_s3tc")||a.getextension("moz_webgl_compressed_texture_s3tc")||a.getextension("webkit_webgl_compressed_texture_s3tc");"="" break;case="" "webgl_compressed_texture_pvrtc":d="a.getExtension(" webgl_compressed_texture_pvrtc")||a.getextension("webkit_webgl_compressed_texture_pvrtc");break;default:d="a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer:"" "+c+"="" supported.");return="" b[c]="d}}}function" $f(a,b,c){function="" d(a){var="" a.attributes)b.remove(a.attributes[k]);g.removeeventlistener("dispose",d);delete="" e[g.id];if(k="f[a.id])b.remove(k),delete" f[a.id];="" c.memory.geometries--}var="" f;b.addeventlistener("dispose",d);b.isbuffergeometry?f="b:b.isGeometry&&(void" d).setfromobject(a)),f="b._bufferGeometry);e[b.id]=f;c.memory.geometries++;return" f},update:function(a){var="" d)b.update(d[e],34962);a="a.morphAttributes;for(e" a){c="a[e];d=0;for(var" c;c="[];var" p="d[e+0],t=d[e+1],l=d[e+2];c.push(p,t,t,l,l,p)}}else" for(d="e.position.array,e=0,g=d.length/3-1;e<g;e+=3)p=e+0,t=e+1,l=e+2,c.push(p,t,t,l,l,p);c=new" (65535<ne(c)?ob:nb)(c,1);b.update(c,34963);return="" f[a.id]="c}}}function" ag(a,b,c,d){var="" e,f,g;this.setmode="function(a){e=a};this.setIndex=function(a){f=a.type;g=a.bytesPerElement};this.render=function(b,d){a.drawElements(e,d,f,b*g);c.update(d," e)};this.renderinstances="function(h,k,m){if(d.isWebGL2)var" if(q="b.get(" angle_instanced_arrays.");return}q[d.iswebgl2?"drawelementsinstanced":"drawelementsinstancedangle"](e,m,f,k*g,h.maxinstancedcount);c.update(m,e,h.maxinstancedcount)}}function="" bg(a){var="" textures:0},render:b,programs:null,autoreset:!0,reset:function(){b.frame++;b.calls="0;b.triangles=0;b.points=0;b.lines=0},update:function(a,d,e){e=e||1;b.calls++;switch(d){case" 4:b.triangles+="a/3*e;break;case" 5:case="" 6:b.triangles+="e*(a-2);break;case" 1:b.lines+="a/2*e;break;case" 3:b.lines+="e*(a-1);break;case" 2:b.lines+="e*a;break;case" 0:b.points+="e*a;break;default:console.error(" three.webglinfo:"="" unknown="" draw="" mode:",d)}}}}function="" cg(a,b){return="" math.abs(b[1])-math.abs(a[1])}function="" dg(a){var="" new="" float32array(8);return{update:function(d,e,f,g){var="" m="0;m<k;m++)d[m]=[m,0];b[e.id]=d}var">m;m++){if(p=d[m])if(h=p[0],k=p[1]){q&&e.addAttribute("morphTarget"+m,
q[h]);f&&e.addAttribute("morphNormal"+m,f[h]);c[m]=k;continue}c[m]=0}g.getUniforms().setValue(a,"morphTargetInfluences",c)}}}function eg(a,b){var c={};return{update:function(d){var e=b.render.frame,f=d.geometry,g=a.get(d,f);c[g.id]!==e&&(f.isGeometry&&g.updateFromObject(d),a.update(g),c[g.id]=e);return g},dispose:function(){c={}}}}function Za(a,b,c,d,e,f,g,h,k,m){a=void 0!==a?a:[];S.call(this,a,void 0!==b?b:301,c,d,e,f,void 0!==g?g:1022,h,k,m);this.flipY=!1}function Nb(a,b,c,d){S.call(this,null);
this.image={data:a,width:b,height:c,depth:d};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1}function Ob(a,b,c){var d=a[0];if(0>=d||0<d)return 0="==f&&(f=new" 35633="==b?" vertex":"fragment",a.getshaderinfolog(d),eg(c));return"="" a;var="" e="b*c,f=Oe[e];void" float32array(e),oe[e]="f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return" f}function="" fa(a,b){if(a.length!="=b.length)return!1;for(var" c="0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function" ba(a,b){for(var="" pe(a,="" b){var="" int32array(b),qe[b]="c);for(var" d="0;d!==b;++d)c[d]=a.allocTextureUnit();return" c}function="" fg(a,b){var="" gg(a,b){var="" hg(a,b){var="" 0!="=b.x){if(c[0]!==b.x||c[1]!==b.y)a.uniform2f(this.addr,b.x,b.y),c[0]=b.x,c[1]=b.y}else" fa(c,b)||(a.uniform2fv(this.addr,b),ba(c,b))}function="" ig(a,b){var="" b.x||c[1]!="=b.y||c[2]!==b.z)a.uniform3f(this.addr,b.x,b.y,b.z),c[0]=b.x,c[1]=b.y,c[2]=b.z}else" if(void="" fa(c,b)||(a.uniform3fv(this.addr,b),ba(c,b))}function="" jg(a,b){var="" fa(c,b)||(a.uniform4fv(this.addr,b),ba(c,b))}function="" kg(a,="" lg(a,b){var="" mg(a,b){var="" !1,te),ba(c,d))}function="" ng(a,b,c){var="" og(a,b,c){var="" qg(a,b,c){var="" we(a,b){var="" xe(a,b){var="" ye(a,b){var="" rg(a){switch(a){case="" 5126:return="" fg;case="" 35664:return="" hg;case="" 35665:return="" ig;case="" 35666:return="" jg;case="" 35674:return="" kg;case="" 35675:return="" lg;case="" 35676:return="" mg;case="" 35678:case="" 36198:return="" ng;case="" 35679:return="" og;case="" 35680:return="" qg;case="" 5124:case="" 35670:return="" gg;case="" 35667:case="" 35671:return="" we;case="" 35668:case="" 35672:return="" xe;case="" 35669:case="" 35673:return="" ye}}="" function="" sg(a,b){var="" tg(a,b){var="" ug(a,b){var="" vg(a,b){var="" wg(a,b){var="" xg(a,="" yg(a,b){var="" zg(a,b){var="" ag(a,b,c){var="" bg(a,b,c){var="" cg(a){switch(a){case="" sg;case="" ug;case="" vg;case="" wg;case="" xg;case="" yg;case="" zg;case="" 35678:return="" ag;case="" bg;case="" tg;case="" ye}}function="" dg(a,="" b,c){this.id="a;this.addr=c;this.cache=[];this.setValue=rg(b.type)}function" ze(a,b,c){this.id="a;this.addr=c;this.cache=[];this.size=b.size;this.setValue=Cg(b.type)}function" $e(a){this.id="a;this.seq=[];this.map={}}function" eb(a,b,c){this.seq="[];this.map={};this.renderer=c;c=a.getProgramParameter(b,35718);for(var" m="be.exec(h),q=be.lastIndex,p=m[1],t=m[3];" ]"="==m[2]&&(p|=0);"" dg(p,e,f):new="" ze(p,e,f);h.seq.push(e);h.map[e.id]="e;break}else" t="g.map[p],void" $e(p),p="g,g=t,p.seq.push(g),p.map[g.id]=g),g=t}}}function" eg(a){a="a.split(" \n");for(var"="" b="0;b<a.length;b++)a[b]=b+1+" :"="" "+a[b];return="" a.join("\n")}function="" af(a,b,c){var="" shader="" couldn't="" compile.");""!="=a.getShaderInfoLog(d)&&console.warn(" three.webglshader:"="" gl.getshaderinfolog()",="" d}function="" bf(a){switch(a){case="" 3e3:return["linear","(="" value="" )"];case="" 3001:return["srgb","(="" 3002:return["rgbe","(="" 3004:return["rgbm","(="" value,="" 7.0="" 3005:return["rgbm","(="" 16.0="" 3006:return["rgbd","(="" 256.0="" 3007:return["gamma","(="" float(="" gamma_factor="" )="" )"];default:throw="" error("unsupported="" encoding:="" "+a);}}function="" xd(a,b){b="bf(b);return" vec4"="" "+a+"(="" vec4="" {="" return="" "+="" b[0]+"tolinear"+b[1]+";="" }"}function="" fg(a,b){b="bf(b);return" linearto"+b[0]+b[1]+";="" gg(a,b){switch(b){case="" 1:b="Linear" ;break;case="" 2:b="Reinhard" 3:b="Uncharted2" 4:b="OptimizedCineon" 5:b="ACESFilmic" ;break;default:throw="" tonemapping:="" "+b);}return"vec3="" vec3="" color="" "+b+"tonemapping(="" );="" hg(a,b,c){a="a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap&&!b.objectSpaceNormalMap||" b.flatshading?"#extension="" gl_oes_standard_derivatives="" :="" enable":"",(a.fragdepth||b.logarithmicdepthbuffer)&&c.get("ext_frag_depth")?"#extension="" gl_ext_frag_depth="" enable":"",a.drawbuffers&&c.get("webgl_draw_buffers")?"#extension="" gl_ext_draw_buffers="" require":"",(a.shadertexturelod||b.envmap)&&c.get("ext_shader_texture_lod")?"#extension="" gl_ext_shader_texture_lod="" enable":""].filter(bc).join("\n")}function="" ig(a){var="" in="" a){var="" "+c+"="" "+d)}return="" b.join("\n")}="" bc(a){return""!="=a}function" cf(a,b){return="" a.replace(="" num_dir_lights="" g,b.numdirlights).replace(="" num_spot_lights="" g,b.numspotlights).replace(="" num_rect_area_lights="" g,b.numrectarealights).replace(="" num_point_lights="" g,b.numpointlights).replace(="" num_hemi_lights="" g,b.numhemilights)}function="" df(a,b){return="" num_clipping_planes="" g,b.numclippingplanes).replace(="" union_clipping_planes="" g,b.numclippingplanes-b.numclipintersection)}function="" ce(a){return="" ^[="" \t]*#include="" +<([\w\d.="" ]+)="">/gm,
function(a,c){a=O[c];if(void 0===a)throw Error("Can not resolve #include <"+c+">");return ce(a)})}function ef(a){return a.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,c,d,e){a="";for(c=parseInt(c);c<parseint(d);c++)a+=e.replace( 0="==I&&(I=new" 300="" \[="" i="" \]="" g,"[="" "+c+"="" ]");return="" a})}function="" jg(a,b,c,d,e,f,g){var="" h="a.context,k=d.defines,m=e.vertexShader,q=e.fragmentShader,p=" shadowmap_type_basic";1="==f.shadowMapType?p="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&"" (p="SHADOWMAP_TYPE_PCF_SOFT" );var="" t="ENVMAP_TYPE_CUBE" ,l="ENVMAP_MODE_REFLECTION" ,r="ENVMAP_BLENDING_MULTIPLY" ;if(f.envmap){switch(d.envmap.mapping){case="" 301:case="" 302:t="ENVMAP_TYPE_CUBE" ;break;case="" 306:case="" 307:t="ENVMAP_TYPE_CUBE_UV" 303:case="" 304:t="ENVMAP_TYPE_EQUIREC" 305:t="ENVMAP_TYPE_SPHERE" }switch(d.envmap.mapping){case="" 302:case="" 304:l="ENVMAP_MODE_REFRACTION" }switch(d.combine){case="" 0:r="ENVMAP_BLENDING_MULTIPLY" 1:r="ENVMAP_BLENDING_MIX" 2:r="ENVMAP_BLENDING_ADD" }}var="" u="0<a.gammaFactor?a.gammaFactor:1,x=g.isWebGL2?" ":hg(d.extensions,f,b),n="Ig(k),w=h.createProgram();d.isRawShaderMaterial?(k=[n].filter(Bc).join("\n"),0<k.length&&(k+="\n"),b=[x,n].filter(Bc).join("\n"),0<b.length&&(b+="\n")):(k=["precision"" "+f.precision+"="" float;","precision="" int;","#define="" shader_name="" "+e.name,n,f.supportsvertextextures?"#define="" vertex_textures":"","#define="" gamma_factor="" "+u,"#define="" max_bones="" "+f.maxbones,f.usefog&&f.fog?"#define="" use_fog":"",f.usefog&&f.fogexp?"#define="" fog_exp2":="" "",f.map?"#define="" use_map":"",f.envmap?"#define="" use_envmap":"",f.envmap?"#define="" "+l:"",f.lightmap?"#define="" use_lightmap":"",f.aomap?"#define="" use_aomap":"",f.emissivemap?"#define="" use_emissivemap":"",f.bumpmap?"#define="" use_bumpmap":"",f.normalmap?"#define="" use_normalmap":"",f.normalmap&&f.objectspacenormalmap?"#define="" objectspace_normalmap":"",f.displacementmap&&f.supportsvertextextures?"#define="" use_displacementmap":"",f.specularmap?"#define="" use_specularmap":"",f.roughnessmap?"#define="" use_roughnessmap":="" "",f.metalnessmap?"#define="" use_metalnessmap":"",f.alphamap?"#define="" use_alphamap":"",f.vertexcolors?"#define="" use_color":"",f.flatshading?"#define="" flat_shaded":"",f.skinning?"#define="" use_skinning":"",f.usevertextexture?"#define="" bone_texture":"",f.morphtargets?"#define="" use_morphtargets":"",f.morphnormals&&!1="==f.flatShading?" #define"="" use_morphnormals":"",f.doublesided?"#define="" double_sided":"",f.flipsided?"#define="" flip_sided":"",f.shadowmapenabled?"#define="" use_shadowmap":"",f.shadowmapenabled?"#define="" "+="" p:"",f.sizeattenuation?"#define="" use_sizeattenuation":"",f.logarithmicdepthbuffer?"#define="" use_logdepthbuf":"",f.logarithmicdepthbuffer&&(g.iswebgl2||b.get("ext_frag_depth"))?"#define="" use_logdepthbuf_ext":"","uniform="" mat4="" modelmatrix;","uniform="" modelviewmatrix;","uniform="" projectionmatrix;","uniform="" viewmatrix;","uniform="" mat3="" normalmatrix;","uniform="" vec3="" cameraposition;","attribute="" position;","attribute="" normal;","attribute="" vec2="" uv;","#ifdef="" use_color","\tattribute="" color;",="" "#endif","#ifdef="" use_morphtargets","\tattribute="" morphtarget0;","\tattribute="" morphtarget1;","\tattribute="" morphtarget2;","\tattribute="" morphtarget3;","\t#ifdef="" use_morphnormals","\t\tattribute="" morphnormal0;","\t\tattribute="" morphnormal1;","\t\tattribute="" morphnormal2;","\t\tattribute="" morphnormal3;","\t#else","\t\tattribute="" morphtarget4;","\t\tattribute="" morphtarget5;","\t\tattribute="" morphtarget6;","\t\tattribute="" morphtarget7;","\t#endif","#endif",="" "#ifdef="" use_skinning","\tattribute="" vec4="" skinindex;","\tattribute="" skinweight;","#endif","\n"].filter(bc).join("\n"),b="[x," precision"="" "+e.name,n,f.alphatest?"#define="" alphatest="" "+f.alphatest+(f.alphatest%1?"":".0"):"","#define="" "+u,f.usefog&&f.fog?"#define="" fog_exp2":"",f.map?"#define="" use_map":"",f.matcap?"#define="" use_matcap":"",f.envmap?"#define="" use_envmap":"",f.envmap?="" "#define="" "+t:"",f.envmap?"#define="" "+l:"",f.envmap?"#define="" "+r:"",f.lightmap?"#define="" objectspace_normalmap":"",f.specularmap?"#define="" use_roughnessmap":"",f.metalnessmap?"#define="" use_alphamap":"",f.vertexcolors?="" use_color":"",f.gradientmap?"#define="" use_gradientmap":"",f.flatshading?"#define="" flat_shaded":"",f.doublesided?"#define="" "+p:"",f.premultipliedalpha?"#define="" premultiplied_alpha":"",f.physicallycorrectlights?"#define="" physically_correct_lights":"",f.logarithmicdepthbuffer?"#define="" use_logdepthbuf_ext":="" "",f.envmap&&(g.iswebgl2||b.get("ext_shader_texture_lod"))?"#define="" texture_lod_ext":"","uniform="" cameraposition;",0!="=f.toneMapping?" tone_mapping":"",0!="=f.toneMapping?O.tonemapping_pars_fragment:" ",0!="=f.toneMapping?Gg("toneMapping",f.toneMapping):"",f.dithering?"#define"" dithering":"",f.outputencoding||f.mapencoding||f.matcapencoding||f.envmapencoding||f.emissivemapencoding?o.encodings_pars_fragment:"",f.mapencoding?xd("maptexeltolinear",f.mapencoding):"",="" f.matcapencoding?xd("matcaptexeltolinear",f.matcapencoding):"",f.envmapencoding?xd("envmaptexeltolinear",f.envmapencoding):"",f.emissivemapencoding?xd("emissivemaptexeltolinear",f.emissivemapencoding):"",f.outputencoding?fg("lineartooutputtexel",f.outputencoding):"",f.depthpacking?"#define="" depth_packing="" "+d.depthpacking:"","\n"].filter(bc).join("\n"));m="ce(m);m=cf(m,f);m=df(m,f);q=ce(q);q=cf(q,f);q=df(q,f);m=ef(m);q=ef(q);g.isWebGL2&&!d.isRawShaderMaterial&&(g=!1,p=/^\s*#version\s+300\s+es\s*\n/," d.isshadermaterial&&null!="=m.match(p)&&null!==q.match(p)&&(g=!0,m=m.replace(p," "),q="q.replace(p,"")),k="#version"" es\n\n#define="" attribute="" in\n#define="" varying="" out\n#define="" texture2d="" texture\n"+k,b="[" #version"="" in",g?"":"out="" highp="" pc_fragcolor;",g?"":"#define="" gl_fragcolor="" pc_fragcolor","#define="" gl_fragdepthext="" gl_fragdepth\n#define="" texture\n#define="" texturecube="" texture2dproj="" textureproj\n#define="" texture2dlodext="" texturelod\n#define="" texture2dprojlodext="" textureprojlod\n#define="" texturecubelodext="" texture2dgradext="" texturegrad\n#define="" texture2dprojgradext="" textureprojgrad\n#define="" texturecubegradext="" texturegrad"].join("\n")+="" "\n"+b);q="b+q;m=af(h,35633,k+m);q=af(h,35632,q);h.attachShader(w,m);h.attachShader(w,q);void" 0!="=d.index0AttributeName?h.bindAttribLocation(w,0,d.index0AttributeName):!0===f.morphTargets&&h.bindAttribLocation(w,0," position");h.linkprogram(w);f="h.getProgramInfoLog(w).trim();g=h.getShaderInfoLog(m).trim();p=h.getShaderInfoLog(q).trim();l=t=!0;if(!1===h.getProgramParameter(w,35714))t=!1,console.error("THREE.WebGLProgram:"" shader="" error:="" ",h.geterror(),"35715",h.getprogramparameter(w,35715),"gl.getprograminfolog",="" f,g,p);else="" if(""!="=f)console.warn(" three.webglprogram:"="" gl.getprograminfolog()",f);else="" if(""="==g||" "="==p)l=!1;l&&(this.diagnostics={runnable:t,material:d,programLog:f,vertexShader:{log:g,prefix:k},fragmentShader:{log:p,prefix:b}});h.deleteShader(m);h.deleteShader(q);var"" i;this.getuniforms="function(){void" eb(h,w,a));return="" i};var="" y;this.getattributes="function(){if(void" a="{},b=h.getProgramParameter(w,35721),c=0;c<b;c++){var" d="h.getActiveAttrib(w,c).name;a[d]=h.getAttribLocation(w," d)}y="a}return" y};this.destroy="function(){h.deleteProgram(w);this.program=void" 0};object.defineproperties(this,{uniforms:{get:function(){console.warn("three.webglprogram:="" .uniforms="" is="" now="" .getuniforms().");return="" this.getuniforms()}},attributes:{get:function(){console.warn("three.webglprogram:="" .attributes="" .getattributes().");return="" this.getattributes()}}});this.name="e.name;this.id=Kg++;this.code=c;this.usedTimes=1;this.program=w;this.vertexShader=m;this.fragmentShader=q;return" this}function="" lg(a,="" b,c){function="" d(a,b){if(a)a.istexture?c="a.encoding:a.isWebGLRenderTarget&&(console.warn(" three.webglprograms.gettextureencodingfrommap:"="" don't="" use="" render="" targets="" as="" textures.="" their="" .texture="" property="" instead."),c="a.texture.encoding);else" var="" c="3E3;3E3===c&&b&&(c=3007);return" c}var="" e="[],f={MeshDepthMaterial:" depth",meshdistancematerial:"distancergba",meshnormalmaterial:"normal",meshbasicmaterial:"basic",meshlambertmaterial:"lambert",meshphongmaterial:"phong",meshtoonmaterial:"phong",meshstandardmaterial:"physical","="" meshphysicalmaterial:"physical",meshmatcapmaterial:"matcap",linebasicmaterial:"basic",linedashedmaterial:"dashed",pointsmaterial:"points",shadowmaterial:"shadow",spritematerial:"sprite"},g="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering" .split("="" ");="" this.getparameters="function(b,e,g,q,p,t,l){var" k="l.skeleton.bones;if(c.floatVertexTextures)k=1024;else{var" m="Math.min(Math.floor((c.maxVertexUniforms-20)/4),k.length);m<k.length?(console.warn(" three.webglrenderer:"="" skeleton="" has="" "+k.length+"="" bones.="" this="" gpu="" supports="" "+m+"."),k="0):k=m}}else" supported,="" using",m,"instead."));="" v="a.getRenderTarget();return{shaderID:h,precision:m,supportsVertexTextures:c.vertexTextures,outputEncoding:d(v?v.texture:null,a.gammaOutput),map:!!b.map,mapEncoding:d(b.map,a.gammaInput),matcap:!!b.matcap,matcapEncoding:d(b.matcap,a.gammaInput),envMap:!!b.envMap,envMapMode:b.envMap&&b.envMap.mapping,envMapEncoding:d(b.envMap,a.gammaInput),envMapCubeUV:!!b.envMap&&(306===b.envMap.mapping||307===b.envMap.mapping),lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:d(b.emissiveMap," a.gammainput),bumpmap:!!b.bumpmap,normalmap:!!b.normalmap,objectspacenormalmap:1="==b.normalMapType,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,combine:b.combine,vertexColors:b.vertexColors,fog:!!q,useFog:b.fog,fogExp:q&&q.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c.logarithmicDepthBuffer,skinning:b.skinning&&0<k,maxBones:k," usevertextexture:c.floatvertextextures,morphtargets:b.morphtargets,morphnormals:b.morphnormals,maxmorphtargets:a.maxmorphtargets,maxmorphnormals:a.maxmorphnormals,numdirlights:e.directional.length,numpointlights:e.point.length,numspotlights:e.spot.length,numrectarealights:e.rectarea.length,numhemilights:e.hemi.length,numclippingplanes:p,numclipintersection:t,dithering:b.dithering,shadowmapenabled:a.shadowmap.enabled&&l.receiveshadow&&0<g.length,shadowmaptype:a.shadowmap.type,tonemapping:a.tonemapping,="" physicallycorrectlights:a.physicallycorrectlights,premultipliedalpha:b.premultipliedalpha,alphatest:b.alphatest,doublesided:2="==b.side,flipSided:1===b.side,depthPacking:void" in="" b.defines)d.push(e),d.push(b.defines[e]);for(e="0;e<g.length;e++)d.push(c[g[e]]);d.push(b.onBeforeCompile.toString());d.push(a.gammaOutput);" d.push(a.gammafactor);return="" d.join()};this.acquireprogram="function(d,f,g,q){for(var" h,k="0,m=e.length;k<m;k++){var" l="e[k];if(l.code===q){h=l;++h.usedTimes;break}}void" jg(a,b,q,d,f,g,c),e.push(h));return="" h};this.releaseprogram="function(a){if(0===--a.usedTimes){var" b="e.indexOf(a);e[b]=e[e.length-1];e.pop();a.destroy()}};this.programs=e}function" mg(){var="" weakmap;return{get:function(b){var="" c},remove:function(b){a.delete(b)},update:function(b,="" c,d){a.get(b)[c]="d},dispose:function(){a=new" weakmap}}}function="" ng(a,b){return="" a.grouporder!="=b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.program&&b.program&&a.program!==b.program?a.program.id-b.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function" og(a,b){return="" a.id-b.id}function="" ff(){function="" a(a,d,e,k,m,q){var="" f="b[c];void" f}var="" unshift:function(b,c,h,k,m,q){b="a(b,c,h,k,m,q);(!0===h.transparent?e:d).unshift(b)},sort:function(){1<d.length&&d.sort(Ng);1<e.length&&e.sort(Og)}}}function" pg(){function="" a(c){c="c.target;c.removeEventListener(" dispose",a);delete"="" b[c.id]}var="" ff;b[c.id]="{};b[c.id][d.id]=f;c.addEventListener(" dispose",a)}else"="" ff,e[d.id]="f);return" f},dispose:function(){b="{}}}}function" qg(){var="" a[b.id])return="" a[b.id];switch(b.type){case="" "directionallight":var="" n,color:new="" h,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" z};break;case="" "spotlight":c="{position:new" n,direction:new="" h,distance:0,conecos:0,penumbracos:0,decay:0,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" "pointlight":c="{position:new" h,distance:0,decay:0,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" z,shadowcameranear:1,shadowcamerafar:1e3};break;="" case="" "hemispherelight":c="{direction:new" n,skycolor:new="" h,groundcolor:new="" h};break;case="" "rectarealight":c="{color:new" h,position:new="" n,halfwidth:new="" n,halfheight:new="" n}}return="" a[b.id]="c}}}function" rg(){var="" qg,b="{id:Sg++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[]," pointshadowmatrix:[],hemi:[]},c="new" n,d="new" j,e="new" j;return{setup:function(f,g,h){var="" x="0,n=f.length;x<n;x++){var" w="f[x],I=w.color,y=w.intensity,N=w.distance,ta=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)k+=I.r*y,m+=I.g*y,q+=I.b*y;else" if(w.isdirectionallight){var="" f.direction.sub(c);f.direction.transformdirection(h);if(f.shadow="w.castShadow)I=w.shadow,F.shadowBias=I.bias,F.shadowRadius=I.radius,F.shadowMapSize=I.mapSize;b.directionalShadowMap[p]=ta;b.directionalShadowMatrix[p]=w.shadow.matrix;b.directional[p]=F;p++}else" if(w.isspotlight){f="a.get(w);F.position.setFromMatrixPosition(w.matrixWorld);F.position.applyMatrix4(h);F.color.copy(I).multiplyScalar(y);F.distance=N;F.direction.setFromMatrixPosition(w.matrixWorld);c.setFromMatrixPosition(w.target.matrixWorld);" f.direction.sub(c);f.direction.transformdirection(h);f.conecos="Math.cos(w.angle);F.penumbraCos=Math.cos(w.angle*(1-w.penumbra));F.decay=w.decay;if(F.shadow=w.castShadow)I=w.shadow,F.shadowBias=I.bias,F.shadowRadius=I.radius,F.shadowMapSize=I.mapSize;b.spotShadowMap[l]=ta;b.spotShadowMatrix[l]=w.shadow.matrix;b.spot[l]=F;l++}else" if(w.isrectarealight)f="a.get(w),F.color.copy(I).multiplyScalar(y),F.position.setFromMatrixPosition(w.matrixWorld),F.position.applyMatrix4(h),e.identity(),d.copy(w.matrixWorld)," d.premultiply(h),e.extractrotation(d),f.halfwidth.set(.5*w.width,0,0),f.halfheight.set(0,.5*w.height,0),f.halfwidth.applymatrix4(e),f.halfheight.applymatrix4(e),b.rectarea[r]="F,r++;else" if(w.ispointlight){f="a.get(w);F.position.setFromMatrixPosition(w.matrixWorld);F.position.applyMatrix4(h);F.color.copy(w.color).multiplyScalar(w.intensity);F.distance=w.distance;F.decay=w.decay;if(F.shadow=w.castShadow)I=w.shadow,F.shadowBias=I.bias,F.shadowRadius=I.radius,F.shadowMapSize=I.mapSize,F.shadowCameraNear=" i.camera.near,f.shadowcamerafar="I.camera.far;b.pointShadowMap[t]=ta;b.pointShadowMatrix[t]=w.shadow.matrix;b.point[t]=F;t++}else" w.ishemispherelight&&(f="a.get(w),F.direction.setFromMatrixPosition(w.matrixWorld),F.direction.transformDirection(h),F.direction.normalize(),F.skyColor.copy(w.color).multiplyScalar(y),F.groundColor.copy(w.groundColor).multiplyScalar(y),b.hemi[u]=F,u++)}b.ambient[0]=k;b.ambient[1]=m;b.ambient[2]=q;b.directional.length=p;b.spot.length=l;b.rectArea.length=r;b.point.length=t;" b.hemi.length="u;b.hash.stateID=b.id;b.hash.directionalLength=p;b.hash.pointLength=t;b.hash.spotLength=l;b.hash.rectAreaLength=r;b.hash.hemiLength=u;b.hash.shadowsLength=g.length},state:b}}function" gf(){var="" rg,b="[],c=[];return{init:function(){b.length=0;c.length=0},state:{lightsArray:b,shadowsArray:c,lights:a},setupLights:function(d){a.setup(b,c,d)},pushLight:function(a){b.push(a)},pushShadow:function(a){c.push(a)}}}function" tg(){function="" b[c.id]}="" gf;b[c.id]="{};b[c.id][d.id]=e;c.addEventListener(" void="" gf,b[c.id][d.id]="e):e=b[c.id][d.id];return" e},dispose:function(){b="{}}}}function" fb(a){q.call(this);this.type="MeshDepthMaterial" ;this.depthpacking="3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=" this.fog="!1;this.setValues(a)}function" gb(a){q.call(this);this.type="MeshDistanceMaterial" ;this.referenceposition="new" n;this.neardistance="1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.lights=this.fog=!1;this.setValues(a)}function" hf(a,b,c){function="" d(b,c,d,e,f,g){var="" three.skinnedmesh="" with="" material.skinning="" set="" to="" false:",b),b="b.isSkinnedMesh&&c.skinning,h=0,m&&(h|=1),b&&(h|=2),k=k[h]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(h=k.uuid,m=c.uuid,b=l[h],void" k}function="" e(c,g,h,k){if(!1!="=c.visible){if(c.layers.test(g.layers)&&(c.isMesh||c.isLine||c.isPoints)&&c.castShadow&&(!c.frustumCulled||f.intersectsObject(c))){c.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse," c.matrixworld);var="" r="t[l],u=p[r.materialIndex];u&&u.visible&&(u=d(c,u,k,q,h.near,h.far),a.renderBufferDirect(h,null,m,u,c,r))}else" p.visible&&(u="d(c,p,k,q,h.near,h.far),a.renderBufferDirect(h,null,m,u,c,null))}c=c.children;m=0;for(p=c.length;m<p;m++)e(c[m],g,h,k)}}var" ud,g="new" j,h="new" z,k="new" z(c,c),m="new" n,q="new" n,p="Array(4),t=Array(4),l={},r={0:1,1:0,2:2},u=[new" n(1,0,0),new="" n(-1,0,0),new="" n(0,0,1),="" new="" n(0,0,-1),new="" n(0,1,0),new="" n(0,-1,0)],x="[new" n(0,0,1),new="" n(0,0,-1)],a="[new" v,new="" v];for(c="0;4!==c;++c){var" fb({depthpacking:3201,morphtargets:w,skinning:i});p[c]="y;w=new" gb({morphtargets:w,skinning:i});t[c]="w}var" n="this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(b,c,d){if(!1!==N.enabled&&(!1!==N.autoUpdate||!1!==N.needsUpdate)&&0!==b.length){var" p="a.state;p.setBlending(0);p.buffers.color.setClear(1,1,1,1);p.buffers.depth.setTest(!0);p.setScissorTest(!1);for(var" t,l="0,v=b.length;l<v;l++){var" no="" shadow.");else{var="" da="t.camera;h.copy(t.mapSize);h.min(k);if(n){var" qa(h.x,h.y,{minfilter:1003,="" magfilter:1003,format:1023}),t.map.texture.name="r.name+" .shadowmap",da.updateprojectionmatrix());t.isspotlightshadow&&t.update(r);w="t.map;y=t.matrix;q.setFromMatrixPosition(r.matrixWorld);da.position.copy(q);n?(t=6,y.makeTranslation(-q.x,-q.y,-q.z)):(t=1,m.setFromMatrixPosition(r.target.matrixWorld),da.lookAt(m),da.updateMatrixWorld(),y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(da.projectionMatrix),y.multiply(da.matrixWorldInverse));a.setRenderTarget(w);a.clear();for(r=0;r<t;r++)n&&(m.copy(da.position),"" m.add(u[r]),da.up.copy(x[r]),da.lookat(m),da.updatematrixworld(),p.viewport(a[r])),g.multiplymatrices(da.projectionmatrix,da.matrixworldinverse),f.setfrommatrix(g),e(c,d,da,n)}}n.needsupdate="!1}}}function" ug(a,b,c,d){function="" e(b,c,d){var="" uint8array(4),f="a.createTexture();a.bindTexture(b,f);a.texParameteri(b,10241,9728);a.texParameteri(b,10240,9728);for(b=0;b<d;b++)a.texImage2D(c+b,0,6408,1,1,0,6408,5121,e);return" f}function="" f(c,e){n[c]="1;0===w[c]&&(a.enableVertexAttribArray(c),w[c]=1);I[c]!==" e&&((d.iswebgl2?a:b.get("angle_instanced_arrays"))[d.iswebgl2?"vertexattribdivisor":"vertexattribdivisorangle"](c,e),i[c]="e)}function" g(b){!0!="=y[b]&&(a.enable(b),y[b]=!0)}function" h(b){!1!="=y[b]&&(a.disable(b),y[b]=!1)}function" k(b,d,e,f,k,m,q,p){if(0="==b)F&&(h(3042),F=!1);else" if(f||(g(3042),f="!0),5!==b){if(b!==da||p!==D){if(100!==vd||100!==z)a.blendEquation(32774),z=vd=100;if(p)switch(b){case" 1:a.blendfuncseparate(1,771,1,771);break;case="" 2:a.blendfunc(1,1);break;case="" 3:a.blendfuncseparate(0,0,="" 769,771);break;case="" 4:a.blendfuncseparate(0,768,0,770);break;default:console.error("three.webglstate:="" invalid="" blending:="" ",b)}else="" switch(b){case="" 1:a.blendfuncseparate(770,771,1,771);break;case="" 2:a.blendfunc(770,1);break;case="" 3:a.blendfunc(0,769);break;case="" 4:a.blendfunc(0,768);break;default:console.error("three.webglstate:="" ",b)}c="B=Y=ae=null;da=b;D=p}}else{k=k||d;m=m||e;q=q||f;if(d!==vd||k!==z)a.blendEquationSeparate(c.convert(d),c.convert(k)),vd=d,z=k;if(e!==ae||f!==Y||m!==B||q!==" c)a.blendfuncseparate(c.convert(e),c.convert(f),c.convert(m),c.convert(q)),ae="e,Y=f,B=m,C=q;da=b;D=null}}function" m(b){e!="=b&&(b?a.frontFace(2304):a.frontFace(2305),E=b)}function" q(b){0!="=b?(g(2884),b!==H&&(1===b?a.cullFace(1029):2===b?a.cullFace(1028):a.cullFace(1032))):h(2884);H=b}function" p(b,c,d){if(b){if(g(32823),j!="=c||R!==d)a.polygonOffset(c,d),J=c,R=d}else" h(32823)}function="" t(b){void="" function(){var="" v,d="null,e=new" v(0,="" 0,0,0);return{setmask:function(c){d="==c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(-1,0,0,0)}}},r=new" 0:a.depthfunc(512);break;case="" 1:a.depthfunc(519);="" break;case="" 2:a.depthfunc(513);break;case="" 3:a.depthfunc(515);break;case="" 4:a.depthfunc(514);break;case="" 5:a.depthfunc(518);break;case="" 6:a.depthfunc(516);break;case="" 7:a.depthfunc(517);break;default:a.depthfunc(515)}else="" a.depthfunc(515);d="b}},setLocked:function(a){b=a},setClear:function(b){e!==b&&(a.clearDepth(b),e=b)},reset:function(){b=!1;e=d=c=null}}},u=new" d||b||(a.stencilmask(d),c="d)},setFunc:function(b,c,g){if(d!==b||e!==c||f!==g)a.stencilFunc(b,c,g),d=b,e=c,f=g},setOp:function(b,c,d){if(k!==b||m!==c||q!==d)a.stencilOp(b,c,d),k=b,m=c,q=d},setLocked:function(a){b=a},setClear:function(b){p!==b&&(a.clearStencil(b),p=b)},reset:function(){b=!1;p=q=m=k=f=e=d=c=null}}},x=a.getParameter(34921),n=new" uint8array(x),w="new" uint8array(x),i="new" uint8array(x),y="{},N=null,ta=null,F=null,da=null,vd=null,ae=null,Y=null,z=null,B=null,C=null,D=!1,E=null,H=null,K=null," j="null,R=null,G=a.getParameter(35661),Q=!1;x=0;x=a.getParameter(7938);-1!==x.indexOf(" webgl")?(x="parseFloat(/^WebGL"" ([0-9])="" .exec(x)[1]),q="1<=x):-1!==x.indexOf(" opengl"="" es")&&(x="parseFloat(/^OpenGL" es="" v,m="new" v,t="{};T[3553]=e(3553,3553,1);T[34067]=e(34067,34069,6);l.setClear(0,0,0,1);r.setClear(1);u.setClear(0);g(2929);r.setFunc(3);m(!1);q(1);g(2884);k(0);return{buffers:{color:l,depth:r,stencil:u},initAttributes:function(){for(var" b;a++)n[a]="0},enableAttribute:function(a){f(a,0)},enableAttributeAndDivisor:f,disableUnusedAttributes:function(){for(var" return="" n},useprogram:function(b){return="" ta!="=b?(a.useProgram(b),ta=b,!0):!1},setBlending:k,setMaterial:function(a,b){2===a.side?h(2884):g(2884);var" setcullface:q,setlinewidth:function(b){b!="=K&&(Q&&a.lineWidth(b),K=b)},setPolygonOffset:p,setScissorTest:function(a){a?g(3089):h(3089)},activeTexture:t,bindTexture:function(b,c){null===L&&t();var" 0,texture:void="" 0},o[l]="d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||T[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(ha){console.error(" three.webglstate:",ha)}},teximage2d:function(){try{a.teximage2d.apply(a,"="" arguments)}catch(ha){console.error("three.webglstate:",ha)}},teximage3d:function(){try{a.teximage3d.apply(a,arguments)}catch(ha){console.error("three.webglstate:",ha)}},scissor:function(b){!1="==W.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),W.copy(b))},viewport:function(b){!1===M.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),M.copy(b))},reset:function(){for(var" vg(a,b,="" c,d,e,f,g){function="" h(a,b,c,d){var="">d||a.height>d)e=d/Math.max(a.width,a.height);if(1>e||!0===b){if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof ImageBitmap)return void 0===F&&(F=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),c=c?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):F,b=b?G.floorPowerOfTwo:Math.floor,c.width=b(e*a.width),c.height=b(e*a.height),c.getContext("2d").drawImage(a,0,0,c.width,c.height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+
a.width+"x"+a.height+") to ("+c.width+"x"+c.height+")."),c;"data"in a&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+a.width+"x"+a.height+").")}return a}function k(a){return G.isPowerOfTwo(a.width)&&G.isPowerOfTwo(a.height)}function m(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter}function q(b,c,e,f){a.generateMipmap(b);d.get(c).__maxMipLevel=Math.log(Math.max(e,f))*Math.LOG2E}function p(a,c){if(!e.isWebGL2)return a;var d=a;6403===a&&(5126===c&&(d=
33326),5131===c&&(d=33325),5121===c&&(d=33321));6407===a&&(5126===c&&(d=34837),5131===c&&(d=34843),5121===c&&(d=32849));6408===a&&(5126===c&&(d=34836),5131===c&&(d=34842),5121===c&&(d=32856));33325===d||33326===d||34842===d||34836===d?b.get("EXT_color_buffer_float"):(34843===d||34837===d)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead.");return d}function t(a){return 1003===a||1004===a||1005===a?9728:9729}function l(b){b=b.target;
b.removeEventListener("dispose",l);var c=d.get(b);void 0!==c.__webglInit&&(a.deleteTexture(c.__webglTexture),d.remove(b));b.isVideoTexture&&delete ta[b.id];g.memory.textures--}function r(b){b=b.target;b.removeEventListener("dispose",r);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);
else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d.remove(b.texture);d.remove(b)}g.memory.textures--}function u(a,b){var e=d.get(a);if(a.isVideoTexture){var f=a.id,h=g.render.frame;ta[f]!==h&&(ta[f]=h,a.update())}if(0<a.version&&e.__version!==a.version)if(f=a.image,void 0="==f)console.warn(" three.webglrenderer:"="" texture="" marked="" for="" update="" but="" image="" is="" undefined");else="" if(!1="==f.complete)console.warn(" incomplete");="" else{w(e,a,b);return}c.activetexture(33984+b);c.bindtexture(3553,e.__webgltexture)}function="" x(c,g,h){h?(a.texparameteri(c,10242,f.convert(g.wraps)),a.texparameteri(c,10243,f.convert(g.wrapt)),32879="==c&&a.texParameteri(c,32882,f.convert(g.wrapR)),a.texParameteri(c,10240,f.convert(g.magFilter)),a.texParameteri(c,10241,f.convert(g.minFilter))):(a.texParameteri(c,10242,33071),a.texParameteri(c,10243,33071),32879===c&&a.texParameteri(c,32882,33071),1001===g.wrapS&&1001===g.wrapT||console.warn(" not="" power="" of="" two.="" texture.wraps="" and="" texture.wrapt="" should="" be="" set="" to="" three.clamptoedgewrapping."),="" a.texparameteri(c,10240,t(g.magfilter)),a.texparameteri(c,10241,t(g.minfilter)),1003!="=g.minFilter&&1006!==g.minFilter&&console.warn(" texture.minfilter="" three.nearestfilter="" or="" three.linearfilter."));!(h="b.get(" ext_texture_filter_anisotropic"))||1015="==g.type&&null===b.get("OES_texture_float_linear")||1016===g.type&&null===(e.isWebGL2||b.get("OES_texture_half_float_linear"))||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,"" h.texture_max_anisotropy_ext,math.min(g.anisotropy,e.getmaxanisotropy())),d.get(g).__currentanisotropy="g.anisotropy)}function" n(b,c){void="" w(b,d,g){var="" t="d.isDataTexture3D?32879:3553;n(b,d);c.activeTexture(33984+g);c.bindTexture(t,b.__webglTexture);a.pixelStorei(37440,d.flipY);a.pixelStorei(37441,d.premultiplyAlpha);a.pixelStorei(3317,d.unpackAlignment);g=e.isWebGL2?" !1:1001!="=d.wrapS||1001!==d.wrapT||1003!==d.minFilter&&1006!==d.minFilter;g=g&&!1===k(d.image);g=h(d.image,g,!1,e.maxTextureSize);var" l="k(g)||e.isWebGL2,r=f.convert(d.format),v=f.convert(d.type),u=p(r,v);x(t,d,l);var" w="d.mipmaps;if(d.isDepthTexture){u=6402;if(1015===d.type){if(!e.isWebGL2)throw" error("float="" depth="" only="" supported="" in="" webgl2.0");u="36012}else" e.iswebgl2&&(u="33189);1026===d.format&&6402===u&&1012!==d.type&&1014!==d.type&&(console.warn(" use="" unsignedshorttype="" unsignedinttype="" depthformat="" depthtexture."),="" d.type="1012,v=f.convert(d.type));1027===d.format&&(u=34041,1020!==d.type&&(console.warn(" unsignedint248type="" depthstencilformat="" depthtexture."),d.type="1020,v=f.convert(d.type)));c.texImage2D(3553,0,u,g.width,g.height,0,r,v,null)}else" if(d.isdatatexture)if(0<w.length&&l){for(var="" y="0,da=w.length;y<da;y++)t=w[y],c.texImage2D(3553,y,u,t.width,t.height,0,r,v,t.data);d.generateMipmaps=!1;b.__maxMipLevel=w.length-1}else" c.teximage2d(3553,0,u,g.width,g.height,0,r,v,g.data),b.__maxmiplevel="0;else" if(d.iscompressedtexture){y="0;for(da=w.length;y<da;y++)t=w[y],1023!==d.format&&1022!==d.format?-1<c.getCompressedTextureFormats().indexOf(r)?c.compressedTexImage2D(3553,y,u,t.width,t.height,0,t.data):console.warn(" attempt="" load="" unsupported="" compressed="" format="" .uploadtexture()"):c.teximage2d(3553,y,u,t.width,t.height,0,r,v,t.data);b.__maxmiplevel="w.length-1}else" if(d.isdatatexture3d)c.teximage3d(32879,0,u,g.width,g.height,g.depth,0,r,v,g.data),b.__maxmiplevel="0;else" if(0<w.length&&l){y="0;for(da=w.length;y<da;y++)t=w[y],c.texImage2D(3553,y,u,r,v,t);d.generateMipmaps=!1;b.__maxMipLevel=w.length-1}else" c.teximage2d(3553,0,u,r,v,g),b.__maxmiplevel="0;m(d,l)&&q(3553,d,g.width,g.height);b.__version=d.version;if(d.onUpdate)d.onUpdate(d)}function" i(b,e,g,h){var="" k="f.convert(e.texture.format),m=f.convert(e.texture.type),q=p(k,m);c.texImage2D(h,0,q,e.width,e.height,0,k,m,null);a.bindFramebuffer(36160,b);a.framebufferTexture2D(36160,g,h,d.get(e.texture).__webglTexture," 0);a.bindframebuffer(36160,null)}function="" y(b,c,d){a.bindrenderbuffer(36161,b);if(c.depthbuffer&&!c.stencilbuffer)d?(d="N(c),a.renderbufferStorageMultisample(36161,d,33189,c.width,c.height)):a.renderbufferStorage(36161,33189,c.width,c.height),a.framebufferRenderbuffer(36160,36096,36161,b);else" if(c.depthbuffer&&c.stencilbuffer)d?(d="N(c),a.renderbufferStorageMultisample(36161,d,34041,c.width,c.height)):a.renderbufferStorage(36161,34041,c.width,c.height),a.framebufferRenderbuffer(36160,33306,36161,b);" else{b="f.convert(c.texture.format);var" e="f.convert(c.texture.type);b=p(b,e);d?(d=N(c),a.renderbufferStorageMultisample(36161,d,b,c.width,c.height)):a.renderbufferStorage(36161,b,c.width,c.height)}a.bindRenderbuffer(36161,null)}function" n(a){return="" e.iswebgl2&&a.iswebglmultisamplerendertarget?math.min(e.maxsamples,a.samples):0}var="" ta="{},F;this.setTexture2D=u;this.setTexture3D=function(a,b){var" this.settexturecube="function(b,g){var">v;v++)r[v]=g||l?l?b.image[v].image:b.image[v]:h(b.image[v],!1,!0,e.maxCubemapSize);var u=r[0],w=k(u)||e.isWebGL2,y=f.convert(b.format),I=f.convert(b.type),A=p(y,I);x(34067,b,w);for(v=0;6>v;v++)if(g)for(var F,
ta=r[v].mipmaps,da=0,N=ta.length;da<n;da++)f=ta[da],1023!==b.format&&1022!==b.format?-1<c.getcompressedtextureformats().indexof(y)?c.compressedteximage2d(34069+v,da,a,f.width,f.height,0,f.data):console.warn("three.webglrenderer: attempt="" to="" load="" unsupported="" compressed="" texture="" format="" in="" .settexturecube()"):c.teximage2d(34069+v,da,a,f.width,f.height,0,y,i,f.data);else="" l?c.teximage2d(34069+v,0,a,r[v].width,r[v].height,0,y,i,r[v].data):c.teximage2d(34069+v,0,a,y,i,r[v]);t.__maxmiplevel="g?ta.length-1:0;" m(b,w)&&q(34067,b,u.width,u.height);t.__version="b.version;if(b.onUpdate)b.onUpdate(b)}else" c.activetexture(33984+g),c.bindtexture(34067,t.__webgltexture)};this.settexturecubedynamic="function(a,b){c.activeTexture(33984+b);c.bindTexture(34067,d.get(a).__webglTexture)};this.setupRenderTarget=function(b){var" h="d.get(b),t=d.get(b.texture);b.addEventListener(" dispose",r);t.__webgltexture="a.createTexture();g.memory.textures++;var"" l="!0===b.isWebGLRenderTargetCube,v=!0===b.isWebGLMultisampleRenderTarget,n=" k(b)||e.iswebgl2;if(l)for(h.__webglframebuffer="[],v=0;6">v;v++)h.__webglFramebuffer[v]=a.createFramebuffer();else if(h.__webglFramebuffer=a.createFramebuffer(),v)if(e.isWebGL2){h.__webglMultisampledFramebuffer=a.createFramebuffer();h.__webglColorRenderbuffer=a.createRenderbuffer();a.bindRenderbuffer(36161,h.__webglColorRenderbuffer);v=f.convert(b.texture.format);var w=f.convert(b.texture.type);v=p(v,w);w=N(b);a.renderbufferStorageMultisample(36161,w,v,b.width,b.height);a.bindFramebuffer(36160,h.__webglMultisampledFramebuffer);
a.framebufferRenderbuffer(36160,36064,36161,h.__webglColorRenderbuffer);a.bindRenderbuffer(36161,null);b.depthBuffer&&(h.__webglDepthRenderbuffer=a.createRenderbuffer(),y(h.__webglDepthRenderbuffer,b,!0));a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){c.bindTexture(34067,t.__webglTexture);x(34067,b.texture,n);for(v=0;6>v;v++)I(h.__webglFramebuffer[v],b,36064,34069+v);m(b.texture,n)&&q(34067,b.texture,b.width,
b.height);c.bindTexture(34067,null)}else c.bindTexture(3553,t.__webglTexture),x(3553,b.texture,n),I(h.__webglFramebuffer,b,36064,3553),m(b.texture,n)&&q(3553,b.texture,b.width,b.height),c.bindTexture(3553,null);if(b.depthBuffer){h=d.get(b);t=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(t)throw Error("target.depthTexture not supported in Cube render targets");if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");a.bindFramebuffer(36160,h.__webglFramebuffer);
if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);u(b.depthTexture,0);h=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(36160,36096,3553,h,0);else if(1027===
b.depthTexture.format)a.framebufferTexture2D(36160,33306,3553,h,0);else throw Error("Unknown depthTexture format");}else if(t)for(h.__webglDepthbuffer=[],t=0;6>t;t++)a.bindFramebuffer(36160,h.__webglFramebuffer[t]),h.__webglDepthbuffer[t]=a.createRenderbuffer(),y(h.__webglDepthbuffer[t],b);else a.bindFramebuffer(36160,h.__webglFramebuffer),h.__webglDepthbuffer=a.createRenderbuffer(),y(h.__webglDepthbuffer,b);a.bindFramebuffer(36160,null)}};this.updateRenderTargetMipmap=function(a){var b=a.texture,
f=k(a)||e.isWebGL2;if(m(b,f)){f=a.isWebGLRenderTargetCube?34067:3553;var g=d.get(b).__webglTexture;c.bindTexture(f,g);q(f,b,a.width,a.height);c.bindTexture(f,null)}};this.updateMultisampleRenderTarget=function(b){if(b.isWebGLMultisampleRenderTarget)if(e.isWebGL2){var c=d.get(b);a.bindFramebuffer(36008,c.__webglMultisampledFramebuffer);a.bindFramebuffer(36009,c.__webglFramebuffer);c=b.width;var f=b.height,g=16384;b.depthBuffer&&(g|=256);b.stencilBuffer&&(g|=1024);a.blitFramebuffer(0,0,c,f,0,0,c,f,
g,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}function jf(a,b,c){return{convert:function(a){if(1E3===a)return 10497;if(1001===a)return 33071;if(1002===a)return 33648;if(1003===a)return 9728;if(1004===a)return 9984;if(1005===a)return 9986;if(1006===a)return 9729;if(1007===a)return 9985;if(1008===a)return 9987;if(1009===a)return 5121;if(1017===a)return 32819;if(1018===a)return 32820;if(1019===a)return 33635;if(1010===a)return 5120;if(1011===
a)return 5122;if(1012===a)return 5123;if(1013===a)return 5124;if(1014===a)return 5125;if(1015===a)return 5126;if(1016===a){if(c.isWebGL2)return 5131;var d=b.get("OES_texture_half_float");if(null!==d)return d.HALF_FLOAT_OES}if(1021===a)return 6406;if(1022===a)return 6407;if(1023===a)return 6408;if(1024===a)return 6409;if(1025===a)return 6410;if(1026===a)return 6402;if(1027===a)return 34041;if(1028===a)return 6403;if(100===a)return 32774;if(101===a)return 32778;if(102===a)return 32779;if(200===a)return 0;
if(201===a)return 1;if(202===a)return 768;if(203===a)return 769;if(204===a)return 770;if(205===a)return 771;if(206===a)return 772;if(207===a)return 773;if(208===a)return 774;if(209===a)return 775;if(210===a)return 776;if(33776===a||33777===a||33778===a||33779===a)if(d=b.get("WEBGL_compressed_texture_s3tc"),null!==d){if(33776===a)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===a)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===a)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===a)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===
a||35841===a||35842===a||35843===a)if(d=b.get("WEBGL_compressed_texture_pvrtc"),null!==d){if(35840===a)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===a)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===a)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===a)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===a&&(d=b.get("WEBGL_compressed_texture_etc1"),null!==d))return d.COMPRESSED_RGB_ETC1_WEBGL;if(37808===a||37809===a||37810===a||37811===a||37812===a||37813===a||37814===a||37815===a||37816===
a||37817===a||37818===a||37819===a||37820===a||37821===a)if(d=b.get("WEBGL_compressed_texture_astc"),null!==d)return a;if(103===a||104===a){if(c.isWebGL2){if(103===a)return 32775;if(104===a)return 32776}d=b.get("EXT_blend_minmax");if(null!==d){if(103===a)return d.MIN_EXT;if(104===a)return d.MAX_EXT}}if(1020===a){if(c.isWebGL2)return 34042;d=b.get("WEBGL_depth_texture");if(null!==d)return d.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Pb(){C.call(this);this.type="Group"}function Ta(){C.call(this);this.type=
"Camera";this.matrixWorldInverse=new J;this.projectionMatrix=new J;this.projectionMatrixInverse=new J}function X(a,b,c,d){Ta.call(this);this.type="PerspectiveCamera";this.fov=void 0!==a?a:50;this.zoom=1;this.near=void 0!==c?c:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==b?b:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Ec(a){X.call(this);this.cameras=a||[]}function kf(a,b,c){lf.setFromMatrixPosition(b.matrixWorld);mf.setFromMatrixPosition(c.matrixWorld);
var d=lf.distanceTo(mf),e=b.projectionMatrix.elements,f=c.projectionMatrix.elements,g=e[14]/(e[10]-1);c=e[14]/(e[10]+1);var h=(e[9]+1)/e[5],k=(e[9]-1)/e[5],m=(e[8]-1)/e[0],q=(f[8]+1)/f[0];e=g*m;f=g*q;q=d/(-m+q);m=q*-m;b.matrixWorld.decompose(a.position,a.quaternion,a.scale);a.translateX(m);a.translateZ(q);a.matrixWorld.compose(a.position,a.quaternion,a.scale);a.matrixWorldInverse.getInverse(a.matrixWorld);b=g+q;g=c+q;a.projectionMatrix.makePerspective(e-m,f+(d-m),h*c/g*b,k*c/g*b,b,g)}function nf(a){function b(){return null!==
e&&!0===e.isPresenting}function c(){if(b()){var c=e.getEyeParameters("left"),f=c.renderWidth*q;c=c.renderHeight*q;I=a.getPixelRatio();w=a.getSize();a.setDrawingBufferSize(2*f,c,1);N.start()}else d.enabled&&a.setDrawingBufferSize(w.width,w.height,I),N.stop()}var d=this,e=null,f=null,g=null,h=[],k=new J,m=new J,q=1,p="stage";"undefined"!==typeof window&&"VRFrameData"in window&&(f=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",c,!1));var t=new J,l=new ka,r=new n,u=new X;u.bounds=
new V(0,0,.5,1);u.layers.enable(1);var x=new X;x.bounds=new V(.5,0,.5,1);x.layers.enable(2);var A=new Ec([u,x]);A.layers.enable(1);A.layers.enable(2);var w,I,y=[];this.enabled=!1;this.getController=function(a){var b=h[a];void 0===b&&(b=new Pb,b.matrixAutoUpdate=!1,b.visible=!1,h[a]=b);return b};this.getDevice=function(){return e};this.setDevice=function(a){void 0!==a&&(e=a);N.setContext(a)};this.setFramebufferScaleFactor=function(a){q=a};this.setFrameOfReferenceType=function(a){p=a};this.setPoseTarget=
function(a){void 0!==a&&(g=a)};this.getCamera=function(a){var b="stage"===p?1.6:0;if(null===e)return a.position.set(0,b,0),a;e.depthNear=a.near;e.depthFar=a.far;e.getFrameData(f);if("stage"===p){var c=e.stageParameters;c?k.fromArray(c.sittingToStandingTransform):k.makeTranslation(0,b,0)}b=f.pose;c=null!==g?g:a;c.matrix.copy(k);c.matrix.decompose(c.position,c.quaternion,c.scale);null!==b.orientation&&(l.fromArray(b.orientation),c.quaternion.multiply(l));null!==b.position&&(l.setFromRotationMatrix(k),
r.fromArray(b.position),r.applyQuaternion(l),c.position.add(r));c.updateMatrixWorld();if(!1===e.isPresenting)return a;u.near=a.near;x.near=a.near;u.far=a.far;x.far=a.far;u.matrixWorldInverse.fromArray(f.leftViewMatrix);x.matrixWorldInverse.fromArray(f.rightViewMatrix);m.getInverse(k);"stage"===p&&(u.matrixWorldInverse.multiply(m),x.matrixWorldInverse.multiply(m));a=c.parent;null!==a&&(t.getInverse(a.matrixWorld),u.matrixWorldInverse.multiply(t),x.matrixWorldInverse.multiply(t));u.matrixWorld.getInverse(u.matrixWorldInverse);
x.matrixWorld.getInverse(x.matrixWorldInverse);u.projectionMatrix.fromArray(f.leftProjectionMatrix);x.projectionMatrix.fromArray(f.rightProjectionMatrix);kf(A,u,x);a=e.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&u.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&x.bounds.fromArray(a.rightBounds));a:for(a=0;a<h.length;a++){b=h[a];b:{c=a;for(var 0="==b&&(b=new" d="navigator.getGamepads&&navigator.getGamepads(),q=0,v=0,n=d.length;q<n;q++){var" w="d[q];if(w&&" ("daydream="" controller"="==w.id||" gear"="" vr="" go="" gamepad"="==w.id||w.id.startsWith(" oculus"="" touch")||w.id.startswith("spatial="" controller"))){if(v="==c){c=w;break" b}v++}}c="void" 0}if(void="" 0!="=c&&void" a;d="c.pose;!1===d.hasPosition&&b.position.set(.2,-.6,-.05);null!==d.position&&b.position.fromArray(d.position);null!==d.orientation&&b.quaternion.fromArray(d.orientation);b.matrix.compose(b.position,b.quaternion,b.scale);" b.matrix.premultiply(k);b.matrix.decompose(b.position,b.quaternion,b.scale);b.matrixworldneedsupdate="!0;b.visible=!0;d=" daydream"="" b.visible="!1}return" a};this.getstandingmatrix="function(){return" k};this.ispresenting="b;var" n="new" zd;this.setanimationloop="function(a){N.setAnimationLoop(a)};this.submitFrame=" function(){b()&&e.submitframe()};this.dispose="function(){" undefined"!="=typeof"" window&&window.removeeventlistener("vrdisplaypresentchange",c)}}function="" wg(a){function="" b(){return="" null!="=h&&null!==m}function" c(a){var="" b="t[l.indexOf(a.inputSource)];b&&b.dispatchEvent({type:a.type})}function" d(){a.setframebuffer(null);w.stop()}function="" e(a,b){null="==b?a.matrixWorld.copy(a.matrix):a.matrixWorld.multiplyMatrices(b.matrixWorld,a.matrix);a.matrixWorldInverse.getInverse(a.matrixWorld)}var" f="a.context,g=null," h="null,k=1,m=null,q=" stage",p="null,t=[],l=[],r=new"" x;r.layers.enable(1);r.viewport="new" v;var="" u="new" x;u.layers.enable(2);u.viewport="new" ec([r,u]);n.layers.enable(1);n.layers.enable(2);this.enabled="!1;this.getController=function(a){var" pb,b.matrixautoupdate="!1,b.visible=!1,t[a]=b);return" b};this.getdevice="function(){return" g};this.setdevice="function(a){void" instanceof="" xrdevice&&f.setcompatiblexrdevice(a)};this.setframebufferscalefactor="function(a){k=" a};this.setframeofreferencetype="function(a){q=a};this.setSession=function(b){h=b;null!==h&&(h.addEventListener(" select",c),h.addeventlistener("selectstart",c),h.addeventlistener("selectend",c),h.addeventlistener("end",d),h.baselayer="new"" xrwebgllayer(h,f,{framebufferscalefactor:k}),h.requestframeofreference(q).then(function(b){m="b;a.setFramebuffer(h.baseLayer.framebuffer);w.setContext(h);w.start()}),l=h.getInputSources(),h.addEventListener(" inputsourceschange",function(){l="h.getInputSources();console.log(l);"" for(var="" a="0;a<t.length;a++)t[a].userData.inputSource=l[a]}))};this.getCamera=function(a){if(b()){var" c="a.parent,d=n.cameras;e(n,c);for(var" n}return="" a};this.ispresenting="b;var" zd;w.setanimationloop(function(a,b){p="b.getDevicePose(m);if(null!==p)for(var" q="n.cameras[e];q.matrix.fromArray(k).getInverse(q.matrix);q.projectionMatrix.fromArray(f.projectionMatrix);q.viewport.set(g.x,g.y,g.width,g.height);0===e&&n.matrix.copy(q.matrix)}for(e=0;e<t.length;e++){c=t[e];if(d=l[e])if(d=b.getInputPose(d,m),null!==d){" targetray"in"="" d?c.matrix.elements="d.targetRay.transformMatrix:" pointermatrix"in"="" d&&(c.matrix.elements="d.pointerMatrix);c.matrix.decompose(c.position,c.rotation,c.scale);c.visible=!0;continue}c.visible=!1}A&&A(a)});this.setAnimationLoop=function(a){A=" a};this.dispose="function(){};this.getStandingMatrix=function(){console.warn(" three.webxrmanager:"="" getstandingmatrix()="" is="" no="" longer="" needed.");return="" new="" three.matrix4};this.submitframe="function(){}}function" ee(a){var="" b;function="" c(){la="new" zf(p);ya="new" xf(p,la,a);ya.iswebgl2||(la.get("webgl_depth_texture"),la.get("oes_texture_float"),la.get("oes_texture_half_float"),la.get("oes_texture_half_float_linear"),la.get("oes_standard_derivatives"),la.get("oes_element_index_uint"),la.get("angle_instanced_arrays"));="" la.get("oes_texture_float_linear");ia="new" jf(p,la,ya);aa="new" ug(p,la,ia,ya);aa.scissor(dc.copy(ka).multiplyscalar(t));aa.viewport(u.copy(ha).multiplyscalar(t));ba="new" bg(p);da="new" mg;ea="new" vg(p,la,aa,da,ya,ia,ba);qa="new" qf(p);ua="new" $f(p,qa,ba);oa="new" eg(ua,ba);za="new" dg(p);ma="new" lg(y,la,ya);va="new" pg;pa="new" tg;na="new" vf(y,aa,oa,z);aa="new" wf(p,la,ba,ya);ba="new" ag(p,la,ba,ya);ba.programs="ma.programs;Y.context=P;Y.capabilities=ya;Y.extensions=la;Y.properties=Da;Y.renderLists=va;Y.state=aa;Y.info=" ba}function="" d(a){a.preventdefault();console.log("three.webglrenderer:="" context="" lost.");h="!0}function" e(){console.log("three.webglrenderer:="" restored.");h="!1;c()}function" f(a){a="a.target;a.removeEventListener(" dispose",f);g(a);da.remove(a)}function"="" g(a){var="" 0;void="" h(a,b){a.render(function(a){y.renderbufferimmediate(a,b)})}function="" k(a,b,c,d){if(!1!="=a.visible){if(a.layers.test(b.layers))if(a.isGroup)c=a.renderOrder;else" if(a.islight)d.pushlight(a),="" a.castshadow&&d.pushshadow(a);else="" if(a.issprite){if(!a.frustumculled||ra.intersectssprite(a)){d&&hb.setfrommatrixposition(a.matrixworld).applymatrix4(cc);var="" e="oa.update(a),f=a.material;C.push(a,e,f,c,hb.z,null)}}else" if(a.isimmediaterenderobject)d&&hb.setfrommatrixposition(a.matrixworld).applymatrix4(cc),c.push(a,null,a.material,c,hb.z,null);else="" if(a.ismesh||a.isline||a.ispoints)if(a.isskinnedmesh&&a.skeleton.update(),!a.frustumculled||ra.intersectsobject(a))if(d&&hb.setfrommatrixposition(a.matrixworld).applymatrix4(cc),="" g="e.groups,h=0,m=g.length;h<m;h++){var" f.visible&&c.push(a,e,f,c,hb.z,null);a="a.children;h=0;for(m=a.length;h<m;h++)k(a[h],b,c,d)}}function" m(a,b,c,d){for(var="" p="c.cameras,t=0,l=p.length;t<l;t++){var" r="p[t];if(h.layers.test(r.layers)){if(" viewport"in"="" r)aa.viewport(u.copy(r.viewport));="" else{var="" v="r.bounds;aa.viewport(U.set(v.x*X,v.y*M,v.z*X,v.w*M).multiplyScalar(T))}D.setupLights(r);q(h,b,r,k,m,g)}}}else" s="null,q(h,b,c,k,m,g)}}function" q(a,c,d,e,f,g){a.onbeforerender(y,c,d,e,f,g);d="pa.get(c,S||d);a.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){aa.setMaterial(f);var" k="t(d,c.fog,f,a);O=b=null;wd=!1;h(a,k)}else" y.renderbufferdirect(d,c.fog,e,f,a,g);a.onafterrender(y,c,d,e,f,g);d="pa.get(c,S||d)}function" p(a,b,c){var="" m="ma.getProgramCode(a,c),q=d.program,p=!0;if(void" if(q.code!="=m)g(a);else{if(h.stateID!==k.stateID||h.directionalLength!==k.directionalLength||h.pointLength!==k.pointLength||h.spotLength!==k.spotLength||h.rectAreaLength!==k.rectAreaLength||h.hemiLength!==k.hemiLength||h.shadowsLength!==" k.shadowslength)h.stateid="k.stateID,h.directionalLength=k.directionalLength,h.pointLength=k.pointLength,h.spotLength=k.spotLength,h.rectAreaLength=k.rectAreaLength,h.hemiLength=k.hemiLength,h.shadowsLength=k.shadowsLength;else" if(void="" a.onbeforecompile(d.shader,y),m="ma.getProgramCode(a,c),q=ma.acquireProgram(a,d.shader,c,m),d.program=q,a.program=q);c=q.getAttributes();if(a.morphTargets)for(m=a.numSupportedMorphTargets=0;m<Y.maxMorphTargets;m++)0<=c[" morphtarget"+m]&&a.numsupportedmorphtargets++;if(a.morphnormals)for(m="a.numSupportedMorphNormals=0;m<Y.maxMorphNormals;m++)0<=c["morphNormal"+m]&&a.numSupportedMorphNormals++;c=d.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)d.numClippingPlanes=Z.numPlanes,"" d.numintersection="Z.numIntersection,c.clippingPlanes=Z.uniform;d.fog=b;void" c.hemispherelights.value="e.state.hemi,c.directionalShadowMap.value=e.state.directionalShadowMap,c.directionalShadowMatrix.value=e.state.directionalShadowMatrix,c.spotShadowMap.value=e.state.spotShadowMap,c.spotShadowMatrix.value=e.state.spotShadowMatrix,c.pointShadowMap.value=e.state.pointShadowMap,c.pointShadowMatrix.value=e.state.pointShadowMatrix);a=d.program.getUniforms();a=eb.seqWithValue(a.seq,c);d.uniformsList=a}function" t(a,b,c,d){ca="0;var" yd&&(de||a!="=W)&&Z.setState(c.clippingPlanes,c.clipIntersection,c.clipShadows,a,e,a===W&&c.id===L);!1===c.needsUpdate&&(void" z.numintersection||(c.needsupdate="!0):c.needsUpdate=!0);c.needsUpdate&&(p(c,b,d),c.needsUpdate=!1);var" void="" t="new" float32array(h*h*4);="" t.set(a.bonematrices);var="" lb(t,h,h,1023,1015);v.needsupdate="!0;a.boneMatrices=t;a.boneTexture=v;a.boneTextureSize=h}g.setValue(P," bonetexture",a.bonetexture);g.setvalue(p,"bonetexturesize",a.bonetexturesize)}else"="" g.setoptional(p,a,"bonematrices");k&&(g.setvalue(p,"tonemappingexposure",y.tonemappingexposure),g.setvalue(p,"tonemappingwhitepoint",y.tonemappingwhitepoint),c.lights&&(k="m,q.ambientLightColor.needsUpdate=k,q.directionalLights.needsUpdate=k,q.pointLights.needsUpdate=k,q.spotLights.needsUpdate=" k,q.rectarealights.needsupdate="k,q.hemisphereLights.needsUpdate=k),b&&c.fog&&(q.fogColor.value=b.color,b.isFog?(q.fogNear.value=b.near,q.fogFar.value=b.far):b.isFogExp2&&(q.fogDensity.value=b.density)),c.isMeshBasicMaterial?l(q,c):c.isMeshLambertMaterial?(l(q,c),c.emissiveMap&&(q.emissiveMap.value=c.emissiveMap)):c.isMeshPhongMaterial?(l(q,c),c.isMeshToonMaterial?(r(q,c),c.gradientMap&&(q.gradientMap.value=c.gradientMap)):r(q,c)):c.isMeshStandardMaterial?(l(q,c),c.isMeshPhysicalMaterial?(u(q,c),q.reflectivity.value=" c.reflectivity,q.clearcoat.value="c.clearCoat,q.clearCoatRoughness.value=c.clearCoatRoughness):u(q,c)):c.isMeshMatcapMaterial?(l(q,c),c.matcap&&(q.matcap.value=c.matcap),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale,1===c.side&&(q.bumpScale.value*=-1)),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale),1===c.side&&q.normalScale.value.negate()),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale," q.displacementbias.value="c.displacementBias)):c.isMeshDepthMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isMeshDistanceMaterial?(l(q,c),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias),q.referencePosition.value.copy(c.referencePosition),q.nearDistance.value=c.nearDistance," q.fardistance.value="c.farDistance):c.isMeshNormalMaterial?(l(q,c),c.bumpMap&&(q.bumpMap.value=c.bumpMap,q.bumpScale.value=c.bumpScale,1===c.side&&(q.bumpScale.value*=-1)),c.normalMap&&(q.normalMap.value=c.normalMap,q.normalScale.value.copy(c.normalScale),1===c.side&&q.normalScale.value.negate()),c.displacementMap&&(q.displacementMap.value=c.displacementMap,q.displacementScale.value=c.displacementScale,q.displacementBias.value=c.displacementBias)):c.isLineBasicMaterial?(q.diffuse.value=c.color,q.opacity.value=" c.opacity,c.islinedashedmaterial&&(q.dashsize.value="c.dashSize,q.totalSize.value=c.dashSize+c.gapSize,q.scale.value=c.scale)):c.isPointsMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.size.value=c.size*T,q.scale.value=.5*M,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&c.map.updateMatrix(),q.uvTransform.value.copy(c.map.matrix))):c.isSpriteMaterial?(q.diffuse.value=c.color,q.opacity.value=c.opacity,q.rotation.value=c.rotation,q.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&" c.map.updatematrix(),q.uvtransform.value.copy(c.map.matrix))):c.isshadowmaterial&&(q.color.value="c.color,q.opacity.value=c.opacity),void" "modelmatrix",d.matrixworld);return="" f}function="" l(a,b){a.opacity.value="b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio,a.maxMipLevel.value=Da.get(b.envMap).__maxMipLevel);" b.lightmap&&(a.lightmap.value="b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var" b.specularmap?c="b.specularMap:b.displacementMap?c=b.displacementMap:b.normalMap?c=b.normalMap:b.bumpMap?c=b.bumpMap:b.roughnessMap?c=b.roughnessMap:b.metalnessMap?c=b.metalnessMap:b.alphaMap?c=b.alphaMap:b.emissiveMap&&(c=b.emissiveMap);void" a.uvtransform.value.copy(c.matrix))}function="" r(a,b){a.specular.value="b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,1===b.side&&(a.bumpScale.value*=-1));b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),1===b.side&&a.normalScale.value.negate());b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale," a.displacementbias.value="b.displacementBias)}function" u(a,b){a.roughness.value="b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale,1===b.side&&(a.bumpScale.value*=-1));b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale),1===b.side&&a.normalScale.value.negate());" b.displacementmap&&(a.displacementmap.value="b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}console.log(" three.webglrenderer","102dev");a="a||{};var"" x="void" a.antialias:!1,z="void" this.tonemapping="1;this.maxMorphTargets=8;this.maxMorphNormals=4;var" y="this,H=!1,K=null,R=null,Q=null,L=-1;var" o="b=null;var" wd="!1;var" v,dc="new" v,fa="null,ca=0,X=x.width,M=x.height,T=1,ha=new" v(0,0,x,m),ka="new" v(0,0,x,m),sa="!1,ra=new" ud,z="new" yf,yd="!1,de=!1,Cc=new" j,hb="new" n;try{w="{alpha:w,depth:I,stencil:y,antialias:N,premultipliedAlpha:z,preserveDrawingBuffer:F,powerPreference:B};x.addEventListener(" webglcontextlost",d,!1);x.addeventlistener("webglcontextrestored",e,!1);var"="" error("error="" creating="" webgl="" with="" your="" selected attributes.");throw="" context.");}void="" "+xg.message)}var="" la,ya,aa,ba,da,ea,qa,ua,oa,ma,va,pa,na,za,aa,ba,ia;c();var="" ja="null;" navigator&&="" (ja="xr" in="" navigator?new="" wg(y):new="" nf(y));this.vr="ja;var" ca="new" hf(y,oa,ya.maxtexturesize);this.shadowmap="Ca;this.getContext=function(){return" p};this.getcontextattributes="function(){return" p.getcontextattributes()};this.forcecontextloss="function(){var" t};this.setpixelratio="function(a){void" m,!1))};this.getsize="function(){return{width:X,height:M}};this.setSize=function(a,b,c){ja.isPresenting()?console.warn(" three.webglrenderer:"="" can't="" change="" size="" while="" device="" presenting."):(x="a,M=b,x.width=a*T,x.height=b*T,!1!==c&&(x.style.width=a+" px",x.style.height="b+"px"),this.setViewport(0,0,a,b))};this.getDrawingBufferSize=function(){return{width:X*T,height:M*T}};this.setDrawingBufferSize=function(a,b,c){X=a;M=b;T=c;x.width=a*c;x.height=b*c;this.setViewport(0,0,a,b)};this.getCurrentViewport="" function(){return="" u};this.setviewport="function(a,b,c,d){ha.set(a,M-b-d,c,d);aa.viewport(U.copy(ha).multiplyScalar(T))};this.setScissor=function(a,b,c,d){ka.set(a,M-b-d,c,d);aa.scissor(Dc.copy(ka).multiplyScalar(T))};this.setScissorTest=function(a){aa.setScissorTest(sa=a)};this.getClearColor=function(){return" na.getclearcolor()};this.setclearcolor="function(){na.setClearColor.apply(na,arguments)};this.getClearAlpha=function(){return" na.getclearalpha()};this.setclearalpha="function(){na.setClearAlpha.apply(na," arguments)};this.clear="function(a,b,c){var" function(a,b){aa.initattributes();var="" a.normalarray,35048),aa.enableattribute(b.normal),p.vertexattribpointer(b.normal,3,5126,!1,0,0));a.hasuvs&&(p.bindbuffer(34962,c.uv),p.bufferdata(34962,a.uvarray,35048),aa.enableattribute(b.uv),p.vertexattribpointer(b.uv,2,5126,!1,0,0));a.hascolors&&(p.bindbuffer(34962,c.color),p.bufferdata(34962,a.colorarray,35048),aa.enableattribute(b.color),p.vertexattribpointer(b.color,3,5126,!1,0,0));aa.disableunusedattributes();p.drawarrays(4,0,a.count);a.count="0};this.renderBufferDirect=function(a,c,d,e,f," g){var="">f.normalMatrix.determinant();aa.setMaterial(e,h);var k=t(a,c,e,f),m=!1;if(b!==d.id||O!==k.id||wd!==(!0===e.wireframe))b=d.id,O=k.id,wd=!0===e.wireframe,m=!0;f.morphTargetInfluences&&(za.update(f,d,e,k),m=!0);h=d.index;var q=d.attributes.position;c=1;!0===e.wireframe&&(h=ua.getWireframeAttribute(d),c=2);a=Aa;if(null!==h){var p=qa.get(h);a=Ba;a.setIndex(p)}if(m){if(d&&d.isInstancedBufferGeometry&&!ya.isWebGL2&&null===la.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
else{aa.initAttributes();m=d.attributes;k=k.getAttributes();var l=e.defaultAttributeValues;for(N in k){var v=k[N];if(0<=v){var 0="==d.maxInstancedCount&&(d.maxInstancedCount=A.meshPerAttribute*A.count)):aa.enableAttribute(v);" r="m[N];if(void" 0!="=r){var" u="r.normalized,n=r.itemSize,w=qa.get(r);if(void" x="w.buffer,y=w.type;w=w.bytesPerElement;if(r.isInterleavedBufferAttribute){var" a="r.data,I=A.stride;r=r.offset;A&&A.isInstancedInterleavedBuffer?(aa.enableAttributeAndDivisor(v,A.meshPerAttribute),void" p.bindbuffer(34962,x);p.vertexattribpointer(v,n,y,u,i*w,r*w)}else="" r.isinstancedbufferattribute?(aa.enableattributeanddivisor(v,r.meshperattribute),void="" if(void="" 2:p.vertexattrib2fv(v,u);break;case="" 3:p.vertexattrib3fv(v,u);break;case="" 4:p.vertexattrib4fv(v,u);break;default:p.vertexattrib1fv(v,u)}}}aa.disableunusedattributes()}null!="=" h&&p.bindbuffer(34963,p.buffer)}p="Infinity;null!==h?p=h.count:void" n="Math.max(h,q);g=Math.max(0,Math.min(p,h+d.drawRange.count*c,q+(null!==g?g.count*c:Infinity))-1-N+1);if(0!==g){if(f.isMesh)if(!0===e.wireframe)aa.setLineWidth(e.wireframeLinewidth*(null===R?T:1)),a.setMode(1);else" switch(f.drawmode){case="" 0:a.setmode(4);break;case="" 1:a.setmode(5);break;case="" 2:a.setmode(6)}else="" f.isline?(e="e.linewidth,void" (null="==R?T:1)),f.isLineSegments?a.setMode(1):f.isLineLoop?a.setMode(2):a.setMode(3)):f.isPoints?a.setMode(0):f.isSprite&&a.setMode(4);d&&d.isInstancedBufferGeometry?0<d.maxInstancedCount&&a.renderInstances(d,N,g):a.render(N,g)}};this.compile=function(a,b){D=pa.get(a,b);D.init();a.traverse(function(a){a.isLight&&(D.pushLight(a),a.castShadow&&D.pushShadow(a))});D.setupLights(b);a.traverse(function(b){if(b.material)if(Array.isArray(b.material))for(var" c="0;c<b.material.length;c++)p(b.material[c],a.fog," b);else="" p(b.material,a.fog,b)})};var="" xa="null,wa=new" zd;wa.setanimationloop(function(a){ja.ispresenting()||xa&&xa(a)});"undefined"!="=typeof" window&&wa.setcontext(window);this.setanimationloop="function(a){xa=a;ja.setAnimationLoop(a);wa.start()};this.render=function(a,c,d,e){if(void" the="" rendertarget="" argument="" has="" been="" removed.="" use="" .setrendertarget()="" instead.");var="" f="d}if(void" forceclear="" .clear()="" instead.");="" var="" g="e}c&&c.isCamera?H||(O=b=null,wd=!1,L=-1,W=null,!0===a.autoUpdate&&a.updateMatrixWorld(),null===c.parent&&c.updateMatrixWorld(),ja.enabled&&(c=ja.getCamera(c)),D=pa.get(a,c),D.init(),a.onBeforeRender(Y,a,c,f),Cc.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),ra.setFromMatrix(Cc),de=this.localClippingEnabled,yd=Z.init(this.clippingPlanes,de,c),C=va.get(a,c),C.init(),k(a,c,0,Y.sortObjects),!0===Y.sortObjects&&C.sort(),yd&&Z.beginShadows(),Ca.render(D.state.shadowsArray,a,c),D.setupLights(c)," yd&&z.endshadows(),this.info.autoreset&&this.info.reset(),void="" camera="" is="" not="" an="" instance="" of="" three.camera.")};this.alloctextureunit="function(){var">=ya.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+a+" texture units while this GPU supports only "+ya.maxTextures);ca+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),
a=!0),b=b.texture);ea.setTexture2D(b,c)}}();this.setTexture3D=function(){return function(a,b){ea.setTexture3D(a,b)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);ea.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),
a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?ea.setTextureCube(b,c):ea.setTextureCubeDynamic(b,c)}}();this.setFramebuffer=function(a){K=a};this.getRenderTarget=function(){return R};this.setRenderTarget=function(a){(R=a)&&void 0===Da.get(a).__webglFramebuffer&&ea.setupRenderTarget(a);var b=K,c=!1;a?(b=Da.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube?(b=b[a.activeCubeFace],c=!0):b=a.isWebGLMultisampleRenderTarget?Da.get(a).__webglMultisampledFramebuffer:b,
U.copy(a.viewport),Dc.copy(a.scissor),fa=a.scissorTest):(U.copy(ha).multiplyScalar(T),Dc.copy(ka).multiplyScalar(T),fa=sa);Q!==b&&(P.bindFramebuffer(36160,b),Q=b);aa.viewport(U);aa.scissor(Dc);aa.setScissorTest(fa);c&&(c=Da.get(a.texture),P.framebufferTexture2D(36160,36064,34069+a.activeCubeFace,c.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=function(a,b,c,d,e,f){if(a&&a.isWebGLRenderTarget){var g=Da.get(a).__webglFramebuffer;if(g){var h=!1;g!==Q&&(P.bindFramebuffer(36160,g),
h=!0);try{var k=a.texture,m=k.format,q=k.type;1023!==m&&ia.convert(m)!==P.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===q||ia.convert(q)===P.getParameter(35738)||1015===q&&(ya.isWebGL2||la.get("OES_texture_float")||la.get("WEBGL_color_buffer_float"))||1016===q&&(ya.isWebGL2?la.get("EXT_color_buffer_float"):la.get("EXT_color_buffer_half_float"))?36053===P.checkFramebufferStatus(36160)?0<=b&&b<=a.width- 0="==Sb){Sb=new" d&&0<="c&&c<=a.height-e&&P.readPixels(b,c,d,e,ia.convert(m),ia.convert(q),f):console.error(" three.webglrenderer.readrendertargetpixels:"="" readpixels="" from="" rendertarget="" failed.="" framebuffer="" not="" complete."):console.error("three.webglrenderer.readrendertargetpixels:="" is="" in="" unsignedbytetype="" or="" implementation="" defined="" type.")}finally{h&&p.bindframebuffer(36160,q)}}}else="" console.error("three.webglrenderer.readrendertargetpixels:="" three.webglrendertarget.")};this.copyframebuffertotexture="function(a,b,c){var" d="b.image.width,e=b.image.height,f=ia.convert(b.format);this.setTexture2D(b,0);P.copyTexImage2D(3553,c||0,f,a.x,a.y,d,e,0)};this.copyTextureToTexture=function(a,b,c,d){var" e="b.image.width,f=b.image.height,g=ia.convert(c.format),h=ia.convert(c.type);this.setTexture2D(c,0);b.isDataTexture?P.texSubImage2D(3553,d||0,a.x,a.y,e,f,g,h,b.image.data):P.texSubImage2D(3553,d||0,a.x,a.y,g,h,b.image)}}function" qb(a,b){this.name="" ;this.color="new" h(a);this.density="void" 0!="=b?b:2.5E-4}function" rb(a,="" b,c){this.name="" h(a);this.near="void" zd(){c.call(this);this.type="Scene" ;this.overridematerial="this.fog=this.background=null;this.autoUpdate=!0}function" sb(a,b){this.array="a;this.stride=b;this.count=void" fc(a,b,c,d){this.data="a;this.itemSize=b;this.offset=c;this.normalized=!0===d}function" ib(a){q.call(this);this.type="SpriteMaterial" h(16777215);this.map="null;this.rotation=0;this.sizeAttenuation=!0;this.lights=!1;this.transparent=!0;this.setValues(a)}function" gc(a){c.call(this);this.type="Sprite" ;if(void="" d;var="" b="new" float32array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);b="new" sb(b,5);sb.setindex([0,1,2,0,2,3]);sb.addattribute("position",new="" fc(b,3,0,!1));sb.addattribute("uv",new="" fc(b,2,3,!1))}this.geometry="Sb;this.material=void" ib;this.center="new" z(.5,.5)}function="" hc(){c.call(this);="" this.type="LOD" ;object.defineproperties(this,{levels:{enumerable:!0,value:[]}})}function="" ic(a,b){a&&a.isgeometry&&console.error("three.skinnedmesh="" no="" longer="" supports="" three.geometry.="" use="" three.buffergeometry="" instead.");va.call(this,a,b);this.type="SkinnedMesh" ;this.bindmode="attached" ;this.bindmatrix="new" j;this.bindmatrixinverse="new" j}function="" ad(a,b){a="a||[];this.bones=a.slice(0);this.boneMatrices=new" float32array(16*this.bones.length);if(void="" if(this.bones.length="==" b.length)this.boneinverses="b.slice(0);else" for(console.warn("three.skeleton="" boneinverses="" the="" wrong="" length."),this.boneinverses="[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new" j)}function="" fe(){c.call(this);this.type="Bone" }function="" w(a){q.call(this);this.type="LineBasicMaterial" h(16777215);this.linewidth="1;this.linejoin=this.linecap=" round";this.lights="!1;this.setValues(a)}function"" ea(a,b,c){1="==c&&console.error(" three.line:"="" parameter="" three.linepieces="" supported.="" three.linesegments="" instead.");="" c.call(this);this.type="Line" ;this.geometry="void" d;this.material="void" w({color:16777215*math.random()})}function="" u(a,b){ea.call(this,a,b);this.type="LineSegments" bd(a,b){ea.call(this,a,b);this.type="LineLoop" ha(a){q.call(this);this.type="PointsMaterial" tb(a,b){c.call(this);this.type="Points" new="" ha({color:16777215*math.random()})}function="" ge(a,b,c,d,e,f,g,h,k){s.call(this,a,b,c,d,e,f,g,h,k);this.format="void" ub(a,b,c,d,e,f,g,h,k,m,q,p){s.call(this,null,f,g,h,k,m,d,e,q,p);this.image="{width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function" jc(a,b,c,d,e,f,g,h,k){s.call(this,a,b,c,d,e,f,g,h,k);this.needsupdate="!0}function" kc(a,="" b,c,d,e,f,g,h,k,m){m="void" error("depthtexture="" format="" must="" be="" either="" three.depthformat="" three.depthstencilformat");void="" vb(a){d.call(this);this.type="WireframeGeometry" ;var="" k="a.faces;var" m="0;for(d=k.length;m<d;m++){var" q="k[m];for(c=0;3">c;c++){var p=q[h[c]];var t=q[h[(c+1)%3]];f[0]=Math.min(p,t);f[1]=Math.max(p,t);p=f[0]+","+f[1];void 0===g[p]&&(g[p]={index1:f[0],index2:f[1]})}}for(p in g)m=g[p],h=a.vertices[m.index1],b.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry)if(h=new n,null!==a.index){k=a.attributes.position;q=a.index;var l=a.groups;0===l.length&&(l=[{start:0,count:q.count,materialIndex:0}]);a=0;for(e=l.length;a<e;++a)for(m= l[a],c="m.start,d=m.count,m=c,d=c+d;m<d;m+=3)for(c=0;3">c;c++)p=q.getX(m+c),t=q.getX(m+(c+1)%3),f[0]=Math.min(p,t),f[1]=Math.max(p,t),p=f[0]+","+f[1],void 0===g[p]&&(g[p]={index1:f[0],index2:f[1]});for(p in g)m=g[p],h.fromBufferAttribute(k,m.index1),b.push(h.x,h.y,h.z),h.fromBufferAttribute(k,m.index2),b.push(h.x,h.y,h.z)}else for(k=a.attributes.position,m=0,d=k.count/3;m<d;m++)for(c=0;3>c;c++)g=3*m+c,h.fromBufferAttribute(k,g),b.push(h.x,h.y,h.z),g=3*m+(c+1)%3,h.fromBufferAttribute(k,g),b.push(h.x,
h.y,h.z);this.addAttribute("position",new B(b,3))}function Lc(a,b,c){R.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Wb(a,b,c));this.mergeVertices()}function Wb(a,b,c){D.call(this);this.type="ParametricBufferGeometry";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g=[],h=new n,k=new n,m=new n,q=new n,p=new n,t,l;3>a.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");
var r=b+1;for(t=0;t<=c;t++){var u="t/c;for(l=0;l<=b;l++){var" x="l/b;a(x,u,k);e.push(k.x,k.y,k.z);0<=x-1E-5?(a(x-1E-5,u,m),q.subVectors(k,m)):(a(x+1E-5,u,m),q.subVectors(m,k));0<=u-1E-5?(a(x,u-1E-5,m),p.subVectors(k,m)):(a(x,u+1E-5,m),p.subVectors(m,k));h.crossVectors(q,p).normalize();f.push(h.x,h.y,h.z);g.push(x,u)}}for(t=0;t<c;t++)for(l=0;l<b;l++)a=t*r+l+1,h=(t+1)*r+l+1,k=(t+1)*r+l,d.push(t*r+l,a,k),d.push(a,h,k);this.setIndex(d);this.addAttribute(" position",new"="" b(e,3));this.addattribute("normal",="" new="" b(f,3));this.addattribute("uv",new="" b(g,2))}function="" mc(a,b,c,d){r.call(this);this.type="PolyhedronGeometry" ;this.parameters="{vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new" za(a,b,c,d));this.mergevertices()}function="" za(a,b,c,d){function="" e(a){h.push(a.x,a.y,a.z)}function="" f(b,c){b*="3;c.x=a[b+0];c.y=a[b+1];c.z=a[b+2]}function" g(a,b,c,d){0="">d&&1===a.x&&(k[b]=a.x-1);0===c.x&&0===c.z&&(k[b]=d/2/Math.PI+.5)}D.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:a,
indices:b,radius:c,detail:d};c=c||1;d=d||0;var h=[],k=[];(function(a){for(var c=new n,d=new n,g=new n,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var k,m,l="c,A=d,w=g,I=Math.pow(2,a),y=[];for(m=0;m<=I;m++){y[m]=[];var" n="l.clone().lerp(w,m/I),z=A.clone().lerp(w,m/I),F=I-m;for(k=0;k<=F;k++)y[m][k]=0===k&&m===I?N:N.clone().lerp(z,k/F)}for(m=0;m<I;m++)for(k=0;k<2*(I-m)-1;k++)l=Math.floor(k/2),0===k%2?(e(y[m][l+1]),e(y[m+1][l]),e(y[m][l])):(e(y[m][l+1]),e(y[m+1][l+1]),e(y[m+1][l]))}})(d);(function(a){for(var" b="new" n,c="0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var" a="new" n,b="0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],k.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));a=new" n;b="new" n;for(var="" c="new" n,d="new" n,e="new" z,f="new" z,l="new" z,x="0,A=0;x<h.length;x+=9,A+=6){a.set(h[x+0],h[x+1],h[x+2]);b.set(h[x+3],h[x+4],h[x+5]);c.set(h[x+6],h[x+7],h[x+8]);e.set(k[A+0]," k[a+1]);f.set(k[a+2],k[a+3]);l.set(k[a+4],k[a+5]);d.copy(a).add(b).add(c).dividescalar(3);var="" w="Math.atan2(d.z,-d.x);g(e,A+0,a,w);g(f,A+2,b,w);g(l,A+4,c,w)}for(a=0;a<k.length;a+=6)b=k[a+0],c=k[a+2],d=k[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1">e&&(.2>b&&(k[a+0]+=1),.2>c&&(k[a+2]+=1),.2>d&&(k[a+4]+=1))})();this.addAttribute("position",new B(h,3));this.addAttribute("normal",new B(h.slice(),3));this.addAttribute("uv",new B(k,2));0===d?this.computeVertexNormals():this.normalizeNormals()}function Nc(a,
b){R.call(this);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Xb(a,b));this.mergeVertices()}function Xb(a,b){za.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Oc(a,b){R.call(this);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new tb(a,b));this.mergeVertices()}function tb(a,b){za.call(this,[1,0,0,
-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Pc(a,b){R.call(this);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Yb(a,b));this.mergeVertices()}function Yb(a,b){var c=(1+Math.sqrt(5))/2;za.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,
11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Qc(a,b){R.call(this);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Zb(a,b));this.mergeVertices()}function Zb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;za.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,
0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Rc(a,b,c,d,e,f){R.call(this);this.type="TubeGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,
closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new $b(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function $b(a,b,c,d,e){function f(e){q=a.getPointAt(e/b,q);var f=g.normals[e];e=g.binormals[e];for(l=0;l<=d;l++){var m="l/d*Math.PI*2,p=Math.sin(m);m=-Math.cos(m);k.x=m*f.x+p*e.x;k.y=m*f.y+p*e.y;k.z=m*f.z+p*e.z;k.normalize();r.push(k.x,k.y,k.z);h.x=q.x+c*k.x;h.y=q.y+c*k.y;h.z=" q.z+c*k.z;v.push(h.x,h.y,h.z)}}d.call(this);this.type="TubeBufferGeometry" ;this.parameters="{path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var" g="a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var" h="new" n,k="new" n,m="new" z,q="new" n,p,l,v="[],r=[],u=[],x=[];for(p=0;p<b;p++)f(p);f(!1===e?b:0);for(p=0;p<=b;p++)for(l=0;l<=d;l++)m.x=p/b,m.y=l/d,u.push(m.x,m.y);(function(){for(l=1;l<=b;l++)for(p=1;p<=d;p++){var" a="(d+1)*l+(p-1),c=(d+1)*l+p,e=(d+1)*(l-1)+p;x.push((d+1)*(l-1)+(p-1),a,e);x.push(a,c,e)}})();this.setIndex(x);this.addAttribute(" position",new"="" b(v,3));this.addattribute("normal",new="" b(r,3));this.addattribute("uv",new="" b(u,2))}function="" sc(a,b,c,d,e,f,g){r.call(this);this.type="TorusKnotGeometry" 0!="=g&&console.warn(" three.torusknotgeometry:"="" heightscale="" has="" been="" deprecated.="" use="" .scale(="" x,="" y,="" z="" )="" instead.");this.frombuffergeometry(new="" ac(a,="" b,c,d,e,f));this.mergevertices()}function="" ac(a,b,c,d,e,f){function="" g(a,b,c,d,e){var="" f="Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}D.call(this);this.type=" torusknotbuffergeometry";this.parameters="{radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||1;b=b||.4;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var"" n,v="new" n,r="new" n,u="new" n,x="new" n,a="new" n,w="new" n;for(p="0;p<=c;++p){var" i="p/c*e*Math.PI*2;" g(i,e,f,a,r);g(i+.01,e,f,a,u);a.subvectors(u,r);w.addvectors(u,r);x.crossvectors(a,w);w.crossvectors(x,a);x.normalize();w.normalize();for(i="0;I<=d;++I){var" y="I/d*Math.PI*2,N=-b*Math.cos(y);y=b*Math.sin(y);l.x=r.x+(N*w.x+y*x.x);l.y=r.y+(N*w.y+y*x.y);l.z=r.z+(N*w.z+y*x.z);k.push(l.x,l.y,l.z);v.subVectors(l,r).normalize();m.push(v.x,v.y,v.z);q.push(p/c);q.push(I/d)}}for(I=1;I<=c;I++)for(p=1;p<=d;p++)a=(d+1)*I+(p-1),b=(d+1)*I+p,e=(d+1)*(I-1)+p,h.push((d+1)*(I-1)+(p-1),a,e),h.push(a,b,e);this.setIndex(h);" this.addattribute("position",new="" b(k,3));this.addattribute("normal",new="" b(m,3));this.addattribute("uv",new="" b(q,2))}function="" tc(a,b,c,d,e){r.call(this);this.type="TorusGeometry" bc(a,b,c,d,e));this.mergevertices()}function="" bc(a,b,c,d,e){d.call(this);this.type="TorusBufferGeometry" 6;e="e||2*Math.PI;var" n,q="new" n,p="new" n,l,v;for(l="0;l<=c;l++)for(v=0;v<=d;v++){var" r="v/d*e,u=l/c*Math.PI*2;q.x=(a+b*Math.cos(u))*Math.cos(r);q.y=(a+b*Math.cos(u))*Math.sin(r);q.z=b*Math.sin(u);g.push(q.x,q.y,q.z);m.x=a*Math.cos(r);m.y=a*Math.sin(r);p.subVectors(q,m).normalize();h.push(p.x,p.y,p.z);k.push(v/d);k.push(l/c)}for(l=1;l<=c;l++)for(v=1;v<=d;v++)a=(d+1)*(l-1)+v-1,b=(d+1)*(l-1)+v,e=(d+1)*l+v,f.push((d+1)*l+v-1,a,e),f.push(a,b,e);this.setIndex(f);this.addAttribute(" position","="" new="" b(g,3));this.addattribute("normal",new="" b(h,3));this.addattribute("uv",new="" b(k,2))}function="" of(a,b,c,d,e){for(var="" f,g="0,h=b,k=c-d;h<c;h+=d)g+=(a[k]-a[h])*(a[h+1]+a[k+1]),k=h;if(e===0<g)for(e=b;e<c;e+=d)f=pf(e,a[e],a[e+1],f);else" for(e="c-d;e">=b;e-=d)f=pf(e,a[e],a[e+1],f);f&&ub(f,f.next)&&(Uc(f),f=f.next);return f}function Vc(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!ub(a,a.next)&&0!==pa(a.prev,a,a.next))a=a.next;else{Uc(a);a=b=a.prev;if(a===a.next)break;c=!0}}while(c||a!==b);return b}
function Wc(a,b,c,d,e,f,g){if(a){if(!g&&f){var h=a,k=h;do null===k.z&&(k.z=he(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;h=k;var m,q,p,l,v=1;do{k=h;var r=h=null;for(q=0;k;){q++;var u=k;for(m=p=0;m<v&&(p++,u=u.nextz,u);m++);for(l=v;0<p||0<l&&u;)0!==p&&(0===l||!u||k.z<=u.z)?(m=k,k=k.nextz,p--):(m=u,u=u.nextz,l--),r?r.nextz=m:h=m,m.prevz=r,r=m;k=u}r.nextz=null;v*=2}while(1<q)}for(h=a;a.prev!==a.next;){k=a.prev;u=a.next;if(f)a:{r=a;l=d;var n="e,A=f;q=r.prev;" p="r;v=r.next;if(0<=pa(q,p,v))r=!1;else{var" w="q.x">p.x?q.x>v.x?q.x:v.x:p.x>v.x?p.x:v.x,I=q.y>p.y?q.y>v.y?q.y:v.y:p.y>v.y?p.y:v.y;m=he(q.x<p.x?q.x<v.x?q.x:v.x:p.x<v.x?p.x:v.x,q.y<p.y?q.y<v.y?q.y:v.y:p.y<v.y?p.y:v.y,l,n,a);l=he(w,i,l,n,a);for(n=r.nextz;n&&n.z<=l;){if(n!==r.prev&&n!==r.next&&cd(q.x,q.y,p.x,p.y,v.x,v.y,n.x,n.y)&&0<=pa(n.prev,n,n.next)){r=!1;break a}n="n.nextZ}for(n=r.prevZ;n&&n.z">=m;){if(n!==r.prev&&n!==r.next&&Cd(q.x,q.y,p.x,p.y,v.x,v.y,n.x,n.y)&&0<=pa(n.prev,n,n.next)){r=!1;break a}n="n.prevZ}r=!0}}else" a:if(r="a,q=r.prev,p=r,v=r.next,0<=pa(q,p,v))r=!1;else{for(m=r.next.next;m!==r.prev;){if(Cd(q.x,q.y,p.x,p.y,v.x,v.y,m.x,m.y)&&0<=pa(m.prev,m,m.next)){r=!1;break" a}m="m.next}r=!0}if(r)b.push(k.i/c),b.push(a.i/c),b.push(u.i/c),Uc(a),h=a=u.next;else" if(a="u,a===h){if(!g)Wc(Vc(a),b,c,d,e,f,1);else" if(1="==g){g=b;h=c;k=a;do" u="k.prev,r=k.next.next,!ub(u,r)&&qf(u,k,k.next,r)&&Xc(u,r)&&Xc(r,u)&&(g.push(u.i/h),g.push(k.i/h),g.push(r.i/h),Uc(k),Uc(k.next),k=a=r),k=k.next;while(k!==a);a=k;Wc(a," b,c,d,e,f,2)}else="" if(2="==g)a:{g=a;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;u=h;if(r=k.next.i!==u.i&&k.prev.i!==u.i){b:{r=k;do{if(r.i!==k.i&&r.next.i!==k.i&&r.i!==u.i&&r.next.i!==u.i&&qf(r,r.next,k,u)){r=!0;break" b}r="r.next}while(r!==k);r=!1}r=!r}if(r=r&&Xc(k,u)&&Xc(u,k)){r=k;q=!1;p=(k.x+u.x)/2;u=(k.y+u.y)/2;do" r.y="">u!==r.next.y>u&&r.next.y!==r.y&&p<(r.next.x-r.x)*(u-r.y) (r.next.y-r.y)+r.x&&(q="!q),r=r.next;while(r!==k);r=q}k=r}if(k){a=rf(g,h);g=Vc(g,g.next);a=Vc(a,a.next);Wc(g,b,c,d,e," f);wc(a,b,c,d,e,f);break="" a}h="h.next}g=g.next}while(g!==a)}break}}}}function" yg(a,b){return="" a.x-b.x}function="" zg(a,b){var="" c="b,d=a.x,e=a.y,f=-Infinity;do{if(e<=c.y&&e">=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=d&&g>f){f=g;if(g===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d="==f)return" h.prev;b="h;g=h.x;var" k="h.y,m=Infinity;for(c=h.next;c!==b;){if(d">=c.x&&c.x>=g&&d!==c.x&&Cd(e<k?d:f,e, g,k,e<k?f:d,e,c.x,c.y)){var="" q="Math.abs(e-c.y)/(d-c.x);(q<m||q===m&&c.x">h.x)&&Xc(c,a)&&(h=c,m=q)}c=c.next}return h}function he(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function 0="" $g(a){var="" b="a,c=a;do" b.x<c.x&&(c="b),b=b.next;while(b!==a);return" c}function="" cd(a,b,c,d,e,f,g,h){return="" 0<="(e-g)*(b-h)-(a-g)*(f-h)&&0<=(a-g)*(d-h)-(c-" g)*(b-h)&&0<="(c-g)*(f-h)-(e-g)*(d-h)}function" pa(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function="" ub(a,b){return="" a.x="==b.x&&a.y===b.y}function" qf(a,b,c,d){return="" ub(a,b)&&ub(c,d)||ub(a,d)&&ub(c,b)?!0:0<pa(a,b,c)!="=0<pa(a,b,d)&&0<pa(c,d,a)!==0<pa(c,d,b)}function" xc(a,b){return="">pa(a.prev,a,a.next)?0<=pa(a,b,a.next)&&0<=pa(a,a.prev,b):0>pa(a,b,a.prev)||0>pa(a,a.next,b)}function rf(a,b){var c=new ie(a.i,a.x,a.y),d=new ie(b.i,b.x,b.y),e=a.next,f=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=
c;d.next=c;c.prev=d;f.next=d;d.prev=f;return d}function pf(a,b,c,d){a=new ie(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function Uc(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function ie(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function sf(a){var b=a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function tf(a,b){for(var="" c="0;c<b.length;c++)a.push(b[c].x)," a.push(b[c].y)}function="" vb(a,b){r.call(this);this.type="ExtrudeGeometry" ;this.parameters="{shapes:a,options:b};this.fromBufferGeometry(new" ua(a,b));this.mergevertices()}function="" ua(a,b){function="" c(a){function="" c(a,b,c){b||console.error("three.extrudegeometry:="" vec="" does="" not="" exist");return="" b.clone().multiplyscalar(c).add(a)}function="" g(a,b,c){var="" d="a.x-b.x;var" e="a.y-b.y;var" f="c.x-a.x;var" g="c.y-a.y,h=d*d+e*e;if(Math.abs(d*g-e*f)">Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(f*f+g*g);h=b.x-e/k;b=b.y+d/k;
g=((c.x-g/m-h)*g-(c.y+f/m-b)*f)/(d*g-e*f);f=h+d*g-a.x;d=b+e*g-a.y;e=f*f+d*d;if(2>=e)return new z(f,d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?f>Number.EPSILON&&(a=!0):d<-number.epsilon?f<-number.epsilon&&(a=!0):math.sign(e)===math.sign(g)&&(a=!0),a?(f=-e,e=math.sqrt(h)):(f=d,d=e,e=math.sqrt(h 2));return="" new="" z(f="" e,d="" e)}function="" h(a,b){for(m="a.length;0<=--M;){var" c="M;var" f="M-1;0">f&&(f=a.length-1);var g,h=w+2*F;for(g=0;g<h;g++){var 0="==b.bevelThickness&&(b.bevelThickness=10);void" k="X*g,m=X*(g+1),q=b+f+k,p=b+f+m;m=b+c+m;r(b+c+k);r(q);r(m);r(q);" r(p);r(m);k="e.length/3;k=C.generateSideWallUV(d,e,k-6,k-3,k-2,k-1);u(k[0]);u(k[1]);u(k[3]);u(k[1]);u(k[2]);u(k[3])}}}function" k(a,b,c){x.push(a);x.push(b);x.push(c)}function="" l(a,b,c){r(a);r(b);r(c);a="e.length/3;a=C.generateTopUV(d,e,a-3,a-2,a-1);u(a[0]);u(a[1]);u(a[2])}function" r(a){e.push(x[3*a]);e.push(x[3*a+1]);e.push(x[3*a+2])}function="" u(a){f.push(a.x);f.push(a.y)}var="" x="[],A=void" 0!="=b.curveSegments?b.curveSegments:12,w=void" b.bevelenabled:!0,n="void" amount="" has="" been="" renamed="" to="" depth."),i="b.amount);var" e="!1;if(D){var" y="D.getSpacedPoints(w);E=!0;y=!1;var" h="D.computeFrenetFrames(w,!1);var" n;var="" r="new" q="new" n}y||(b="N=F=0);var" j;a="a.extractPoints(A);a=A.shape;var" l="A.holes;" if(!$a.isclockwise(a)){a="a.reverse();var" g="0;for(J=L.length;G<J;G++){var" o="L[G];$a.isClockWise(O)&&(L[G]=O.reverse())}}var" w="$a.triangulateShape(a,L),U=a;G=0;for(J=L.length;G<J;G++)O=L[G],a=a.concat(O);var" s,x="a.length,V,ea=W.length;A=[];var" m="0;var" t="U.length;var" ha="T-1;for(S=M+1;M<T;M++,ha++,S++)ha===T&&(ha=0),S===T&&(S=0),A[M]=g(U[M],U[ha],U[S]);D=[];var" fa="A.concat();G=0;for(J=L.length;G<J;G++){O=L[G];var" ba="[];M=0;T=O.length;ha=T-1;for(S=M+1;M<T;M++,ha++,S++)ha===T&&(ha=0),S===T&&(S=0),ba[M]=" g(o[m],o[ha],o[s]);d.push(ba);fa="fa.concat(ba)}for(ha=0;ha<F;ha++){T=ha/F;var" ca="N*Math.cos(T*Math.PI/2);S=B*Math.sin(T*Math.PI/2);M=0;for(T=U.length;M<T;M++){var" z="c(U[M],A[M],S);k(Z.x,Z.y,-ca)}G=0;for(J=L.length;G<J;G++)for(O=L[G],ba=D[G],M=0,T=O.length;M<T;M++)Z=c(O[M],ba[M],S),k(Z.x,Z.y,-ca)}S=B;for(M=0;M<X;M++)Z=y?c(a[M],fa[M],S):a[M],E?(R.copy(H.normals[0]).multiplyScalar(Z.x),K.copy(H.binormals[0]).multiplyScalar(Z.y),Q.copy(Y[0]).add(R).add(K),k(Q.x,Q.y,Q.z)):k(Z.x,Z.y,0);for(T=1;T<=w;T++)for(M=" 0;m<x;m++)z="y?c(a[M],fa[M],S):a[M],E?(R.copy(H.normals[T]).multiplyScalar(Z.x),K.copy(H.binormals[T]).multiplyScalar(Z.y),Q.copy(Y[T]).add(R).add(K),k(Q.x,Q.y,Q.z)):k(Z.x,Z.y,I/w*T);for(ha=F-1;0<=ha;ha--){T=ha/F;ca=N*Math.cos(T*Math.PI/2);S=B*Math.sin(T*Math.PI/2);M=0;for(T=U.length;M<T;M++)Z=c(U[M],A[M],S),k(Z.x,Z.y,I+ca);G=0;for(J=L.length;G<J;G++)for(O=L[G],ba=D[G],M=0,T=O.length;M<T;M++)Z=c(O[M],ba[M],S),E?k(Z.x,Z.y+Y[w-1].y,Y[w-1].x+ca):k(Z.x,Z.y,I+ca)}(function(){var" a="e.length/3;if(y){var" b="0*X;for(M=0;M<ea;M++)V=W[M],l(V[2]+b,V[1]+b,V[0]+b);b=X*(w+2*F);for(M=0;M<ea;M++)V=W[M],l(V[0]+b,V[1]+b,V[2]+b)}else{for(M=0;M<ea;M++)V=W[M],l(V[2],V[1],V[0]);for(M=0;M<ea;M++)V=W[M],l(V[0]+X*w,V[1]+X*w,V[2]+X*w)}d.addGroup(a,e.length/3-a,0)})();(function(){var" d="this,e=[],f=[],g=0,h=a.length;g<h;g++)c(a[g]);this.addAttribute(" position",new"="" b(e,3));this.addattribute("uv",new="" b(f,2));this.computevertexnormals()}function="" uf(a,b,c){c.shapes="[];if(Array.isArray(a))for(var" c.shapes.push(a.uuid);void="" c}function="" yc(a,b){r.call(this);this.type="TextGeometry" ;this.parameters="{text:a,parameters:b};this.fromBufferGeometry(new" cc(a,b));this.mergevertices()}="" function="" cc(a,b){b="b||{};var" c="b.font;if(!c||!c.isFont)return" console.error("three.textgeometry:="" font="" parameter="" is="" not="" an="" instance="" of="" three.font."),new="" r;a="c.generateShapes(a,b.size);b.depth=void" zc(a,b,c,d,e,f,g){r.call(this);this.type="SphereGeometry" heightsegments:c,phistart:d,philength:e,thetastart:f,thetalength:g};this.frombuffergeometry(new="" wb(a,b,c,d,e,f,g));this.mergevertices()}function="" wb(a,b,c,d,e,f,g){d.call(this);this.type="SphereBufferGeometry" n,="" v="new" n,r="[],u=[],x=[],A=[];for(m=0;m<=c;m++){var" b(u,3));this.addattribute("normal",="" new="" b(x,3));this.addattribute("uv",new="" b(a,2))}function="" $c(a,b,c,d,e,f){r.call(this);this.type="RingGeometry" dc(a,b,c,d,e,f));this.mergevertices()}function="" dc(a,b,c,d,e,f){d.call(this);this.type="RingBufferGeometry" n,v="new" z,r,u;for(r="0;r<=d;r++){for(u=0;u<=c;u++)a=e+u/c*f,l.x=q*Math.cos(a),l.y=q*Math.sin(a),h.push(l.x,l.y,l.z),k.push(0,0,1),v.x=(l.x/b+1)/2,v.y=(l.y/b+1)/2,m.push(v.x,v.y);q+=p}for(r=0;r<d;r++)for(b=r*(c+1),u=0;u<c;u++)a=u+b,e=a+c+1,f=a+c+2,q=a+1,g.push(a,e,q),g.push(e,f,q);this.setIndex(g);this.addAttribute(" b(h,3));this.addattribute("normal",new="" b(k,3));this.addattribute("uv",="" b(m,2))}function="" ad(a,b,c,d){r.call(this);this.type="LatheGeometry" ec(a,b,c,d));this.mergevertices()}function="" ec(a,b,c,d){d.call(this);this.type="LatheBufferGeometry" n,m="new" z,q;for(q="0;q<=b;q++){var" p="c+q*h*d;var" 0;p<="a.length-1;p++)k.x=a[p].x*l,k.y=a[p].y,k.z=a[p].x*v,f.push(k.x,k.y,k.z),m.x=q/b,m.y=p/(a.length-1),g.push(m.x,m.y)}for(q=0;q<b;q++)for(p=0;p<a.length-1;p++)c=p+q*a.length,h=c+a.length,k=c+a.length+1,m=c+1,e.push(c,h,m),e.push(h,k,m);this.setIndex(e);this.addAttribute(" b(f,3));this.addattribute("uv",new="" b(g,2));this.computevertexnormals();if(d="==2*Math.PI)for(d=this.attributes.normal.array,e=new" n,f="new" n,g="new" n,c="b*a.length*3,p=q=0;q<a.length;q++,p+=3)e.x=d[p+0],e.y=d[p+1],e.z=" d[p+2],f.x="d[c+p+0],f.y=d[c+p+1],f.z=d[c+p+2],g.addVectors(e,f).normalize(),d[p+0]=d[c+p+0]=g.x,d[p+1]=d[c+p+1]=g.y,d[p+2]=d[c+p+2]=g.z}function" xb(a,b){r.call(this);this.type="ShapeGeometry" ;"object"="==typeof" b&&(console.warn("three.shapegeometry:="" options="" removed."),b="b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new" yb(a,b));this.mergevertices()}function="" yb(a,b){function="" c(a){var="" c,h="e.length/3;a=a.extractPoints(b);var" !1="==$a.isClockWise(m)&&(m=m.reverse());a=0;for(c=q.length;a<c;a++){var" n="$a.triangulateShape(m,q);a=0;for(c=q.length;a<c;a++)l=q[a],m=m.concat(l);a=0;for(c=m.length;a<c;a++)l=m[a],e.push(l.x,l.y,0),f.push(0,0,1),g.push(l.x,l.y);a=0;for(c=n.length;a<c;a++)m=n[a],d.push(m[0]+h,m[1]+h,m[2]+h),k+=3}D.call(this);this.type=" shapebuffergeometry";this.parameters="{shapes:a,curveSegments:b};b=b||12;var"" else="" for(var="" b(e,3));this.addattribute("normal",new="" b(g,2))}function="" vf(a,b){b.shapes="[];if(Array.isArray(a))for(var" b.shapes.push(a.uuid);return="" b}function="" fc(a,b){d.call(this);this.type="EdgesGeometry" ["a","b","c"];if(a.isbuffergeometry){var="" r;g.frombuffergeometry(a)}else="">q;q++){var l=m[f[q]];var t=m[f[(q+1)%3]];d[0]=Math.min(l,t);d[1]=Math.max(l,t);l=d[0]+","+d[1];void 0===e[l]?e[l]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[l].face2=h}for(l in e)if(d=e[l],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2], 0="==a)throw" c.push(f.x,f.y,f.z);this.addattribute("position",new="" b(c,3))}function="" zb(a,b,c,d,e,f,g,h){r.call(this);this.type="CylinderGeometry" ;this.parameters="{radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new" ab(a,b,c,d,e,f,g,h));this.mergevertices()}function="" ab(a,b,c,d,e,f,g,h){function="" k(c){var="" e,f="new" z,k="new" n,p="0,u=!0===c?a:b,w=!0===c?1:-1;var" b="r;for(e=1;e<=d;e++)l.push(0,x*w,0),t.push(0,w,0),v.push(.5,.5),r++;var" d="r;for(e=0;e<=d;e++){var" c="e/d*h+g,G=Math.cos(C);C=Math.sin(C);k.x=u*C;k.y=x*w;k.z=u*G;l.push(k.x,k.y,k.z);t.push(0,w,0);f.x=.5*G+.5;f.y=.5*C*w+.5;v.push(f.x,f.y);r++}for(e=0;e<d;e++)f=B+e,k=D+e,!0===c?q.push(k,k+1,f):q.push(k+1,k,f),p+=3;m.addGroup(A,p,!0===c?1:2);A+=p}D.call(this);this.type=" cylinderbuffergeometry";this.parameters="{radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var"" m="this;a=void" 0!="=a?a:1;b=void" 8;e="Math.floor(e)||1;f=void" q="[],l=[],t=[],v=[],r=0,u=[],x=c/2,A=0;(function(){var" f,k,p="new" n,n="new" n,z="0,F=(b-a)/c;for(k=0;k<=e;k++){var" g="f/d,E=G*h+g,H=Math.sin(E);E=Math.cos(E);N.x=C*H;N.y=-D*c+x;N.z=C*E;l.push(N.x,N.y,N.z);p.set(H,F,E).normalize();t.push(p.x,p.y,p.z);v.push(G,1-D);B.push(r++)}u.push(B)}for(f=0;f<d;f++)for(k=0;k<e;k++)p=u[k+1][f],N=u[k+1][f+1],F=u[k][f+1],q.push(u[k][f],p,F)," q.push(p,n,f),z+="6;m.addGroup(A,z,0);A+=z})();!1===f&&(0<a&&k(!0),0<b&&k(!1));this.setIndex(q);this.addAttribute(" position",new"="" b(l,3));this.addattribute("normal",new="" b(t,3));this.addattribute("uv",new="" b(v,2))}function="" bd(a,b,c,d,e,f,g){zb.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry" cd(a,b,c,d,e,f,g){ab.call(this,0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry" dd(a,b,c,d){r.call(this);this.type="CircleGeometry" gc(a,b,c,d));this.mergevertices()}function="" gc(a,b,c,d){d.call(this);this.type="CircleBufferGeometry" e="[],f=" [],g="[],h=[],k,m=new" n,q="new" z;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);var="" l="0;for(k=3;l<=b;l++,k+=3){var" t="c+l/b*d;m.x=a*Math.cos(t);m.y=a*Math.sin(t);f.push(m.x,m.y,m.z);g.push(0,0,1);q.x=(f[k]/a+1)/2;q.y=(f[k+1]/a+1)/2;h.push(q.x,q.y)}for(k=1;k<=b;k++)e.push(k,k+1,0);this.setIndex(e);this.addAttribute(" b(f,3));this.addattribute("normal",new="" b(g,3));this.addattribute("uv",new="" b(h,2))}function="" ab(a){q.call(this);this.type="ShadowMaterial" ;this.color="new" h(0);this.transparent="!0;this.setValues(a)}" function="" hc(a){ca.call(this,a);this.type="RawShaderMaterial" }function="" va(a){q.call(this);this.defines="{STANDARD:" "};this.type="MeshStandardMaterial" h(16777215);this.metalness="this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" h(0);this.emissiveintensity="1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new" z(1,1);this.displacementmap="null;this.displacementScale=" 1;this.displacementbias="0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=" round";this.morphnormals="this.morphTargets=this.skinning=!1;this.setValues(a)}function"" bb(a){va.call(this);this.defines="{PHYSICAL:" ;this.reflectivity=".5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function"" ia(a){q.call(this);="" this.type="MeshPhongMaterial" h(16777215);this.specular="new" h(1118481);this.shininess="30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" this.reflectivity="1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=" cb(a){ia.call(this);this.defines="{TOON:" ;this.gradientmap="null;this.setValues(a)}function"" db(a){q.call(this);this.type="MeshNormalMaterial" ;this.bumpmap="null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new" eb(a){q.call(this);this.type="MeshLambertMaterial" h(16777215);this.lightmap="this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" 1;this.refractionratio=".98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=" fb(a){q.call(this);this.defines="{MATCAP:" h(16777215);this.bumpmap="this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new" 0;this.alphamap="null;this.lights=this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function" gb(a){w.call(this);this.type="LineDashedMaterial" ;this.scale="1;this.dashSize=3;this.gapSize=1;this.setValues(a)}function" wa(a,b,c,d){this.parameterpositions="a;this._cachedIndex=0;this.resultBuffer=void" b.constructor(c);this.samplevalues="b;this.valueSize=c}function" dd(a,b,c,d){wa.call(this,a,b,c,d);this._offsetnext="this._weightNext=this._offsetPrev=this._weightPrev=-0}function" ed(a,="" b,c,d){wa.call(this,a,b,c,d)}function="" ed(a,b,c,d){wa.call(this,a,b,c,d)}function="" qa(a,b,c,d){if(void="" error("three.keyframetrack:="" track="" name="" is="" undefined");if(void="" no="" keyframes="" in="" named="" "+a);this.name="a;this.times=sa.convertArray(b,this.TimeBufferType);this.values=sa.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation)}function" fd(a,b,c){qa.call(this,a,b,c)}function="" gd(a,b,c,d){qa.call(this,="" a,b,c,d)}function="" ic(a,b,c,d){qa.call(this,a,b,c,d)}function="" hd(a,b,c,d){wa.call(this,a,b,c,d)}function="" fd(a,b,c,d){qa.call(this,a,b,c,d)}function="" id(a,b,c,d){qa.call(this,a,b,c,d)}function="" jc(a,b,c,d){qa.call(this,a,b,c,d)}function="" fa(a,b,c){this.name="a;this.tracks=c;this.duration=void">this.duration&&this.resetDuration()}function bh(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return ic;case "vector":case "vector2":case "vector3":case "vector4":return jc;
case "color":return Gd;case "quaternion":return fd;case "bool":case "boolean":return Fd;case "string":return Id}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a);}function ch(a){if(void 0===a.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var b=bh(a.type);if(void 0===a.times){var c=[],d=[];sa.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return void 0!==b.parse?b.parse(a):new b(a.name,a.times,a.values,a.interpolation)}function je(a,b,c){var d=this,e=
!1,f=0,g=0,h=void 0;this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void 0!==d.onStart)d.onStart(a,f,g);e=!0};this.itemEnd=function(a){f++;if(void 0!==d.onProgress)d.onProgress(a,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(a){if(void 0!==d.onError)d.onError(a)};this.resolveURL=function(a){return h?h(a):a};this.setURLModifier=function(a){h=a;return this}}function Ja(a){this.manager=void 0!==a?a:Aa}function wf(a){this.manager=
void 0!==a?a:Aa}function xf(a){this.manager=void 0!==a?a:Aa;this._parser=null}function ke(a){this.manager=void 0!==a?a:Aa;this._parser=null}function gd(a){this.manager=void 0!==a?a:Aa}function le(a){this.manager=void 0!==a?a:Aa}function Jd(a){this.manager=void 0!==a?a:Aa}function K(){this.type="Curve";this.arcLengthDivisions=200}function Ea(a,b,c,d,e,f,g,h){K.call(this);this.type="EllipseCurve";this.aX=a||0;this.aY=b||0;this.xRadius=c||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*
Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function kc(a,b,c,d,e,f){Ea.call(this,a,b,c,c,d,e,f);this.type="ArcCurve"}function me(){var a=0,b=0,c=0,d=0;return{initCatmullRom:function(e,f,g,h,k){e=k*(g-e);h=k*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,m,q){e=((f-e)/k-(g-e)/(k+m)+(g-f)/m)*m;h=((g-f)/m-(h-f)/(m+q)+(h-g)/q)*m;a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=e*e;return a+b*e+c*f+d*f*e}}}function oa(a,b,c,d){K.call(this);
this.type="CatmullRomCurve3";this.points=a||[];this.closed=b||!1;this.curveType=c||"centripetal";this.tension=d||.5}function yf(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function hd(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function id(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function Ka(a,b,c,d){K.call(this);this.type="CubicBezierCurve";this.v0=a||new z;this.v1=b||new z;this.v2=c||new z;this.v3=d||new z}function Wa(a,
b,c,d){K.call(this);this.type="CubicBezierCurve3";this.v0=a||new n;this.v1=b||new n;this.v2=c||new n;this.v3=d||new n}function Ba(a,b){K.call(this);this.type="LineCurve";this.v1=a||new z;this.v2=b||new z}function La(a,b){K.call(this);this.type="LineCurve3";this.v1=a||new n;this.v2=b||new n}function Ma(a,b,c){K.call(this);this.type="QuadraticBezierCurve";this.v0=a||new z;this.v1=b||new z;this.v2=c||new z}function Xa(a,b,c){K.call(this);this.type="QuadraticBezierCurve3";this.v0=a||new n;this.v1=b||
new n;this.v2=c||new n}function Na(a){K.call(this);this.type="SplineCurve";this.points=a||[]}function bb(){K.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function Oa(a){bb.call(this);this.type="Path";this.currentPoint=new z;a&&this.setFromPoints(a)}function jb(a){Oa.call(this,a);this.uuid=G.generateUUID();this.type="Shape";this.holes=[]}function ca(a,b){C.call(this);this.type="Light";this.color=new H(a);this.intensity=void 0!==b?b:1;this.receiveShadow=void 0}function Kd(a,b,c){ca.call(this,
a,c);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(C.DefaultUp);this.updateMatrix();this.groundColor=new H(b)}function Hb(a){this.camera=a;this.bias=0;this.radius=1;this.mapSize=new z(512,512);this.map=null;this.matrix=new J}function Ld(){Hb.call(this,new X(50,1,.5,500))}function Md(a,b,c,d,e,f){ca.call(this,a,b);this.type="SpotLight";this.position.copy(C.DefaultUp);this.updateMatrix();this.target=new C;Object.defineProperty(this,"power",{get:function(){return this.intensity*
Math.PI},set:function(a){this.intensity=a/Math.PI}});this.distance=void 0!==c?c:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new Ld}function Nd(a,b,c,d){ca.call(this,a,b);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}});this.distance=void 0!==c?c:0;this.decay=void 0!==d?d:1;this.shadow=new Hb(new X(90,1,.5,500))}function jd(a,b,c,d,e,f){Ta.call(this);
this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=void 0!==a?a:-1;this.right=void 0!==b?b:1;this.top=void 0!==c?c:1;this.bottom=void 0!==d?d:-1;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function Od(){Hb.call(this,new jd(-5,5,5,-5,.5,500))}function Pd(a,b){ca.call(this,a,b);this.type="DirectionalLight";this.position.copy(C.DefaultUp);this.updateMatrix();this.target=new C;this.shadow=new Od}function Qd(a,b){ca.call(this,a,b);this.type="AmbientLight";
this.castShadow=void 0}function Rd(a,b,c,d){ca.call(this,a,b);this.type="RectAreaLight";this.width=void 0!==c?c:10;this.height=void 0!==d?d:10}function Sd(a){this.manager=void 0!==a?a:Aa;this.textures={}}function ne(a){this.manager=void 0!==a?a:Aa}function oe(a){this.manager=void 0!==a?a:Aa;this.resourcePath=""}function pe(a){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");
this.manager=void 0!==a?a:Aa;this.options=void 0}function qe(){this.type="ShapePath";this.color=new H;this.subPaths=[];this.currentPath=null}function re(a){this.type="Font";this.data=a}function zf(a){this.manager=void 0!==a?a:Aa}function kd(){}function se(a){this.manager=void 0!==a?a:Aa}function Af(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new X;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new X;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=
!1}function ld(a,b,c,d){C.call(this);this.type="CubeCamera";var e=new X(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new n(1,0,0));this.add(e);var f=new X(90,1,a,b);f.up.set(0,-1,0);f.lookAt(new n(-1,0,0));this.add(f);var g=new X(90,1,a,b);g.up.set(0,0,1);g.lookAt(new n(0,1,0));this.add(g);var h=new X(90,1,a,b);h.up.set(0,0,-1);h.lookAt(new n(0,-1,0));this.add(h);var k=new X(90,1,a,b);k.up.set(0,-1,0);k.lookAt(new n(0,0,1));this.add(k);var m=new X(90,1,a,b);m.up.set(0,-1,0);m.lookAt(new n(0,0,-1));this.add(m);
d=d||{format:1022,magFilter:1006,minFilter:1006};this.renderTarget=new Jb(c,c,d);this.renderTarget.texture.name="CubeCamera";this.update=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=a.getRenderTarget(),d=this.renderTarget,q=d.texture.generateMipmaps;d.texture.generateMipmaps=!1;d.activeCubeFace=0;a.setRenderTarget(d);a.render(b,e);d.activeCubeFace=1;a.render(b,f);d.activeCubeFace=2;a.render(b,g);d.activeCubeFace=3;a.render(b,h);d.activeCubeFace=4;a.render(b,k);d.texture.generateMipmaps=
q;d.activeCubeFace=5;a.render(b,m);a.setRenderTarget(c)};this.clear=function(a,b,c,d){for(var e=a.getRenderTarget(),f=this.renderTarget,g=0;6>g;g++)f.activeCubeFace=g,a.setRenderTarget(f),a.clear(b,c,d);a.setRenderTarget(e)}}function te(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function ue(){C.call(this);this.type="AudioListener";this.context=ve.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=
null;this.timeDelta=0}function lc(a){C.call(this);this.type="Audio";this.listener=a;this.context=a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function we(a){lc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function xe(a,b){this.analyser=
a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}function ye(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function Bf(a,b,c){c=c||ma.parseTrackName(b);
this._targetGroup=a;this._bindings=a.subscribe_(b,c)}function ma(a,b,c){this.path=b;this.parsedPath=c||ma.parseTrackName(b);this.node=ma.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function Cf(){this.uuid=G.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var b=0,c=arguments.length;b!==c;++b)a[arguments[b].uuid]=b;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats=
{objects:{get total(){return d._objects.length},get inUse(){return this.total-d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function Df(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=
this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function ze(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Td(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);
this.value=a}function Ae(){D.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function Be(a,b,c){sb.call(this,a,b);this.meshPerAttribute=c||1}function Ce(a,b,c,d){"number"===typeof c&&(d=c,c=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));L.call(this,a,b,c);this.meshPerAttribute=d||1}function Ef(a,b,c,d){this.ray=new rb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},
Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function Ff(a,b){return a.distance-b.distance}function De(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)de(a[d],b,c,!0)}}function gf(a,b,c){this.radius="void" 0!="=a?a:1;this.phi=void" this}function="" hf(a,b,c){this.radius="void" a?a:1;this.theta="void" ee(a,b){this.min="void" z(infinity,infinity);this.max="void" z(-infinity,-infinity)}function="" fe(a,b){this.start="void" n;this.end="void" n}function="" md(a){c.call(this);this.material="a;this.render=function(){}}function" nd(a,b,c,d){this.object="a;this.size=void" (b="c.attributes.normal.count);c=new" d;b="new" b(6*b,3);c.addattribute("position",b);u.call(this,c,new="" w({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()}function" mc(a,b){c.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;a=new" c="0,d=1;32">c;c++,d++){var e=c/32*Math.PI*2,f=d/32*Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),
1)}a.addAttribute("position",new B(b,3));b=new W({fog:!1});this.cone=new U(a,b);this.add(this.cone);this.update()}function If(a){var b=[];a&&a.isBone&&b.push(a);for(var c=0;c<a.children.length;c++)b.push.apply(b,if(a.children[c]));return 0="==this.color&&" b}function="" nc(a){for(var="" b="If(a),c=new" d,d="[],e=[],f=new" h(0,0,1),g="new" h(0,1,0),h="0;h<b.length;h++){var" k="b[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}c.addAttribute(" position",new"="" b(d,3));c.addattribute("color",="" new="" b(e,3));d="new" w({vertexcolors:2,depthtest:!1,depthwrite:!1,transparent:!0});u.call(this,c,d);this.root="a;this.bones=b;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1}function" oc(a,b,c){this.light="a;this.light.updateMatrixWorld();this.color=c;a=new" wb(b,4,2);b="new" xa({wireframe:!0,fog:!1});va.call(this,a,b);this.matrix="this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function" pc(a,b){this.type="RectAreaLightHelper" ;this.light="a;this.color=b;a=new" d;a.addattribute("position",new="" b([1,="" 1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3));a.computeboundingsphere();b="new" w({fog:!1});ea.call(this,a,b);a="new" b([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3));a.computeboundingsphere();this.add(new="" va(a,new="" xa({side:1,fog:!1})));this.update()}function="" qc(a,b,c){c.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;a=new" tb(b);a.rotatey(.5*math.pi);this.material="new" xa({wireframe:!0,fog:!1});void="" (this.material.vertexcolors="2);b=a.getAttribute(" position");b="new"" float32array(3*b.count);a.addattribute("color",new="" l(b,3));this.add(new="" va(a,this.material));this.update()}function="" od(a,b,c,d){a="a||10;b=b||10;c=new" h(void="" 0!="=c?c:4473924);d=new" e="b/2,f=a/b,g=a/2;a=[];for(var" h="[],k=0,m=0,q=-g;k<=b;k++,q+=f){a.push(-g,0,q,g,0,q);a.push(q,0,-g,q,0,g);var" l="k===e?c:d;l.toArray(h,m);m+=3;l.toArray(h,m);m+=3;l.toArray(h,m);m+=3;l.toArray(h,m);m+=3}b=new" d;b.addattribute("position",="" b(a,3));b.addattribute("color",new="" b(h,3));c="new" w({vertexcolors:2});u.call(this,b,c)}function="" ud(a,b,c,d,e,f){a="a||10;b=b||16;c=c||8;d=d||64;e=new" g="[],h=[],k;for(k=0;k<=b;k++){var" m="k/b*2*Math.PI;var" q="Math.sin(m)*a;m=Math.cos(m)*a;g.push(0,0,0);g.push(q,0,m);var" t="a-a/c*k;for(b=0;b<d;b++)m=b/d*2*Math.PI,q=Math.sin(m)*t,m=Math.cos(m)*t,g.push(q,0,m),h.push(l.r," l.g,l.b),m="(b+1)/d*2*Math.PI,q=Math.sin(m)*t,m=Math.cos(m)*t,g.push(q,0,m),h.push(l.r,l.g,l.b)}a=new" b(g,3));a.addattribute("color",new="" b(h,3));g="new" w({vertexcolors:2});u.call(this,a,g)}function="" rc(a,b,c,d){this.audio="a;this.range=b||1;this.divisionsInnerAngle=c||16;this.divisionsOuterAngle=d||2;a=new" d;b="new" float32array(3*(3*(this.divisionsinnerangle+2*this.divisionsouterangle)+3));a.addattribute("position",new="" l(b,3));b="new" w({color:65280});c="new" w({color:16776960});="" ea.call(this,a,[c,b]);this.update()}function="" pd(a,b,c,d){this.object="a;this.size=void" only="" three.geometry="" is="" supported.="" use="" three.vertexnormalshelper,="" instead.");c="new" b(6*b,3);c.addattribute("position",b);u.call(this,c,new="" w({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()}function" sc(a,b,c){c.call(this);this.light="a;this.light.updateMatrixWorld();" this.matrix="a.matrixWorld;this.matrixAutoUpdate=!1;this.color=c;void" b([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));b="new" w({fog:!1});this.lightplane="new" ea(a,b);this.add(this.lightplane);a="new" b([0,0,0,0,0,1],3));this.targetline="new" ea(a,b);this.add(this.targetline);this.update()}function="" qd(a){function="" b(a,b,d){c(a,d);c(b,d)}function="" c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void="" 3-1)}var="" d="new" d,e="new" w({color:16777215,vertexcolors:1}),f="[],g=[],h={},k=new" h(16755200),m="new" h(16711680),q="new" h(43775),l="new" h(16777215),t="new" h(3355443);b("n1","n2",k);b("n2","n4",k);b("n4","n3",k);b("n3","n1",k);b("f1","f2",k);b("f2","f4",k);b("f4","f3",k);b("f3","f1",k);b("n1","f1",k);b("n2","f2",k);b("n3","f3",k);b("n4","f4",k);b("p","n1",m);b("p","n2",m);b("p","n3",m);b("p","n4",m);b("u1","u2",q);b("u2","u3",q);b("u3","u1",q);b("c","t",l);b("p","c",t);b("cn1","cn2",t);b("cn3","cn4",t);b("cf1",="" "cf2",t);b("cf3","cf4",t);d.addattribute("position",new="" b(f,3));d.addattribute("color",new="" b(g,3));u.call(this,d,e);this.camera="a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function" cb(a,b){this.object="a;void" uint16array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var="" c="new" float32array(24),d="new" d;d.setindex(new="" l(a,1));d.addattribute("position",new="" l(c,="" 3));u.call(this,d,new="" w({color:b}));this.matrixautoupdate="!1;this.update()}function" rd(a,b){this.type="Box3Helper" ;this.box="a;a=void" d;c.setindex(new="" l(b,1));c.addattribute("position",new="" b([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));u.call(this,c,new="" w({color:a}));this.geometry.computeboundingsphere()}function="" sd(a,b,c){this.type="PlaneHelper" ;this.plane="a;this.size=void" b;a="void" d;b.addattribute("position",new="" b([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));b.computeboundingsphere();ea.call(this,b,new="" w({color:a}));b="new" b([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));b.computeboundingsphere();this.add(new="" va(b,new="" xa({color:a,opacity:.2,transparent:!0,depthwrite:!1})))}function="" db(a,b,c,d,e,f){c.call(this);void="" n(0,0,1));void="" n(0,0,0));void="" 1);void="" d,vd.addattribute("position",new="" b([0,0,0,0,1,0],3)),ge="new" ab(0,.5,1,5,1),ge.translate(0,-.5,0));this.position.copy(b);this.line="new" ea(vd,new="" w({color:d}));this.line.matrixautoupdate="!1;this.add(this.line);this.cone=new" va(ge,new="" xa({color:d}));this.cone.matrixautoupdate="!1;this.add(this.cone);this.setDirection(a);this.setLength(c,e,f)}function" td(a){a="a||1;var" d;="" a.addattribute("position",new="" b(b,3));a.addattribute("color",new="" b([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b="new" w({vertexcolors:2});u.call(this,a,b)}function="" jf(a){console.warn("three.closedsplinecurve3="" has="" been="" deprecated.="" three.catmullromcurve3="" instead.");oa.call(this,a);this.type="catmullrom" ;this.closed="!0}function" kf(a){console.warn("three.splinecurve3="" }function="" he(a){console.warn("three.spline="" removed.="" instead.");="" oa.call(this,a);this.type="catmullrom" }void="" a&&isfinite(a)&&math.floor(a)="==a});void">a?-1:0<a?1:+a});!1==="name"in 0="==Object.assign&&function(){Object.assign=function(a){if(void" function.prototype&&object.defineproperty(function.prototype,"name",{get:function(){return="" this.tostring().match(="" ^\s*function\s*([^\(\s]*)="" )[1]}});void="" a||null="==a)throw" new="" typeerror("cannot="" convert="" undefined="" or="" null="" to="" object");for(var="" b="Object(a),c=1;c<arguments.length;c++){var" d="arguments[c];if(void" 0!="=d&&null!==d)for(var" e="" in="" d)object.prototype.hasownproperty.call(d,e)&&(b[e]="d[e])}return" b}}();object.assign(ja.prototype,{addeventlistener:function(a,b){void="" c="this._listeners;void" var="" void="" g="{DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var" a="[],b=0;256">b;b++)a[b]=(16>b?"0":"")+b.toString(16);
return function(){var b=4294967295*Math.random()|0,d=4294967295*Math.random()|0,e=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return(a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[d&255]+a[d>>8&255]+"-"+a[d>>16&15|64]+a[d>>24&255]+"-"+a[e&63|128]+a[e>>8&255]+"-"+a[e>>16&255]+a[e>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]).toUpperCase()}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,
d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a="">=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a="">=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*G.DEG2RAD},radToDeg:function(a){return a*
G.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},ceilPowerOfTwo:function(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},floorPowerOfTwo:function(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}};Object.defineProperties(z.prototype,{width:{get:function(){return this.x},set:function(a){this.x=a}},height:{get:function(){return this.y},set:function(a){this.y=a}}});Object.assign(z.prototype,{isVector2:!0,set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=
this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},applyMatrix3:function(a){var b=this.x,c=this.y;a=a.elements;this.x=a[0]*b+a[3]*c+a[6];this.y=
a[1]*b+a[4]*c+a[7];return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a=new z,b=new z;return function(c,d){a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||
1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*
a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=
this.x-a.x;a=this.y-a.y;return b*b+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,
b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b);b=Math.sin(b);var d=this.x-a.x,e=this.y-a.y;this.x=d*c-e*b+a.x;this.y=d*b+e*c+a.y;return this}});Object.assign(J.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,k,m,q,l,t,v,r,n){var p=this.elements;
p[0]=a;p[4]=b;p[8]=c;p[12]=d;p[1]=e;p[5]=f;p[9]=g;p[13]=h;p[2]=k;p[6]=m;p[10]=q;p[14]=l;p[3]=t;p[7]=v;p[11]=r;p[15]=n;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new J).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=
this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new n;return function(b){var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,
2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[3]=0;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[7]=0;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c);c=Math.sin(c);var g=Math.cos(d);d=Math.sin(d);var h=Math.cos(e);e=Math.sin(e);if("XYZ"===a.order){a=
f*h;var k=f*e,m=c*h,q=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=k+m*d;b[5]=a-q*d;b[9]=-c*g;b[2]=q-a*d;b[6]=m+k*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,k=g*e,m=d*h,q=d*e,b[0]=a+q*c,b[4]=m*c-k,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=k*c-m,b[6]=q+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,k=g*e,m=d*h,q=d*e,b[0]=a-q*c,b[4]=-f*e,b[8]=m+k*c,b[1]=k+m*c,b[5]=f*h,b[9]=q-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,k=f*e,m=c*h,q=c*e,b[0]=g*h,b[4]=m*d-k,b[8]=a*d+q,b[1]=g*e,b[5]=q*d+a,b[9]=k*d-m,b[2]=-d,b[6]=c*
g,b[10]=f*g):"YZX"===a.order?(a=f*g,k=f*d,m=c*g,q=c*d,b[0]=g*h,b[4]=q-a*e,b[8]=m*e+k,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=k*e+m,b[10]=a-q*e):"XZY"===a.order&&(a=f*g,k=f*d,m=c*g,q=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+q,b[5]=f*h,b[9]=k*e-m,b[2]=m*e-k,b[6]=c*h,b[10]=q*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(){var a=new n(0,0,0),b=new n(1,1,1);return function(c){return this.compose(a,c,b)}}(),lookAt:function(){var a=new n,b=new n,
c=new n;return function(d,e,f){var g=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(f,c);0===a.lengthSq()&&(1===Math.abs(f.z)?c.x+=1E-4:c.z+=1E-4,c.normalize(),a.crossVectors(f,c));a.normalize();b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements;b=this.elements;a=c[0];var e=c[4],f=c[8],g=c[12],h=c[1],k=c[5],m=c[9],q=c[13],l=c[2],t=c[6],v=c[10],r=c[14],n=c[3],x=c[7],A=c[11];c=c[15];var w=d[0],I=d[4],y=d[8],N=d[12],z=d[1],F=d[5],B=d[9],D=d[13],C=d[2],G=d[6],E=d[10],H=d[14],L=d[3],J=d[7],K=d[11];d=d[15];b[0]=a*w+e*z+f*C+g*L;b[4]=a*I+e*F+f*G+g*J;b[8]=a*y+e*B+f*E+
g*K;b[12]=a*N+e*D+f*H+g*d;b[1]=h*w+k*z+m*C+q*L;b[5]=h*I+k*F+m*G+q*J;b[9]=h*y+k*B+m*E+q*K;b[13]=h*N+k*D+m*H+q*d;b[2]=l*w+t*z+v*C+r*L;b[6]=l*I+t*F+v*G+r*J;b[10]=l*y+t*B+v*E+r*K;b[14]=l*N+t*D+v*H+r*d;b[3]=n*w+x*z+A*C+c*L;b[7]=n*I+x*F+A*G+c*J;b[11]=n*y+x*B+A*E+c*K;b[15]=n*N+x*D+A*H+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=
new n;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix4(this),b.setxyz(c,a.x,a.y,a.z);return b}}(),determinant:function(){var="" a="this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],k=a[13],m=a[2],q=a[6],l=a[10],t=a[14];return" a[3]*(+e*h*q-d*k*q-e*g*l+c*k*l+d*g*t-c*h*t)+a[7]*(+b*h*t-b*k*l+e*f*l-d*f*t+d*k*m-e*h*m)+a[11]*(+b*k*q-b*g*t-e*f*q+c*f*t+e*g*m-c*k*m)+a[15]*(-d*g*m-b*h*q+b*g*l+d*f*q-c*f*l+c*h*m)},transpose:function(){var="" var="" b="a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return" this},setposition:function(a){var="" this},getinverse:function(a,b){var="" c="this.elements,d=a.elements;a=d[0];var" e="d[1],f=d[2],g=d[3],h=d[4],k=d[5],m=d[6],q=d[7],l=d[8],t=d[9],n=d[10],r=d[11],u=d[12],x=d[13],A=d[14];d=d[15];var" w="t*A*q-x*n*q+x*m*r-k*A*r-t*m*d+k*n*d,z=u*n*q-l*A*q-u*m*r+h*A*" r+l*m*d-h*n*d,y="l*x*q-u*t*q+u*k*r-h*x*r-l*k*d+h*t*d,N=u*t*m-l*x*m-u*k*n+h*x*n+l*k*A-h*t*A,B=a*w+e*z+f*y+g*N;if(0===B){if(!0===b)throw" error("three.matrix4:="" .getinverse()="" can't="" invert="" matrix,="" determinant="" is="" 0");console.warn("three.matrix4:="" 0");return="" this.identity()}b="1/B;c[0]=w*b;c[1]=(x*n*g-t*A*g-x*f*r+e*A*r+t*f*d-e*n*d)*b;c[2]=(k*A*g-x*m*g+x*f*q-e*A*q-k*f*d+e*m*d)*b;c[3]=(t*m*g-k*n*g-t*f*q+e*n*q+k*f*r-e*m*r)*b;c[4]=z*b;c[5]=(l*A*g-u*n*g+u*f*r-a*" a*r-l*f*d+a*n*d)*b;c[6]="(u*m*g-h*A*g-u*f*q+a*A*q+h*f*d-a*m*d)*b;c[7]=(h*n*g-l*m*g+l*f*q-a*n*q-h*f*r+a*m*r)*b;c[8]=y*b;c[9]=(u*t*g-l*x*g-u*e*r+a*x*r+l*e*d-a*t*d)*b;c[10]=(h*x*g-u*k*g+u*e*q-a*x*q-h*e*d+a*k*d)*b;c[11]=(l*k*g-h*t*g-l*e*q+a*t*q+h*e*r-a*k*r)*b;c[12]=N*b;c[13]=(l*x*f-u*t*f+u*e*n-a*x*n-l*e*A+a*t*A)*b;c[14]=(u*k*f-h*x*f-u*e*m+a*x*m+h*e*A-a*k*A)*b;c[15]=(h*t*f-l*k*f+l*e*m-a*t*m-h*e*n+a*k*n)*b;return" this},scale:function(a){var="" c;b[5]*="d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return" this},getmaxscaleonaxis:function(){var="" math.sqrt(math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},maketranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return="" this},makerotationx:function(a){var="" this},makerotationy:function(a){var="" this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return="" this},makerotationz:function(a){var="" this},makerotationaxis:function(a,b){var="" d="1-c,e=a.x,f=a.y;a=a.z;var" g="d*e,h=d*f;this.set(g*e+c,g*f-b*a,g*a+b*f,0,g*f+b*a,h*f+c,h*a-b*e,0,g*a-b*f,h*a+b*e,d*a*a+c,0,0,0,0,1);return" this},makescale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return="" this},makeshear:function(a,b,c){this.set(1,b,="" c,0,a,1,c,0,a,b,1,0,0,0,0,1);return="" this},compose:function(a,b,c){var="" p="e*m;e*=l;var" t="f*m;f*=l;g*=l;k*=h;m*=h;h*=l;l=c.x;var" n="c.y;c=c.z;d[0]=(1-(t+g))*l;d[1]=(p+h)*l;d[2]=(e-m)*l;d[3]=0;d[4]=(p-h)*n;d[5]=(1-(b+g))*n;d[6]=(f+k)*n;d[7]=0;d[8]=(e+m)*c;d[9]=(f-k)*c;d[10]=(1-(b+t))*c;d[11]=0;d[12]=a.x;d[13]=a.y;d[14]=a.z;d[15]=1;return" this},decompose:function(){var="" n,b="new" j;return="" function(c,d,e){var="" f="this.elements,g=a.set(f[0]," f[1],f[2]).length(),h="a.set(f[4],f[5],f[6]).length(),k=a.set(f[8],f[9],f[10]).length();0">this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.copy(this);c=1/g;f=1/h;var m=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=m;b.elements[9]*=m;b.elements[10]*=m;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),k=1/(c-d),m=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((c+d)*k);g[2]=0;g[6]=0;g[10]=-2*m;g[14]=-((f+e)*m);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;
a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(ka,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,
d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],k=c[d+1],m=c[d+2];c=c[d+3];d=e[f+0];var l=e[f+1],p=e[f+2];e=e[f+3];if(c!==e||h!==d||k!==l||m!==p){f=1-g;var t=h*d+k*l+m*p+c*e,n=0<=t?1:-1,r=1-t*t;r>Number.EPSILON&&(r=Math.sqrt(r),t=Math.atan2(r,t*n),f=Math.sin(f*t)/r,g=Math.sin(g*t)/r);n*=g;h=h*f+d*n;k=k*f+l*n;m=m*f+p*n;c=c*f+e*n;f===1-g&&(g=1/Math.sqrt(h*h+k*k+m*m+c*c),h*=g,k*=g,m*=g,c*=g)}a[b]=h;a[b+1]=k;a[b+2]=m;a[b+3]=c}});Object.defineProperties(ka.prototype,{x:{get:function(){return this._x},
set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=a;this.onChangeCallback()}}});Object.assign(ka.prototype,{isQuaternion:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,
this._y,this._z,this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=a._x,d=a._y,e=a._z;a=a.order;var f=Math.cos,g=Math.sin,h=f(c/2),k=f(d/2);f=f(e/2);c=g(c/2);d=g(d/2);e=g(e/2);"XYZ"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):"YXZ"===a?
(this._x=c*k*f+h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):"ZXY"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f-c*d*e):"ZYX"===a?(this._x=c*k*f-h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f+c*d*e):"YZX"===a?(this._x=c*k*f+h*d*e,this._y=h*d*f+c*k*e,this._z=h*k*e-c*d*f,this._w=h*k*f-c*d*e):"XZY"===a&&(this._x=c*k*f-h*d*e,this._y=h*d*f-c*k*e,this._z=h*k*e+c*d*f,this._w=h*k*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){b/=2;var c=Math.sin(b);this._x=a.x*c;this._y=a.y*c;this._z=a.z*c;this._w=Math.cos(b);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],k=b[6];b=b[10];var m=c+f+b;0<m?(c=.5 math.sqrt(m+1),this._w=".25/c,this._x=(k-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c">f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(k-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(g+k)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new n,b;return function(c,d){void 0===a&&(a=new n);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),angleTo:function(a){return 2*Math.acos(Math.abs(G.clamp(this.dot(a),-1,1)))},rotateTowards:function(a,
b){var c=this.angleTo(a);if(0===c)return this;this.slerp(a,Math.min(1,b/c));return this},inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=
this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z;a=a._w;
var f=b._x,g=b._y,h=b._z;b=b._w;this._x=c*b+a*f+d*h-e*g;this._y=d*b+a*g+e*f-c*h;this._z=e*b+a*h+c*g-d*f;this._w=a*b-c*f-d*g-e*h;this.onChangeCallback();return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return 0="==b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();" this._w="f,this._x=c,this._y=d,this._z=e,this;a=1-g*g;if(a<=Number.EPSILON)return" g="1-b,this._w=g*" f+b*this._w,this._x="g*c+b*this._x,this._y=g*d+b*this._y,this._z=g*e+b*this._z,this.normalize();a=Math.sqrt(a);var" h="Math.atan2(a,g);g=Math.sin((1-b)*h)/a;b=Math.sin(b*h)/a;this._w=f*g+this._w*b;this._x=c*g+this._x*b;this._y=d*g+this._y*b;this._z=e*g+this._z*b;this.onChangeCallback();return" this},equals:function(a){return="" a._x="==this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void" return="" this},toarray:function(a,b){void="" a},onchange:function(a){this.onchangecallback="a;return" this},onchangecallback:function(){}});object.assign(n.prototype,{isvector3:!0,set:function(a,b,c){this.x="a;this.y=b;this.z=c;return" this},setscalar:function(a){this.z="this.y=this.x=a;return" this},setx:function(a){this.x="a;return" this},sety:function(a){this.y="a;return" this},setz:function(a){this.z="a;return" this},="" setcomponent:function(a,b){switch(a){case="" 0:this.x="b;break;case" 1:this.y="b;break;case" 2:this.z="b;break;default:throw" error("index="" is="" out="" of="" range:="" "+a);}return="" this},getcomponent:function(a){switch(a){case="" 0:return="" this.x;case="" 1:return="" this.y;case="" 2:return="" this.z;default:throw="" "+a);}},clone:function(){return="" new="" this.constructor(this.x,this.y,this.z)},copy:function(a){this.x="a.x;this.y=a.y;this.z=a.z;return" this},add:function(a,b){if(void="" 0!="=b)return" console.warn("three.vector3:="" .add()="" now="" only="" accepts="" one="" argument.="" use="" .addvectors(="" a,="" b="" )="" instead."),="" this.addvectors(a,b);this.x+="a.x;this.y+=a.y;this.z+=a.z;return" this},addscalar:function(a){this.x+="a;this.y+=a;this.z+=a;return" this},addvectors:function(a,b){this.x="a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return" this},addscaledvector:function(a,b){this.x+="a.x*b;this.y+=a.y*b;this.z+=a.z*b;return" this},sub:function(a,b){if(void="" .sub()="" .subvectors(="" instead."),this.subvectors(a,b);this.x-="a.x;this.y-=a.y;this.z-=a.z;" this},subscalar:function(a){this.x-="a;this.y-=a;this.z-=a;return" this},subvectors:function(a,b){this.x="a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return" this},multiply:function(a,b){if(void="" .multiply()="" .multiplyvectors(="" instead."),this.multiplyvectors(a,b);this.x*="a.x;this.y*=a.y;this.z*=a.z;return" this},multiplyscalar:function(a){this.x*="a;this.y*=a;this.z*=a;return" this},multiplyvectors:function(a,b){this.x="a.x*" b.x;this.y="a.y*b.y;this.z=a.z*b.z;return" this},applyeuler:function(){var="" a="new" ka;return="" function(b){b&&b.iseuler||console.error("three.vector3:="" .applyeuler()="" expects="" an="" euler="" rotation="" rather="" than="" vector3="" and="" order.");return="" this.applyquaternion(a.setfromeuler(b))}}(),applyaxisangle:function(){var="" function(b,c){return="" this.applyquaternion(a.setfromaxisangle(b,c))}}(),applymatrix3:function(a){var="" b+a[4]*c+a[7]*d;this.z="a[2]*b+a[5]*c+a[8]*d;return" this},applymatrix4:function(a){var="" e="1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return" this},applyquaternion:function(a){var="" -g+h*-f-k*-e;return="" this},project:function(a){return="" this.applymatrix4(a.matrixworldinverse).applymatrix4(a.projectionmatrix)},unproject:function(){var="" j;return="" function(b){return="" this.applymatrix4(a.getinverse(b.projectionmatrix)).applymatrix4(b.matrixworld)}}(),transformdirection:function(a){var="" this.normalize()},divide:function(a){this.x="" =a.x;this.y="" =a.y;this.z="" =="" a.z;return="" this},dividescalar:function(a){return="" this.multiplyscalar(1="" a)},min:function(a){this.x="Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return" this},max:function(a){this.x="Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return" this},clamp:function(a,b){this.x="Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return" this},clampscalar:function(){var="" n,b="new" n;="" function(c,d){a.set(c,c,c);b.set(d,d,d);return="" this.clamp(a,b)}}(),clamplength:function(a,b){var="" c="this.length();return" this.dividescalar(c||1).multiplyscalar(math.max(a,math.min(b,c)))},floor:function(){this.x="Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return" this},ceil:function(){this.x="Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return" this},round:function(){this.x="Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);" this},roundtozero:function(){this.x="0">this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+
Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,
b)):this.crossVectors(this,a)},crossVectors:function(a,b){var c=a.x,d=a.y;a=a.z;var e=b.x,f=b.y;b=b.z;this.x=d*b-a*f;this.y=a*e-c*b;this.z=c*f-d*e;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new n;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new n;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=
this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(G.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},manhattanDistanceTo:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)},setFromSphericalCoords:function(a,b,c){var d=Math.sin(b)*a;this.x=
d*Math.sin(c);this.y=Math.cos(b)*a;this.z=d*Math.cos(c);return this},setFromCylindrical:function(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)},setFromCylindricalCoords:function(a,b,c){this.x=a*Math.sin(b);this.y=c;this.z=a*Math.cos(b);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,
2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");
this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(ra.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,k){var m=this.elements;m[0]=a;m[1]=d;m[2]=g;m[3]=b;m[4]=e;m[5]=h;m[6]=c;m[7]=f;m[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=
a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new n;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix3(this),b.setxyz(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return="" this.multiplymatrices(this,a)},premultiply:function(a){return="" this.multiplymatrices(a,this)},multiplymatrices:function(a,b){var="" c="a.elements,d=b.elements;" b="this.elements;a=c[0];var" e="c[3],f=c[6],g=c[1],h=c[4],k=c[7],m=c[2],l=c[5];c=c[8];var" p="d[0],t=d[3],n=d[6],r=d[1],u=d[4],x=d[7],A=d[2],w=d[5];d=d[8];b[0]=a*p+e*r+f*A;b[3]=a*t+e*u+f*w;b[6]=a*n+e*x+f*d;b[1]=g*p+h*r+k*A;b[4]=g*t+h*u+k*w;b[7]=g*n+h*x+k*d;b[2]=m*p+l*r+c*A;b[5]=m*t+l*u+c*w;b[8]=m*n+l*x+c*d;return" this},multiplyscalar:function(a){var="" this},determinant:function(){var="" a="this.elements,b=a[0],c=a[1]," d="a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7];a=a[8];return" b*f*a-b*g*k-c*e*a+c*g*h+d*e*k-d*f*h},getinverse:function(a,b){a&&a.ismatrix4&&console.error("three.matrix3:="" .getinverse()="" no="" longer="" takes="" matrix4="" argument.");var="" error("three.matrix3:="" can't="" invert="" matrix,="" determinant="" is="" 0");console.warn("three.matrix3:="" 0");="" return="" this.identity()}b="1/r;a[0]=p*b;a[1]=(f*l-c*e)*b;a[2]=(k*e-f*h)*b;a[3]=t*b;a[4]=(c*d-f*m)*b;a[5]=(f*g-k*d)*b;a[6]=n*b;a[7]=(e*m-l*d)*b;a[8]=(h*d-e*g)*b;return" this},transpose:function(){var="" this},getnormalmatrix:function(a){return="" this.setfrommatrix4(a).getinverse(this).transpose()},transposeintoarray:function(a){var="" b[2];a[7]="b[5];a[8]=b[8];return" this},setuvtransform:function(a,b,c,d,e,f,g){var="" h="Math.cos(e);e=Math.sin(e);this.set(c*h,c*e,-c*(h*f+e*g)+f+a,-d*e,d*h,-d*(-e*f+h*g)+g+b,0,0,1)},scale:function(a,b){var" this},rotate:function(a){var="" this},translate:function(a,="" b){var="" this},equals:function(a){var="">c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];
return a}});var tc,kb={getDataURL:function(a){if("undefined"==typeof HTMLCanvasElement)return a.src;if(!(a instanceof HTMLCanvasElement)){void 0===tc&&(tc=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));tc.width=a.width;tc.height=a.height;var b=tc.getContext("2d");a instanceof ImageData?b.putImageData(a,0,0):b.drawImage(a,0,0,a.width,a.height);a=tc}return 2048<a.width||2048<a.height?a.todataurl("image 0="==a||" string"="==typeof"" jpeg",.6):a.todataurl("image="" png")}},pf="0;S.DEFAULT_IMAGE=void" 0;s.default_mapping="300;S.prototype=Object.assign(Object.create(ja.prototype),{constructor:S,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new" this.constructor).copy(this)},copy:function(a){this.name="a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=" a.anisotropy;this.format="a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return" this},tojson:function(a){var="" b="void" a;if(!b&&void="" 0!="=a.textures[this.uuid])return" a.textures[this.uuid];="" var="" c="{metadata:{version:4.5,type:" texture",generator:"texture.tojson"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wraps,this.wrapt],format:this.format,type:this.type,encoding:this.encoding,minfilter:this.minfilter,magfilter:this.magfilter,anisotropy:this.anisotropy,flipy:this.flipy,premultiplyalpha:this.premultiplyalpha,unpackalignment:this.unpackalignment};"="" if(void="" d="this.image;void" e="[];for(var" f="0,g=d.length;f<g;f++)e.push(kb.getDataURL(d[f]))}else" c},dispose:function(){this.dispatchevent({type:"dispose"})},transformuv:function(a){if(300!="=this.mapping)return" a;a.applymatrix3(this.matrix);if(0="">a.x||1<a.x)switch(this.wraps){case 1e3:a.x-="Math.floor(a.x);break;case" 1001:a.x="0">a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapt){case 1e3:a.y-="Math.floor(a.y);break;case" 1001:a.y="0">a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y);return a}});Object.defineProperty(S.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(V.prototype,{isVector4:!0,set:function(a,
b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},
addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=
a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/
a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){a=a.elements;var b=a[0];var c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9];var h=a[2];var k=a[6];var m=a[10];if(.01>Math.abs(c-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(c+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(b+f+m-3))return this.set(1,0,0,0),this;a=Math.PI;
b=(b+1)/2;f=(f+1)/2;m=(m+1)/2;c=(c+e)/4;d=(d+h)/4;g=(g+k)/4;b>f&&b>m?.01>b?(k=0,c=h=.707106781):(k=Math.sqrt(b),h=c/k,c=d/k):f>m?.01>f?(k=.707106781,h=0,c=.707106781):(h=Math.sqrt(f),k=c/h,c=g/h):.01>m?(h=k=.707106781,c=0):(c=Math.sqrt(m),k=d/c,h=g/c);this.set(k,h,c,a);return this}a=Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-c)*(e-c));.001>Math.abs(a)&&(a=1);this.x=(k-g)/a;this.y=(d-h)/a;this.z=(e-c)/a;this.w=Math.acos((b+f+m-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,
a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new V,b=new V);a.set(c,
c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);
this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,
b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");
this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}});Qa.prototype=Object.assign(Object.create(ja.prototype),{constructor:Qa,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();
this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Yd.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Yd,isWebGLMultisampleRenderTarget:!0,copy:function(a){Qa.prototype.copy.call(this,a);this.samples=a.samples;return this}});Jb.prototype=Object.create(Qa.prototype);Jb.prototype.constructor=Jb;Jb.prototype.isWebGLRenderTargetCube=!0;lb.prototype=Object.create(S.prototype);
lb.prototype.constructor=lb;lb.prototype.isDataTexture=!0;Object.assign(Ya.prototype,{isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromArray:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.length;h<k;h+=3){var m="a[h],l=a[h+1],p=a[h+2];m<b&&(b=m);l<c&&(c=l);p<d&&(d=p);m">e&&(e=m);l>f&&(f=l);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,
d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=a.count;h<k;h++){var m="a.getX(h),l=a.getY(h),p=a.getZ(h);m<b&&(b=m);l<c&&(c=l);p<d&&(d=p);m">e&&(e=m);l>f&&(f=l);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandbypoint(a[b]);return 0="==a&&(console.warn(" three.box3:"="" this},setfromcenterandsize:function(){var="" a="new" n;return="" function(b,c){c="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return" this}}(),="" setfromobject:function(a){this.makeempty();return="" this.expandbyobject(a)},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return="" this},makeempty:function(){this.min.x="this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return" this},isempty:function(){return="" this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getcenter:function(a){void="" .getcenter()="" target="" is="" now="" required"),="" n);return="" this.isempty()?a.set(0,0,0):a.addvectors(this.min,this.max).multiplyscalar(.5)},getsize:function(a){void="" .getsize()="" required"),a="new" this.isempty()?a.set(0,0,0):a.subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);return="" this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return="" this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return="" this},expandbyobject:function(){function="" a(a){var="" f="a.geometry;if(void" 0!="=f)if(f.isGeometry)for(f=f.vertices,c=0,d=f.length;c<d;c++)e.copy(f[c]),e.applyMatrix4(a.matrixWorld),b.expandByPoint(e);else" if(f.isbuffergeometry&&(f="f.attributes.position,void" b,c,d,e="new" function(c){b="this;c.updateMatrixWorld(!0);c.traverse(a);return" this}}(),containspoint:function(a){return="" a.x<this.min.x||a.x="">this.max.x||a.y<this.min.y||a.y>this.max.y||
a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getparameter:function(a,b){void 0="==b&&(console.warn(" three.box3:"="" .getparameter()="" target="" is="" now="" required"),b="new" n);return="" b.set((a.x-this.min.x)="" (this.max.x-this.min.x),(a.y-this.min.y)="" (this.max.y-this.min.y),(a.z-this.min.z)="" (this.max.z-this.min.z))},intersectsbox:function(a){return="" a.max.x<this.min.x||="" a.min.x="">this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a=new n;return function(b){this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsplane:function(a){if(0<a.normal.x){var b="a.normal.x*this.min.x;var" c="a.normal.x*this.max.x}else" a.normal.y*this.min.y);0<a.normal.z?(b+="a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return" b<="-a.constant&&c">=-a.constant},intersectsTriangle:function(){function a(a){var e;var f=0;for(e=a.length-3;f<=e;f+=3){h.fromarray(a,f);var g="m.x*Math.abs(h.x)+m.y*Math.abs(h.y)+m.z*Math.abs(h.z),k=b.dot(h),l=c.dot(h),q=d.dot(h);if(Math.max(-Math.max(k,l,q),Math.min(k,l,q))">g)return!1}return!0}var b=new n,c=new n,d=new n,e=new n,f=new n,g=new n,h=new n,
k=new n,m=new n,l=new n;return function(h){if(this.isEmpty())return!1;this.getCenter(k);m.subVectors(this.max,k);b.subVectors(h.a,k);c.subVectors(h.b,k);d.subVectors(h.c,k);e.subVectors(c,b);f.subVectors(d,c);g.subVectors(b,d);h=[0,-e.z,e.y,0,-f.z,f.y,0,-g.z,g.y,e.z,0,-e.x,f.z,0,-f.x,g.z,0,-g.x,-e.y,e.x,0,-f.y,f.x,0,-g.y,g.x,0];if(!a(h))return!1;h=[1,0,0,0,1,0,0,0,1];if(!a(h))return!1;l.crossVectors(e,f);h=[l.x,l.y,l.z];return a(h)}}(),clampPoint:function(a,b){void 0===b&&(console.warn("THREE.Box3: .clampPoint() target is now required"),
b=new n);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new n;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new n;return function(b){void 0===b&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),b=new Ga);this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},
union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new n,new n,new n,new n,new n,new n,new n,new n];return function(b){if(this.isEmpty())return this;a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,
this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Ga.prototype,{set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a=new Ya;return function(b,c){var d=this.center;
void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=c=0,f=b.length;e<f;e++)c=math.max(c,d.distancetosquared(b[e]));this.radius=math.sqrt(c);return 0="" this}}(),clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.center.copy(a.center);this.radius="a.radius;return" this},empty:function(){return="">=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distancetopoint:function(a){return 0="==b&&(console.warn(" three.sphere:"="" a.distanceto(this.center)-this.radius},="" intersectssphere:function(a){var="" b="this.radius+a.radius;return" a.center.distancetosquared(this.center)<="b*b},intersectsBox:function(a){return" a.intersectssphere(this)},intersectsplane:function(a){return="" math.abs(a.distancetopoint(this.center))<="this.radius},clampPoint:function(a,b){var" c="this.center.distanceToSquared(a);void" .clamppoint()="" target="" is="" now="" required"),b="new" n);b.copy(a);c="">this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));
return b},getBoundingBox:function(a){void 0===a&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),a=new Ya);a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}});Object.assign(Ra.prototype,{set:function(a,b){this.normal.copy(a);
this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new n,b=new n;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);
this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){void 0===b&&(console.warn("THREE.Plane: .projectPoint() target is now required"),b=new n);return b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)},
intersectLine:function(){var a=new n;return function(b,c){void 0===c&&(console.warn("THREE.Plane: .intersectLine() target is now required"),c=new n);var d=b.delta(a),e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(b.start))return c.copy(b.start)}else if(e=-(b.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return 0="" c.copy(d).multiplyscalar(e).add(b.start)}}(),intersectsline:function(a){var="" b="this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return">b&&0<a||0>a&&0<b},intersectsbox:function(a){return 0="==a&&(console.warn(" three.plane:"="" a.intersectsplane(this)},="" intersectssphere:function(a){return="" a.intersectsplane(this)},coplanarpoint:function(a){void="" .coplanarpoint()="" target="" is="" now="" required"),a="new" n);return="" a.copy(this.normal).multiplyscalar(-this.constant)},applymatrix4:function(){var="" a="new" n,b="new" ra;return="" function(c,d){d="d||b.getNormalMatrix(c);c=this.coplanarPoint(a).applyMatrix4(c);d=this.normal.applyMatrix3(d).normalize();this.constant=-c.dot(d);return" this}}(),translate:function(a){this.constant-="a.dot(this.normal);" return="" this},equals:function(a){return="" a.normal.equals(this.normal)&&a.constant="==this.constant}});Object.assign(ud.prototype,{set:function(a,b,c,d,e,f){var" g="this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);g[5].copy(f);return" this},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){for(var="" b="this.planes,c=0;6">c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],
h=c[5],k=c[6],m=c[7],l=c[8],p=c[9],t=c[10],n=c[11],r=c[12],u=c[13],x=c[14];c=c[15];b[0].setComponents(f-a,m-g,n-l,c-r).normalize();b[1].setComponents(f+a,m+g,n+l,c+r).normalize();b[2].setComponents(f+d,m+h,n+p,c+u).normalize();b[3].setComponents(f-d,m-h,n-p,c-u).normalize();b[4].setComponents(f-e,m-k,n-t,c-x).normalize();b[5].setComponents(f+e,m+k,n+t,c+x).normalize();return this},intersectsObject:function(){var a=new Ga;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();
a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ga;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsbox:function(){var a="new" n;return="" function(b){for(var="" c="this.planes,d=0;6">d;d++){var e=c[d];
a.x=0<e.normal.x?b.max.x:b.min.x;a.y=0<e.normal.y?b.max.y:b.min.y;a.z=0<e.normal.z?b.max.z:b.min.z;if(0>e.distanceToPoint(a))return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}});var O={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",
aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",
color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",
emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",
lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",
map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",
metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0,="" shadowcoord.y="">= 0.0, shadowCoord.y <= 1.0="" );\n\t\tbool="" infrustum="all(" infrustumvec="" );\n\t\tbvec2="" frustumtestvec="bvec2(" infrustum,="" shadowcoord.z="" <="1.0" frustumtest="all(" );\n\t\tif="" (="" )="" {\n\t\t#if="" defined(="" shadowmap_type_pcf="" )\n\t\t\tvec2="" texelsize="vec2(" shadowmapsize;\n\t\t\tfloat="" dx0="-" texelsize.x="" *="" shadowradius;\n\t\t\tfloat="" dy0="-" texelsize.y="" dx1="+" dy1="+" shadowradius;\n\t\t\tshadow="(\n\t\t\t\ttexture2DCompare(" shadowmap,="" shadowcoord.xy="" +="" vec2(="" dx0,="" ),="" +\n\t\t\t\ttexture2dcompare(="" 0.0,="" dx1,="" 0.0="" shadowcoord.xy,="" )\n\t\t\t)="" 9.0="" );\n\t\t#elif="" shadowmap_type_pcf_soft="" shadowmapsize,="" +\n\t\t\t\ttexture2dshadowlerp(="" );\n\t\t#else\n\t\t\tshadow="texture2DCompare(" );\n\t\t#endif\n\t\t}\n\t\treturn="" shadow;\n\t}\n\tvec2="" cubetouv(="" vec3="" v,="" float="" texelsizey="" {\n\t\tvec3="" absv="abs(" v="" );\n\t\tfloat="" scaletocube="1.0" max(="" absv.x,="" absv.y,="" absv.z="" );\n\t\tabsv="" -="" 2.0="" );\n\t\tvec2="" planar="v.xy;\n\t\tfloat" almostatexel="1.5" texelsizey;\n\t\tfloat="" almostone="1.0" almostatexel;\n\t\tif="">= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",
uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",
uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",
cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},
dh={clone:Kb,merge:na},eh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,
teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(H.prototype,{isColor:!0,r:1,g:1,b:1,set:function(a){a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;
return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1="" 6?a+6*(c-a)*d:.5="">d?c:d<2 3?a+6*(c-a)*(2="" 3-d):a}return="" function(b,c,d){b="G.euclideanModulo(b,1);c=G.clamp(c,0,1);d=G.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5">=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+
a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],
10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){d=parseFloat(c[1])/360;var e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),
16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=eh[a],void 0="==b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g," 0!="=c?this.setHex(c):console.warn(" three.color:"="" unknown="" color="" "+a));return="" this},clone:function(){return="" new="" this.constructor(this.r,this.g,this.b)},copy:function(a){this.r="a.r;this.g=a.g;this.b=a.b;return" this},copygammatolinear:function(a,b){void="" b);this.b="Math.pow(a.b,b);return" this},copylineartogamma:function(a,b){void="" this},convertgammatolinear:function(a){this.copygammatolinear(this,a);return="" this},convertlineartogamma:function(a){this.copylineartogamma(this,a);return="" this},copysrgbtolinear:function(){function="" a(a){return.04045="">a?.0773993808*a:Math.pow(.9478672986*a+.0521327014,2.4)}return function(b){this.r=a(b.r);this.g=a(b.g);this.b=
a(b.b);return this}}(),copyLinearToSRGB:function(){function a(a){return.0031308>a?12.92*a:1.055*Math.pow(a,.41666)-.055}return function(b){this.r=a(b.r);this.g=a(b.g);this.b=a(b.b);return this}}(),convertSRGBToLinear:function(){this.copySRGBToLinear(this);return this},convertLinearToSRGB:function(){this.copyLinearToSRGB(this);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},gethexstring:function(){return("000000"+this.gethex().tostring(16)).slice(-6)},gethsl:function(a){void 0="==" a&&(console.warn("three.color:="" .gethsl()="" target="" is="" now="" required"),a="{h:0,s:0,l:0});var" b="this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var" k="e-f;f=.5">=h?k/(e+f):k/(2-e-f);switch(e){case b:g=(c-d)/k+(c<d?6:0);break;case 0="==b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return" c:g="(d-b)/k+2;break;case" d:g="(b-c)/k+4}g/=6}a.h=g;a.s=f;a.l=h;return" a},getstyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsethsl:function(){var="" a="{};return" function(b,c,d){this.gethsl(a);a.h+="b;a.s+=c;a.l+=d;this.setHSL(a.h,a.s,a.l);return" this}}(),add:function(a){this.r+="a.r;this.g+=a.g;this.b+=a.b;return" this},addcolors:function(a,b){this.r="a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return" this},addscalar:function(a){this.r+="a;this.g+=a;this.b+=a;return" this},sub:function(a){this.r="Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return" this},multiply:function(a){this.r*="a.r;this.g*=a.g;this.b*=a.b;return" this},multiplyscalar:function(a){this.r*="a;this.g*=" a;this.b*="a;return" this},lerp:function(a,b){this.r+="(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return" this},lerphsl:function(){var="" function(c,d){this.gethsl(a);c.gethsl(b);c="G.lerp(a.h,b.h,d);var" e="G.lerp(a.s,b.s,d);d=G.lerp(a.l,b.l,d);this.setHSL(c,e,d);return" this}}(),equals:function(a){return="" a.r="==this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void" this},toarray:function(a,="" b){void="" a},tojson:function(){return="" this.gethex()}});var="" h(15658734)},opacity:{value:1},map:{value:null},uvtransform:{value:new="" ra},alphamap:{value:null}},specularmap:{specularmap:{value:null}},envmap:{envmap:{value:null},flipenvmap:{value:-1},reflectivity:{value:1},refractionratio:{value:.98},maxmiplevel:{value:0}},aomap:{aomap:{value:null},aomapintensity:{value:1}},lightmap:{lightmap:{value:null},="" lightmapintensity:{value:1}},emissivemap:{emissivemap:{value:null}},bumpmap:{bumpmap:{value:null},bumpscale:{value:1}},normalmap:{normalmap:{value:null},normalscale:{value:new="" z(1,1)}},displacementmap:{displacementmap:{value:null},displacementscale:{value:1},displacementbias:{value:0}},roughnessmap:{roughnessmap:{value:null}},metalnessmap:{metalnessmap:{value:null}},gradientmap:{gradientmap:{value:null}},fog:{fogdensity:{value:2.5e-4},fognear:{value:1},fogfar:{value:2e3},fogcolor:{value:new="" h(16777215)}},="" lights:{ambientlightcolor:{value:[]},directionallights:{value:[],properties:{direction:{},color:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{}}},directionalshadowmap:{value:[]},directionalshadowmatrix:{value:[]},spotlights:{value:[],properties:{color:{},position:{},direction:{},distance:{},conecos:{},penumbracos:{},decay:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{}}},spotshadowmap:{value:[]},spotshadowmatrix:{value:[]},pointlights:{value:[],properties:{color:{},position:{},="" decay:{},distance:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{},shadowcameranear:{},shadowcamerafar:{}}},pointshadowmap:{value:[]},pointshadowmatrix:{value:[]},hemispherelights:{value:[],properties:{direction:{},skycolor:{},groundcolor:{}}},rectarealights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new="" h(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvtransform:{value:new="" ra}},sprite:{diffuse:{value:new="" h(15658734)},="" opacity:{value:1},center:{value:new="" z(.5,.5)},rotation:{value:0},map:{value:null},uvtransform:{value:new="" ra}}},sa="{basic:{uniforms:na([E.common,E.specularmap,E.envmap,E.aomap,E.lightmap,E.fog]),vertexShader:O.meshbasic_vert,fragmentShader:O.meshbasic_frag},lambert:{uniforms:na([E.common,E.specularmap,E.envmap,E.aomap,E.lightmap,E.emissivemap,E.fog,E.lights,{emissive:{value:new" h(0)}}]),vertexshader:o.meshlambert_vert,fragmentshader:o.meshlambert_frag},phong:{uniforms:na([e.common,e.specularmap,e.envmap,="" e.aomap,e.lightmap,e.emissivemap,e.bumpmap,e.normalmap,e.displacementmap,e.gradientmap,e.fog,e.lights,{emissive:{value:new="" h(0)},specular:{value:new="" h(1118481)},shininess:{value:30}}]),vertexshader:o.meshphong_vert,fragmentshader:o.meshphong_frag},standard:{uniforms:na([e.common,e.envmap,e.aomap,e.lightmap,e.emissivemap,e.bumpmap,e.normalmap,e.displacementmap,e.roughnessmap,e.metalnessmap,e.fog,e.lights,{emissive:{value:new="" h(0)},roughness:{value:.5},metalness:{value:.5},envmapintensity:{value:1}}]),="" vertexshader:o.meshphysical_vert,fragmentshader:o.meshphysical_frag},matcap:{uniforms:na([e.common,e.bumpmap,e.normalmap,e.displacementmap,e.fog,{matcap:{value:null}}]),vertexshader:o.meshmatcap_vert,fragmentshader:o.meshmatcap_frag},points:{uniforms:na([e.points,e.fog]),vertexshader:o.points_vert,fragmentshader:o.points_frag},dashed:{uniforms:na([e.common,e.fog,{scale:{value:1},dashsize:{value:1},totalsize:{value:2}}]),vertexshader:o.linedashed_vert,fragmentshader:o.linedashed_frag},depth:{uniforms:na([e.common,="" e.displacementmap]),vertexshader:o.depth_vert,fragmentshader:o.depth_frag},normal:{uniforms:na([e.common,e.bumpmap,e.normalmap,e.displacementmap,{opacity:{value:1}}]),vertexshader:o.normal_vert,fragmentshader:o.normal_frag},sprite:{uniforms:na([e.sprite,e.fog]),vertexshader:o.sprite_vert,fragmentshader:o.sprite_frag},background:{uniforms:{uvtransform:{value:new="" ra},t2d:{value:null}},vertexshader:o.background_vert,fragmentshader:o.background_frag},cube:{uniforms:{tcube:{value:null},tflip:{value:-1},="" opacity:{value:1}},vertexshader:o.cube_vert,fragmentshader:o.cube_frag},equirect:{uniforms:{tequirect:{value:null}},vertexshader:o.equirect_vert,fragmentshader:o.equirect_frag},distancergba:{uniforms:na([e.common,e.displacementmap,{referenceposition:{value:new="" n},neardistance:{value:1},fardistance:{value:1e3}}]),vertexshader:o.distancergba_vert,fragmentshader:o.distancergba_frag},shadow:{uniforms:na([e.lights,e.fog,{color:{value:new="" h(0)},opacity:{value:1}}]),vertexshader:o.shadow_vert,fragmentshader:o.shadow_frag}};="" sa.physical="{uniforms:na([Sa.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:O.meshphysical_vert,fragmentShader:O.meshphysical_frag};Object.assign(Lb.prototype,{clone:function(){return(new" this.constructor).copy(this)},copy:function(a){this.a="a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var" b="0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<" c;b++)this.vertexcolors[b]="a.vertexColors[b].clone();return" this}});mb.rotationorders="XYZ YZX ZXY XZY YXZ ZYX" .split("="" ");mb.defaultorder="XYZ" ;object.defineproperties(mb.prototype,{x:{get:function(){return="" this._x},set:function(a){this._x="a;this.onChangeCallback()}},y:{get:function(){return" this._y},set:function(a){this._y="a;this.onChangeCallback()}},z:{get:function(){return" this._z},set:function(a){this._z="a;this.onChangeCallback()}},order:{get:function(){return" this._order},set:function(a){this._order="a;this.onChangeCallback()}}});Object.assign(mb.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return" this},clone:function(){return="" new="" this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x="a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return" this},setfromrotationmatrix:function(a,b,c){var="" d="G.clamp,e=a.elements;a=e[0];var" f="e[4],g=e[8],h=e[1],k=e[5],m=e[9],l=e[2],p=" e[6];e="e[10];b=b||this._order;" xyz"="==b?(this._y=Math.asin(d(g,-1,1)),.99999"">Math.abs(g)?(this._x=Math.atan2(-m,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(p,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-l,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-f,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(l,
-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,k))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-m,k),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(p,k),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-m,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=
b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new J;return function(b,c,d){a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ka;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=
a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new n(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});Object.assign($d.prototype,{set:function(a){this.mask=1<<a|0},enable:function(a){this.mask= 0="==a&&(console.warn(" three.object3d:"="" this.mask|1<<a|0},toggle:function(a){this.mask^="1<<a|0},disable:function(a){this.mask&=~(1<<a|0)},test:function(a){return" 0!="=(this.mask&a.mask)}});var" rf="0;C.DefaultUp=new" n(0,1,0);c.defaultmatrixautoupdate="!0;C.prototype=Object.assign(Object.create(ja.prototype),{constructor:C,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);" return="" this},setrotationfromaxisangle:function(a,b){this.quaternion.setfromaxisangle(a,b)},setrotationfromeuler:function(a){this.quaternion.setfromeuler(a,!0)},setrotationfrommatrix:function(a){this.quaternion.setfromrotationmatrix(a)},setrotationfromquaternion:function(a){this.quaternion.copy(a)},rotateonaxis:function(){var="" a="new" ka;return="" function(b,c){a.setfromaxisangle(b,c);this.quaternion.multiply(a);return="" this}}(),rotateonworldaxis:function(){var="" function(b,c){a.setfromaxisangle(b,="" c);this.quaternion.premultiply(a);return="" this}}(),rotatex:function(){var="" n(1,0,0);return="" function(b){return="" this.rotateonaxis(a,b)}}(),rotatey:function(){var="" n(0,1,0);return="" this.rotateonaxis(a,b)}}(),rotatez:function(){var="" n(0,0,1);return="" this.rotateonaxis(a,b)}}(),translateonaxis:function(){var="" n;return="" function(b,c){a.copy(b).applyquaternion(this.quaternion);this.position.add(a.multiplyscalar(c));return="" this}}(),translatex:function(){var="" this.translateonaxis(a,b)}}(),translatey:function(){var="" this.translateonaxis(a,b)}}(),translatez:function(){var="" this.translateonaxis(a,b)}}(),localtoworld:function(a){return="" a.applymatrix4(this.matrixworld)},worldtolocal:function(){var="" j;return="" b.applymatrix4(a.getinverse(this.matrixworld))}}(),lookat:function(){var="" ka,b="new" j,c="new" n,d="new" function(e,="" f,g){e.isvector3?c.copy(e):c.set(e,f,g);e="this.parent;this.updateWorldMatrix(!0,!1);d.setFromMatrixPosition(this.matrixWorld);this.isCamera||this.isLight?b.lookAt(d,c,this.up):b.lookAt(c,d,this.up);this.quaternion.setFromRotationMatrix(b);e&&(b.extractRotation(e.matrixWorld),a.setFromRotationMatrix(b),this.quaternion.premultiply(a.inverse()))}}(),add:function(a){if(1<arguments.length){for(var" b="0;b<arguments.length;b++)this.add(arguments[b]);return" this}if(a="==this)return" console.error("three.object3d.add:="" object="" can't="" be="" added="" as="" child="" of="" itself.",="" a),this;a&&a.isobject3d?(null!="=a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:" added"}),this.children.push(a)):console.error("three.object3d.add:"="" not="" an="" instance="" three.object3d.",a);return="" this},remove:function(a){if(1<arguments.length){for(var="" this}b="this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:" removed"}),this.children.splice(b,1));return"="" this},getobjectbyid:function(a){return="" this.getobjectbyproperty("id",="" a)},getobjectbyname:function(a){return="" this.getobjectbyproperty("name",a)},getobjectbyproperty:function(a,b){if(this[a]="==b)return" this;for(var="" c="0,d=this.children.length;c<d;c++){var" e="this.children[c].getObjectByProperty(a,b);if(void" e}},getworldposition:function(a){void="" .getworldposition()="" target="" is="" now="" required"),a="new" n);this.updatematrixworld(!0);return="" a.setfrommatrixposition(this.matrixworld)},getworldquaternion:function(){var="" n,b="new" n;="" function(c){void="" .getworldquaternion()="" required"),c="new" ka);this.updatematrixworld(!0);this.matrixworld.decompose(a,c,b);return="" c}}(),getworldscale:function(){var="" .getworldscale()="" n);this.updatematrixworld(!0);this.matrixworld.decompose(a,b,c);return="" c}}(),getworlddirection:function(a){void="" .getworlddirection()="" required"),="" n);this.updatematrixworld(!0);var="" a.set(b[8],b[9],b[10]).normalize()},raycast:function(){},traverse:function(a){a(this);for(var="" this.quaternion,this.scale);this.matrixworldneedsupdate="!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var" this.updatematrix();null="==this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);if(!0===b)for(a=this.children,b=0,c=a.length;b<c;b++)a[b].updateWorldMatrix(!1,!0)},toJSON:function(a){function" b(b,c){void="" c.uuid}function="" c(a){var="" in="" a){var="" d="a[c];delete" d.metadata;b.push(d)}return="" b}var="" a,e="{};d&&(a={geometries:{},materials:{},textures:{},images:{}," shapes:{}},e.metadata="{version:4.5,type:" object",generator:"object3d.tojson"});var"="" f="{};f.uuid=this.uuid;f.type=this.type;" "!="=this.name&&(f.name=this.name);!0===this.castShadow&&(f.castShadow=!0);!0===this.receiveShadow&&(f.receiveShadow=!0);!1===this.visible&&(f.visible=!1);!1===this.frustumCulled&&(f.frustumCulled=!1);0!==this.renderOrder&&(f.renderOrder=this.renderOrder);"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData);f.layers=this.layers.mask;f.matrix=this.matrix.toArray();!1==="" this.matrixautoupdate&&(f.matrixautoupdate="!1);this.isMesh&&0!==this.drawMode&&(f.drawMode=this.drawMode);if(this.isMesh||this.isLine||this.isPoints){f.geometry=b(a.geometries,this.geometry);var" g="this.geometry.parameters;if(void" h="0,k=g.length;h<k;h++)b(a.shapes,g[h]);else" b(a.shapes,g)}if(void="" g}else="" f.material="b(a.materials,this.material);if(0<this.children.length)for(f.children=[],h=0;h<this.children.length;h++)f.children.push(this.children[h].toJSON(a).object);if(d){d=c(a.geometries);h=c(a.materials);k=c(a.textures);var" m="c(a.images);g=c(a.shapes);0<d.length&&(e.geometries=d);0<h.length&&(e.materials=h);0<k.length&&(e.textures=k);0<m.length&&(e.images=m);0<g.length&&(e.shapes=g)}e.object=f;return" e},clone:function(a){return(new="" this.constructor).copy(this,a)},copy:function(a,b){void="" b&&(b="!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));" if(!0="==b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());return" this}});var="" sf="0;R.prototype=Object.assign(Object.create(ja.prototype),{constructor:R,isGeometry:!0,applyMatrix:function(a){for(var" ra).getnormalmatrix(a),c="0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();for(var" this.computeboundingbox();null!="=this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return" this},rotatex:function(){var="" function(b){a.makerotationx(b);this.applymatrix(a);return="" this}}(),rotatey:function(){var="" function(b){a.makerotationy(b);this.applymatrix(a);return="" this}}(),rotatez:function(){var="" function(b){a.makerotationz(b);this.applymatrix(a);return="" this}}(),translate:function(){var="" function(b,="" c,d){a.maketranslation(b,c,d);this.applymatrix(a);return="" this}}(),scale:function(){var="" function(b,c,d){a.makescale(b,c,d);this.applymatrix(a);return="" this}}(),lookat:function(){var="" c;return="" function(b){a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),frombuffergeometry:function(a){function="" b(a,b,d,e){var="" n).fromarray(g,3*a),(new="" n).fromarray(g,3*b),(new="" n).fromarray(g,="" 3*d)];e="new" lb(a,b,d,l,f,e);c.faces.push(e);void="" z).fromarray(k,2*a),(new="" z).fromarray(k,2*b),(new="" z).fromarray(k,2*d)]);void="" z).fromarray(m,2*a),(new="" z).fromarray(m,2*b),(new="" z).fromarray(m,2*d)])}var="" 0,e="a.attributes,f=e.position.array,g=void" 0,h="void" 0,k="void" 0,m="void" 0;="" void="" l="e=0;e<f.length;e+=3,l+=2)c.vertices.push((new" n).fromarray(f,e)),void="" h).fromarray(h,e));var="" p="a.groups;if(0<p.length)for(e=0;e<p.length;e++){f=p[e];var" t="f.start,v=f.count;l=t;for(t+=v;l<t;l+=3)void" if(void="" for(e="0;e<f.length/3;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&" (this.boundingbox="a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return" this},center:function(){var="" function(){this.computeboundingbox();this.boundingbox.getcenter(a).negate();this.translate(a.x,a.y,a.z);return="" this}}(),normalize:function(){this.computeboundingsphere();var="" j;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applymatrix(c);return="" this},="" computefacenormals:function(){for(var="" n,c="0,d=this.faces.length;c<d;c++){var" b;var="" n;if(a){var="" n,f="new" n;a="0;for(d=this.faces.length;a<d;a++){b=this.faces[a];var" k="this.vertices[b.c];e.subVectors(k,h);f.subVectors(g,h);e.cross(f);c[b.a].add(e);c[b.b].add(e);c[b.c].add(e)}}else" for(this.computefacenormals(),a="0,d=this.faces.length;a<d;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);d=0;for(b=this.vertices.length;d<b;d++)c[d].normalize();a=0;for(d=this.faces.length;a<d;a++)b=this.faces[a],g=b.vertexNormals,3===g.length?(g[0].copy(c[b.a]),g[1].copy(c[b.b]),g[2].copy(c[b.c])):(g[0]=c[b.a].clone(),g[1]=" c[b.b].clone(),g[2]="c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var" a;this.computefacenormals();var="" a,b;var="" b;c++){var="" r;f.faces="this.faces;e=0;for(a=this.morphTargets.length;e<a;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=" [];this.morphnormals[e].vertexnormals="[];d=this.morphNormals[e].faceNormals;var" n;var="" n,b:new="" n,c:new="" n};d.push(h);g.push(k)}}g="this.morphNormals[e];f.vertices=this.morphTargets[e].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(b=this.faces.length;c<b;c++)d=this.faces[c],h=g.faceNormals[c],k=g.vertexNormals[c],h.copy(d.normal),k.a.copy(d.vertexNormals[0]),k.b.copy(d.vertexNormals[1]),k.c.copy(d.vertexNormals[2])}c=" 0;for(b="this.faces.length;c<b;c++)d=this.faces[c],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new" ya);this.boundingbox.setfrompoints(this.vertices)},computeboundingsphere:function(){null="==this.boundingSphere&&(this.boundingSphere=new" ga);this.boundingsphere.setfrompoints(this.vertices)},merge:function(a,b,c){if(a&&a.isgeometry){var="" d,e="this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces," ra).getnormalmatrix(b));a="0;for(var" n="g.length;a<n;a++){var" r="g[a].clone();void" u="g.vertexNormals;t=g.vertexColors;p=new" lb(g.a+e,g.b+e,g.c+e);p.normal.copy(g.normal);void="" d&&r.applymatrix3(d).normalize(),p.vertexnormals.push(r);p.color.copy(g.color);b="0;for(f=t.length;b<f;b++)r=t[b],p.vertexColors.push(r.clone());p.materialIndex=g.materialIndex+c;h.push(p)}a=0;for(n=l.length;a<n;a++)if(c=l[a],d=[],void" console.error("three.geometry.merge():="" geometry="" three.geometry.",a)},mergemesh:function(a){a&&a.ismesh?(a.matrixautoupdate&&a.updatematrix(),this.merge(a.geometry,a.matrix)):console.error("three.geometry.mergemesh():="" mesh="" three.mesh.",="" a)},mergevertices:function(){var="">g;g++)if(d[g]===d[(g+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e= 0="==this.faceVertexUvs[f]&&(this.faceVertexUvs[f]=[]);e=0;for(c=g.length;e<c;e++){var" this.facevertexuvs.length;c<e;c++)this.facevertexuvs[c].splice(d,1);f="this.vertices.length-b.length;this.vertices=b;return" f},setfrompoints:function(a){this.vertices="[];for(var" b="0,c=a.length;b<c;b++){var" d="a[b];this.vertices.push(new" n(d.x,d.y,d.z||0))}return="" this},sortfacesbymaterialindex:function(){for(var="" a="this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return" a.materialindex-b.materialindex});var="" e.length="==b&&(g=[]);for(c=0;c<b;c++){var" h="a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function" a(a,b,c){return="" c?a|1<<b:a&~(1<<b)}function="" b(a){var="" 0!="=m[b])return" m[b];m[b]="k.length/3;k.push(a.x,a.y,a.z);return" m[b]}function="" c(a){var="" p[b];p[b]="l.length;l.push(a.getHex());return" p[b]}function="" d(a){var="" n[b];n[b]="t.length/2;t.push(a.x,a.y);return" n[b]}var="" e="{metadata:{version:4.5,type:" geometry",generator:"geometry.tojson"}};e.uuid="this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void"" f="this.parameters,g;for(g" in="" f)void="" e}f="[];for(g=0;g<this.vertices.length;g++){var" k="[],m={},l=[],p={},t=[],n={};for(g=0;g<this.faces.length;g++){var" r="this.faces[g],u=void" h.push(c(r[0]),c(r[1]),c(r[2])))}e.data="{};e.data.vertices=f;e.data.normals=k;0<l.length&&(e.data.colors=l);0<t.length&&(e.data.uvs=[t]);e.data.faces=h;return" e},clone:function(){return(new="" r).copy(this)},copy:function(a){var="" b,c,d;this.vertices="[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var" b;f++)this.vertices.push(e[f].clone());e="a.colors;f=0;for(b=e.length;f<b;f++)this.colors.push(e[f].clone());e=a.faces;f=0;for(b=e.length;f<b;f++)this.faces.push(e[f].clone());f=0;for(b=a.faceVertexUvs.length;f<b;f++){var" g="a.faceVertexUvs[f];void" m="0;for(d=h.length;m<d;m++)k.push(h[m].clone());this.faceVertexUvs[f].push(k)}}m=a.morphTargets;f=0;for(b=m.length;f<b;f++){d={};d.name=m[f].name;if(void" m[f].vertices)for(d.vertices="[],e=0,c=m[f].vertices.length;e<c;e++)d.vertices.push(m[f].vertices[e].clone());if(void" m[f].facenormals)for(d.facenormals="[],e=0,c=m[f].faceNormals.length;e<c;e++)d.faceNormals.push(m[f].faceNormals[e].clone());this.morphNormals.push(d)}e=a.skinWeights;f=0;for(b=e.length;f<b;f++)this.skinWeights.push(e[f].clone());e=a.skinIndices;f=0;for(b=e.length;f<b;f++)this.skinIndices.push(e[f].clone());e=a.lineDistances;f=0;for(b=e.length;f<b;f++)this.lineDistances.push(e[f]);f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());f=a.boundingSphere;null!==f&&(this.boundingSphere=f.clone());this.elementsNeedUpdate=" a.elementsneedupdate;this.verticesneedupdate="a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}});object.defineproperty(l.prototype,"needsupdate",{set:function(a){!0="==a&&this.version++}});Object.assign(L.prototype,{isBufferAttribute:!0,onUploadCallback:function(){}," setarray:function(a){if(array.isarray(a))throw="" new="" typeerror("three.bufferattribute:="" array="" should="" be="" typed="" array.");this.count="void" this},setdynamic:function(a){this.dynamic="a;return" this},copy:function(a){this.name="a.name;this.array=new" a.array.constructor(a.array);this.itemsize="a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.itemSize;c*=b.itemSize;for(var" e;d++)this.array[a+d]="b.array[c+d];return" this},copyarray:function(a){this.array.set(a);return="" this},copycolorsarray:function(a){for(var="" color="" is="" undefined",d),f="new" h);b[c++]="f.r;b[c++]=f.g;b[c++]=f.b}return" this},copyvector2sarray:function(a){for(var="" vector="" undefined",="" d),f="new" z);b[c++]="f.x;b[c++]=f.y}return" this},copyvector3sarray:function(a){for(var="" n);b[c++]="f.x;b[c++]=f.y;b[c++]=f.z}return" this},copyvector4sarray:function(a){for(var="" v);b[c++]="f.x;b[c++]=f.y;" b[c++]="f.z;b[c++]=f.w}return" this},set:function(a,b){void="" this},getx:function(a){return="" this.array[a*this.itemsize]},setx:function(a,b){this.array[a*this.itemsize]="b;return" this},gety:function(a){return="" this.array[a*this.itemsize+1]},sety:function(a,b){this.array[a*this.itemsize+1]="b;return" this},getz:function(a){return="" this.array[a*this.itemsize+2]},setz:function(a,b){this.array[a*this.itemsize+2]="b;return" this},getw:function(a){return="" this.array[a*this.itemsize+="" 3]},setw:function(a,b){this.array[a*this.itemsize+3]="b;return" this},setxy:function(a,b,c){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;return" this},setxyz:function(a,b,c,d){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return" this},setxyzw:function(a,b,c,d,e){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return" this},onupload:function(a){this.onuploadcallback="a;return" this},clone:function(){return(new="" this.constructor(this.array,="" this.itemsize)).copy(this)}});uc.prototype="Object.create(L.prototype);uc.prototype.constructor=uc;vc.prototype=Object.create(L.prototype);vc.prototype.constructor=vc;wc.prototype=Object.create(L.prototype);wc.prototype.constructor=wc;xc.prototype=Object.create(L.prototype);xc.prototype.constructor=xc;nb.prototype=Object.create(L.prototype);nb.prototype.constructor=nb;yc.prototype=Object.create(L.prototype);yc.prototype.constructor=yc;ob.prototype=Object.create(L.prototype);ob.prototype.constructor=" ob;b.prototype="Object.create(L.prototype);B.prototype.constructor=B;zc.prototype=Object.create(L.prototype);zc.prototype.constructor=zc;Object.assign(Me.prototype,{computeGroups:function(a){var" 0;a="a.faces;for(var" l="a.morphNormals,p=l.length;if(0<p){var" t="[];for(m=0;m<p;m++)t[m]={name:l[m].name,data:[]};this.morphTargets.normal=t}var" n="a.skinIndices,r=a.skinWeights,u=n.length===c.length,x=r.length===c.length;0<c.length&&0===b.length&&console.error(" three.directgeometry:"="" faceless="" geometries="" are="" not="" supported.");for(m="0;m<b.length;m++){var" w="A.vertexNormals;3===w.length?this.normals.push(w[0],w[1],w[2]):(w=A.normal,this.normals.push(w,w,w));w=A.vertexColors;3===w.length?this.colors.push(w[0],w[1],w[2]):(w=A.color,this.colors.push(w,w,w));!0===e&&(w=d[0][m],void" undefined="" vertexuv="" ",m),this.uvs.push(new="" z,new="" z)));!0="==f&&(w=d[1][m],void" vertexuv2="" ",="" m),this.uvs2.push(new="" z)));for(w="0;w<h;w++){var" i="g[w].vertices;k[w].data.push(I[A.a],I[A.b],I[A.c])}for(w=0;w<p;w++)I=l[w].vertexNormals[m],t[w].data.push(I.a,I.b,I.c);u&&this.skinIndices.push(n[A.a],n[A.b],n[A.c]);x&&this.skinWeights.push(r[A.a],r[A.b],r[A.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;" return="" this}});var="" tf="1;D.prototype=Object.assign(Object.create(ja.prototype),{constructor:D,isBufferGeometry:!0,getIndex:function(){return" this.index},setindex:function(a){array.isarray(a)?this.index="new" (65535<ne(a)?ob:nb)(a,1):this.index="a},addAttribute:function(a,b,c){if(!(b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute))return" console.warn("three.buffergeometry:="" .addattribute()="" now="" expects="" (="" name,="" attribute="" )."),this.addattribute(a,new="" l(b,c));if("index"="==a)return" console.warn("three.buffergeometry.addattribute:="" use="" .setindex()="" for="" index="" attribute."),="" this.setindex(b),this;this.attributes[a]="b;return" this},getattribute:function(a){return="" this.attributes[a]},removeattribute:function(a){delete="" this.attributes[a];return="" this},addgroup:function(a,b,c){this.groups.push({start:a,count:b,materialindex:void="" void="" ra).getnormalmatrix(a).applytobufferattribute(b),b.needsupdate="!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return" this},rotatex:function(){var="" j;return="" function(b){a.makerotationx(b);this.applymatrix(a);return="" this}}(),rotatey:function(){var="" function(b){a.makerotationy(b);this.applymatrix(a);return="" this}}(),rotatez:function(){var="" function(b){a.makerotationz(b);this.applymatrix(a);="" this}}(),translate:function(){var="" function(b,c,d){a.maketranslation(b,c,d);this.applymatrix(a);return="" this}}(),scale:function(){var="" function(b,c,d){a.makescale(b,c,d);this.applymatrix(a);return="" this}}(),lookat:function(){var="" c;return="" function(b){a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),center:function(){var="" n;return="" function(){this.computeboundingbox();this.boundingbox.getcenter(a).negate();this.translate(a.x,a.y,a.z);return="" this}}(),="" setfromobject:function(a){var="" b(3*b.vertices.length,3);var="" c="new" b(3*b.colors.length,3);this.addattribute("position",a.copyvector3sarray(b.vertices));this.addattribute("color",c.copycolorsarray(b.colors));b.linedistances&&b.linedistances.length="==b.vertices.length&&(a=new" b(b.linedistances.length,1),this.addattribute("linedistance",a.copyarray(b.linedistances)));null!="=b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&" (this.boundingbox="b.boundingBox.clone())}else" a.ismesh&&b&&b.isgeometry&&this.fromgeometry(b);return="" this},setfrompoints:function(a){for(var="" b(b,3));return="" this},updatefromobject:function(a){var="" 0,b.elementsneedupdate="!1);if(void" this.fromgeometry(b);c.verticesneedupdate="b.verticesNeedUpdate;c.normalsNeedUpdate=" b.normalsneedupdate;c.colorsneedupdate="b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void" !1);!0="==b.colorsNeedUpdate&&(c=this.attributes.color,void" this},="" fromgeometry:function(a){a.__directgeometry="(new" me).fromgeometry(a);return="" this.fromdirectgeometry(a.__directgeometry)},fromdirectgeometry:function(a){var="" float32array(3*a.vertices.length);this.addattribute("position",(new="" l(b,3)).copyvector3sarray(a.vertices));0<a.normals.length&&(b="new" float32array(3*a.normals.length),this.addattribute("normal",(new="" l(b,3)).copyvector3sarray(a.normals)));0<a.colors.length&&(b="new" float32array(3*a.colors.length),this.addattribute("color",(new="" l(b,3)).copycolorsarray(a.colors)));="" 0<a.uvs.length&&(b="new" float32array(2*a.uvs.length),this.addattribute("uv",(new="" l(b,2)).copyvector2sarray(a.uvs)));0<a.uvs2.length&&(b="new" float32array(2*a.uvs2.length),this.addattribute("uv2",(new="" l(b,2)).copyvector2sarray(a.uvs2)));this.groups="a.groups;for(var" a.morphtargets){b="[];for(var" b(3*g.data.length,3);h.name="g.name;b.push(h.copyVector3sArray(g.data))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new" b(4*a.skinindices.length,="" 4),this.addattribute("skinindex",c.copyvector4sarray(a.skinindices)));0<a.skinweights.length&&(c="new" b(4*a.skinweights.length,4),this.addattribute("skinweight",c.copyvector4sarray(a.skinweights)));null!="=a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return" this},computeboundingbox:function(){null="==this.boundingBox&&(this.boundingBox=new" ya);var="" this.boundingbox.makeempty();(isnan(this.boundingbox.min.x)||isnan(this.boundingbox.min.y)||isnan(this.boundingbox.min.z))&&console.error('three.buffergeometry.computeboundingbox:="" computed="" min="" max="" have="" nan="" values.="" the="" "position"="" likely="" to="" values.',this)},computeboundingsphere:function(){var="" ya,b="new" function(){null="==this.boundingSphere&&(this.boundingSphere=new" ga);var="" a.getcenter(d);for(var="" radius="" nan.="" values.',this)}}}(),computefacenormals:function(){},computevertexnormals:function(){var="" b.normal)this.addattribute("normal",new="" l(new="" float32array(c.length),3));else="" for(var="" n,h="new" n,k="new" n,m="new" n,l="new" n;if(a){var="" p="a.array;e=0;for(f=a.count;e<f;e+=3){a=3*p[e+0];var" v="3*p[e+2];g.fromArray(c,a);h.fromArray(c,t);k.fromArray(c,v);m.subVectors(k,h);l.subVectors(g,h);m.cross(l);d[a]+=m.x;d[a+1]+=m.y;d[a+2]+=m.z;d[t]+=m.x;d[t+1]+=m.y;d[t+2]+=m.z;d[v]+=m.x;d[v+1]+=m.y;d[v+2]+=m.z}}else" for(e="0,f=c.length;e<" f;e+="9)g.fromArray(c,e),h.fromArray(c,e+3),k.fromArray(c,e+6),m.subVectors(k,h),l.subVectors(g,h),m.cross(l),d[e]=m.x,d[e+1]=m.y,d[e+2]=m.z,d[e+3]=m.x,d[e+4]=m.y,d[e+5]=m.z,d[e+6]=m.x,d[e+7]=m.y,d[e+8]=m.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(a&&a.isBufferGeometry){void" overwriting="" original="" geometry,="" starting="" at="" offset="0." buffergeometryutils.mergebuffergeometries()="" lossless="" merge."));var="" d;for(d="" c)if(void="" this}console.error("three.buffergeometry.merge():="" geometry="" an="" instance="" of="" three.buffergeometry.",a)},normalizenormals:function(){var="" function(){for(var="" a(a,b){var="" c.constructor(b.length*a),e,f="0,g=0,h=b.length;g<h;g++){e=b[g]*a;for(var" l(d,a)}if(null="==this.index)return" console.warn("three.buffergeometry.tononindexed():="" already="" non-indexed."),this;var="" d,c="this.index.array,d=this.attributes,e;for(e" d){var="" g){var="" this.groups;d="0;for(e=c.length;d<e;d++)f=c[d],b.addGroup(f.start,f.count,f.materialIndex);return" b},tojson:function(){var="" b)void="" a}a.data="{attributes:{}};var" a.data.index="{type:c.array.constructor.name,array:b});c=this.attributes;for(e" c){var="" a},clone:function(){return(new="" d).copy(this)},copy:function(a){var="" b;this.index="null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var" c)this.addattribute(g,c[g].clone());var="" this},dispose:function(){this.dispatchevent({type:"dispose"})}});mb.prototype="Object.create(R.prototype);Mb.prototype.constructor=Mb;pb.prototype=Object.create(D.prototype);pb.prototype.constructor=pb;Ac.prototype=Object.create(R.prototype);Ac.prototype.constructor=Ac;qb.prototype=Object.create(D.prototype);qb.prototype.constructor=" qb;var="" uf="0;Q.prototype=Object.assign(Object.create(ja.prototype),{constructor:Q,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void" a){var="" '"+b+"'="" parameter="" undefined.");else="" if("shading"="==b)console.warn(" three."+this.type+":"="" .shading="" has="" been="" removed.="" boolean="" .flatshading="" instead."),this.flatshading="1===c?!0:!1;else{var" property="" this="" material."):="" d&&d.iscolor?d.set(c):d&&d.isvector3&&c&&c.isvector3?d.copy(c):this[b]="c}}},toJSON:function(a){function" d.metadata;b.push(d)}return="" b}var="" a;c&&(a="{textures:{},images:{}});var" this.map.tojson(a).uuid);this.alphamap&&this.alphamap.istexture&&(d.alphamap="this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.aoMap&&this.aoMap.isTexture&&(d.aoMap=this.aoMap.toJSON(a).uuid,d.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalMapType=" this.normalmaptype,d.normalscale="this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=" this.emissivemap.tojson(a).uuid);this.specularmap&&this.specularmap.istexture&&(d.specularmap="this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity,void" (d.sizeattenuation="this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);!0===this.flatShading&&(d.flatShading=this.flatShading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1">this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;0!==this.rotation&&(d.rotation=this.rotation);!0===this.polygonOffset&&(d.polygonOffset=
!0);0!==this.polygonOffsetFactor&&(d.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&(d.polygonOffsetUnits=this.polygonOffsetUnits);1!==this.linewidth&&(d.linewidth=this.linewidth);void 0!==this.dashSize&&(d.dashSize=this.dashSize);void 0!==this.gapSize&&(d.gapSize=this.gapSize);void 0!==this.scale&&(d.scale=this.scale);!0===this.dithering&&(d.dithering=!0);0<this.alphatest&&(d.alphatest=this.alphatest);!0===this.premultipliedalpha&&(d.premultipliedalpha=this.premultipliedalpha); 0="==b&&(console.warn(" three.ray:"="" !0="==this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframeLinewidth&&(d.wireframeLinewidth=this.wireframeLinewidth);" round"!="=this.wireframeLinecap&&(d.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(d.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(d.morphTargets=!0);!0===this.skinning&&(d.skinning=!0);!1===this.visible&&(d.visible=!1);"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData);c&&(c=b(a.textures),a=b(a.images),0<c.length&&"" (d.textures="c),0<a.length&&(d.images=a));return" d},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.name="a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=" a.blendequationalpha;this.depthfunc="a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.visible=a.visible;this.userData=JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=" a.clipintersection;var="" b="a.clippingPlanes,c=null;if(null!==b){var" d="b.length;c=Array(d);for(var" e="0;e!==d;++e)c[e]=b[e].clone()}this.clippingPlanes=c;this.shadowSide=a.shadowSide;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}});ca.prototype="Object.create(Q.prototype);Ca.prototype.constructor=Ca;Ca.prototype.isShaderMaterial=!0;Ca.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Kb(a.uniforms);" this.defines="Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return" this};ca.prototype.tojson="function(a){var" c="" in="" this.uniforms){var="" {type:"c",value:d.gethex()}:d&&d.isvector2?{type:"v2",value:d.toarray()}:d&&d.isvector3?{type:"v3",value:d.toarray()}:d&&d.isvector4?{type:"v4",value:d.toarray()}:d&&d.ismatrix3?{type:"m3",value:d.toarray()}:d&&d.ismatrix4?{type:"m4",value:d.toarray()}:{value:d}}0<object.keys(this.defines).length&&(b.defines="this.defines);b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;a={};for(var" this.extensions)!0="==this.extensions[e]&&(a[e]=!0);0<Object.keys(a).length&&(b.extensions=" a);return="" b};object.assign(rb.prototype,{set:function(a,b){this.origin.copy(a);this.direction.copy(b);return="" this},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return="" this},at:function(a,b){void="" .at()="" target="" is="" now="" required"),b="new" n);return="" b.copy(this.direction).multiplyscalar(a).add(this.origin)},lookat:function(a){this.direction.copy(a).sub(this.origin).normalize();return="" this},="" recast:function(){var="" a="new" n;return="" function(b){this.origin.copy(this.at(b,a));return="" this}}(),closestpointtopoint:function(a,b){void="" .closestpointtopoint()="" n);b.subvectors(a,this.origin);a="b.dot(this.direction);return">a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new n;return function(b){var c=
a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new n,b=new n,c=new n;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),k=-this.direction.dot(b),m=c.dot(this.direction),l=-c.dot(b),p=c.lengthSq(),t=Math.abs(1-k*k);if(0<t){d=k*l-m;e=k* m-l;var="" n="h*t;0<=d?e">=-n?e<=n?(h=1 t,d*="h,e*=h,k=d*(d+k*e+2*m)+e*(k*d+e+2*l)+p):(e=h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+p):(e=-h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+p):e<=-n?(d=Math.max(0,-(-k*h+m)),e=0<d?-h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+p):e<=n?(d=0,e=Math.min(Math.max(-h,-l),h),k=e*(e+2*l)+p):(d=Math.max(0,-(k*h+m)),e=0<d?h:Math.min(Math.max(-h,-l),h),k=-d*d+e*(e+2*l)+p)}else" e="0<k?-h:h,d=Math.max(0,-(k*e+m)),k=-d*d+e*(e+2*l)+p;f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);" g&&g.copy(b).multiplyscalar(e).add(a);return="" k}}(),intersectsphere:function(){var="" a="new" n;return="" function(b,c){a.subvectors(b.center,this.origin);var="" d="a.dot(this.direction),e=a.dot(a)-d*d;b=b.radius*b.radius;if(e">b)return null;b=Math.sqrt(b-e);e=d-b;d+=b;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius},distancetoplane:function(a){var 0="==a.distanceToPoint(this.origin)?" b="a.normal.dot(this.direction);if(0===b)return" 0:null;a="-(this.origin.dot(a.normal)+a.constant)/b;return" 0<="a?a:null},intersectPlane:function(a,b){a=this.distanceToPlane(a);return" null="==a?null:this.at(a,b)},intersectsPlane:function(a){var">a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=c){var g="(a.min.x-f.x)*c;c*=a.max.x-f.x}else" h="(a.min.y-" f.y)*d;d*="a.max.y-f.y}else">d||h>c)return null;if(h>g||g!==g)g=h;if(d<c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g>a||h>c)return null;if(h>g||g!==g)g=h;if(a<c||c!==c)c=a;return 0="">c?null:this.at(0<=g?g:c,b)},intersectsbox:function(){var a="new" n;return="" function(b){return="" null!="=this.intersectBox(b,a)}}(),intersectTriangle:function(){var" n,b="new" n,c="new" n,d="new" function(e,f,g,h,k){b.subvectors(f,="" e);c.subvectors(g,e);d.crossvectors(b,c);f="this.direction.dot(d);if(0<f){if(h)return" null;h="1}else" if(0="">f)h=-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,k)}}(),applyMatrix4:function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}});
Object.assign(ua,{getNormal:function(){var a=new n;return function(b,c,d,e){void 0===e&&(console.warn("THREE.Triangle: .getNormal() target is now required"),e=new n);e.subVectors(d,c);a.subVectors(b,c);e.cross(a);b=e.lengthSq();return 0<b?e.multiplyscalar(1 0="==" math.sqrt(b)):e.set(0,0,0)}}(),getbarycoord:function(){var="" a="new" n,b="new" n,c="new" n;return="" function(d,e,f,g,h){a.subvectors(g,e);b.subvectors(f,e);c.subvectors(d,e);d="a.dot(a);e=a.dot(b);f=a.dot(c);var" k="b.dot(b);g=b.dot(c);var" m="d*k-e*e;void" h&&(console.warn("three.triangle:="" .getbarycoord()="" target="" is="" now="" required"),h="new" n);if(0="==m)return" h.set(-2,-1,-1);m="1/m;k=(k*f-e*g)*m;d=(d*g-e*f)*m;return" h.set(1-k-d,d,k)}}(),containspoint:function(){var="" function(b,c,d,e){ua.getbarycoord(b,c,d,e,a);return="" 0<="a.x&&0<=a.y&&1">=a.x+a.y}}(),getUV:function(){var a=new n;return function(b,c,d,e,f,g,h,k){this.getBarycoord(b,c,d,e,a);k.set(0,0);k.addScaledVector(f,a.x);k.addScaledVector(g,a.y);k.addScaledVector(h,a.z);return k}}()});Object.assign(ua.prototype,
{set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},getArea:function(){var a=new n,b=new n;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),getMidpoint:function(a){void 0===
a&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),a=new n);return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(a){return ua.getNormal(this.a,this.b,this.c,a)},getPlane:function(a){void 0===a&&(console.warn("THREE.Triangle: .getPlane() target is now required"),a=new n);return a.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(a,b){return ua.getBarycoord(a,this.a,this.b,this.c,b)},containsPoint:function(a){return ua.containsPoint(a,
this.a,this.b,this.c)},getUV:function(a,b,c,d,e){return ua.getUV(a,this.a,this.b,this.c,b,c,d,e)},intersectsBox:function(a){return a.intersectsTriangle(this)},closestPointToPoint:function(){var a=new n,b=new n,c=new n,d=new n,e=new n,f=new n;return function(g,h){void 0===h&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),h=new n);var k=this.a,m=this.b,l=this.c;a.subVectors(m,k);b.subVectors(l,k);d.subVectors(g,k);var p=a.dot(d),t=b.dot(d);if(0>=p&&0>=t)return h.copy(k);
e.subVectors(g,m);var v=a.dot(e),r=b.dot(e);if(0<=v&&r<=v)return h.copy(m);var="" u="p*r-v*t;if(0">=u&&0<=p&&0>=v)return m=p/(p-v),h.copy(k).addScaledVector(a,m);f.subVectors(g,l);g=a.dot(f);var x=b.dot(f);if(0<=x&&g<=x)return h.copy(l);p="g*t-p*x;if(0">=p&&0<=t&&0>=x)return u=t/(t-x),h.copy(k).addScaledVector(b,u);t=v*x-g*r;if(0>=t&&0<=r-v&&0<=g-x)return c.subvectors(l,m),u="(r-v)/(r-v+(g-x)),h.copy(m).addScaledVector(c,u);l=1/(t+p+u);m=p*l;u*=l;return" h.copy(k).addscaledvector(a,m).addscaledvector(b,u)}}(),="" equals:function(a){return="" a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}});xa.prototype="Object.create(Q.prototype);xa.prototype.constructor=xa;xa.prototype.isMeshBasicMaterial=!0;xa.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=" a.combine;this.reflectivity="a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return" this};va.prototype="Object.assign(Object.create(C.prototype),{constructor:va,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){C.prototype.copy.call(this,a);this.drawMode=a.drawMode;" void="" 0!="=a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void" this},updatemorphtargets:function(){var="" a="this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var" b="Object.keys(a);if(0<b.length){var" c="a[b[0]];if(void" d="c[a].name||String(a);this.morphTargetInfluences.push(0);" this.morphtargetdictionary[d]="a}}}else" no="" longer="" supports="" three.geometry.="" use="" three.buffergeometry="" instead.")},raycast:function(){function="" a(a,b,c,d,e,f,g,h){if(null="==(1===b.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==b.side,h)))return" null;u.copy(h);u.applymatrix4(a.matrixworld);b="c.ray.origin.distanceTo(u);return" b<c.near||b="">c.far?null:{distance:b,point:u.clone(),object:a}}function b(b,
c,d,e,k,m,l,q,n){f.fromBufferAttribute(k,l);g.fromBufferAttribute(k,q);h.fromBufferAttribute(k,n);if(b=a(b,c,d,e,f,g,h,r))m&&(p.fromBufferAttribute(m,l),t.fromBufferAttribute(m,q),v.fromBufferAttribute(m,n),b.uv=ua.getUV(r,f,g,h,p,t,v,new z)),m=new Lb(l,q,n),ua.getNormal(f,g,h,m.normal),b.face=m;return b}var c=new J,d=new rb,e=new Ga,f=new n,g=new n,h=new n,k=new n,m=new n,l=new n,p=new z,t=new z,v=new z,r=new n,u=new n;return function(q,n){var u=this.geometry,x=this.material,y=this.matrixWorld;if(void 0!==
x&&(null===u.boundingSphere&&u.computeBoundingSphere(),e.copy(u.boundingSphere),e.applyMatrix4(y),!1!==q.ray.intersectsSphere(e)&&(c.getInverse(y),d.copy(q.ray).applyMatrix4(c),null===u.boundingBox||!1!==d.intersectsBox(u.boundingBox))))if(u.isBufferGeometry){var A=u.index,B=u.attributes.position,F=u.attributes.uv,D=u.groups;u=u.drawRange;var C,G;if(null!==A)if(Array.isArray(x)){var E=0;for(C=D.length;E<c;e++){var 0="==a&&(console.warn(" three.camera:"="" h="D[E];var" l="x[H.materialIndex];var" j="Math.max(H.start,u.start);for(G=y=Math.min(H.start+" h.count,u.start+u.count);j<g;j+="3){y=A.getX(J);var" k="A.getX(J+1);var" o="A.getX(J+2);if(y=b(this,L,q,d,B,F,y,K,O))y.faceIndex=Math.floor(J/3),y.face.materialIndex=H.materialIndex,n.push(y)}}}else" for(j="Math.max(0,u.start),y=Math.min(A.count,u.start+u.count),E=J,C=y;E<C;E+=3){if(y=A.getX(E),K=A.getX(E+1),O=A.getX(E+2),y=b(this,x,q,d,B,F,y,K,O))y.faceIndex=Math.floor(E/3),n.push(y)}else" if(void="" 0!="=B)if(Array.isArray(x))for(E=0,C=D.length;E<C;E++)for(H=D[E],L=x[H.materialIndex],J=Math.max(H.start,u.start)," g="y=Math.min(H.start+H.count,u.start+u.count);J<G;J+=3){if(y=J,K=J+1,O=J+2,y=b(this,L,q,d,B,F,y,K,O))y.faceIndex=Math.floor(J/3),y.face.materialIndex=H.materialIndex,n.push(y)}else" if(u.isgeometry)for(b="Array.isArray(x),F=u.vertices,D=u.faces,y=u.faceVertexUvs[0],0<y.length&&(A=y),L=0,J=D.length;L<J;L++)if(G=D[L],y=B?x[G.materialIndex]:" x,void="" q="0,R=K.length;Q<R;Q++){var" s="O[Q];if(0!==S){var" u="K[Q].vertices;f.addScaledVector(k.subVectors(U[G.a],E),S);g.addScaledVector(m.subVectors(U[G.b],C),S);h.addScaledVector(l.subVectors(U[G.c],H),S)}}f.add(E);g.add(C);h.add(H);E=f;C=g;H=h}if(y=a(this,y,q,d,E,C,H,r))A&&A[L]&&(K=A[L],p.copy(K[0]),t.copy(K[1]),v.copy(K[2]),y.uv=ua.getUV(r,E,C,H,p," t,v,new="" z)),y.face="G,y.faceIndex=L,n.push(y)}}}(),clone:function(){return(new" this.constructor(this.geometry,this.material)).copy(this)}});za.prototype="Object.create(S.prototype);Za.prototype.constructor=Za;Za.prototype.isCubeTexture=!0;Object.defineProperty(Za.prototype," images",{get:function(){return"="" this.image},set:function(a){this.image="a}});Nb.prototype=Object.create(S.prototype);Nb.prototype.constructor=Nb;Nb.prototype.isDataTexture3D=!0;var" ue="new" s,pg="new" nb,ve="new" za,oe="[],Qe=[],Te=new" float32array(16),="" se="new" float32array(9),re="new" float32array(4);ze.prototype.updatecache="function(a){var" b="this.cache;a" instanceof="" float32array&&b.length!="=a.length&&(this.cache=new" float32array(a.length));ba(b,a)};$e.prototype.setvalue="function(a,b,c){for(var" d="this.seq,e=0,f=d.length;e!==f;++e){var" be="/([\w\d_]+)(\])?(\[|\.)?/g;eb.prototype.setValue=function(a,b,c){b=this.map[b];void" b&&this.setvalue(a,c,b)};eb.upload="function(a,b,c,d){for(var" e="0,f=b.length;e!==f;++e){var" c="[],d=0,e=a.length;d!==e;++d){var" f="a[d];f.id" in="" b&&c.push(f)}return="" c};var="" kg="0,Sg=0;fb.prototype=Object.create(Q.prototype);fb.prototype.constructor=fb;fb.prototype.isMeshDepthMaterial=!0;fb.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;" this.morphtargets="a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return" this};gb.prototype="Object.create(Q.prototype);gb.prototype.constructor=gb;gb.prototype.isMeshDistanceMaterial=!0;gb.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=" a.neardistance;this.fardistance="a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return" this};pb.prototype="Object.assign(Object.create(C.prototype),{constructor:Pb,isGroup:!0});Ta.prototype=Object.assign(Object.create(C.prototype),{constructor:Ta,isCamera:!0,copy:function(a,b){C.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);" this.projectionmatrix.copy(a.projectionmatrix);this.projectionmatrixinverse.copy(a.projectionmatrixinverse);return="" this},getworlddirection:function(a){void="" .getworlddirection()="" target="" is="" now="" required"),a="new" n);this.updatematrixworld(!0);var="" a.set(-b[8],-b[9],-b[10]).normalize()},updatematrixworld:function(a){c.prototype.updatematrixworld.call(this,a);this.matrixworldinverse.getinverse(this.matrixworld)},clone:function(){return(new="" this.constructor).copy(this)}});="" x.prototype="Object.assign(Object.create(Ta.prototype),{constructor:X,isPerspectiveCamera:!0,copy:function(a,b){Ta.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return" this},setfocallength:function(a){a=".5*this.getFilmHeight()/a;this.fov=2*G.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var" a="Math.tan(.5*G.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return" 2*g.rad2deg*math.atan(math.tan(.5*g.deg2rad*this.fov)="" this.zoom)},getfilmwidth:function(){return="" this.filmgauge*math.min(this.aspect,1)},getfilmheight:function(){return="" this.filmgauge="" math.max(this.aspect,1)},setviewoffset:function(a,b,c,d,e,f){this.aspect="a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=" a;this.view.fullheight="b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var" h}f="this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){a=C.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;" return="" a}});ec.prototype="Object.assign(Object.create(X.prototype),{constructor:Ec,isArrayCamera:!0});var" lf="new" n,mf="new" n;qb.prototype.isfogexp2="!0;Qb.prototype.clone=function(){return" new="" qb(this.color,this.density)};qb.prototype.tojson="function(){return{type:" fogexp2",color:this.color.gethex(),density:this.density}};rb.prototype.isfog="!0;Rb.prototype.clone=function(){return"" rb(this.color,this.near,this.far)};rb.prototype.tojson="function(){return{type:" fog",color:this.color.gethex(),near:this.near,"="" far:this.far}};zd.prototype="Object.assign(Object.create(C.prototype),{constructor:zd,isScene:!0,copy:function(a,b){C.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return" this},tojson:function(a){var="" this.background.tojson(a));null!="=this.fog&&(b.object.fog=this.fog.toJSON());return" b},dispose:function(){this.dispatchevent({type:"dispose"})}});object.defineproperty(sb.prototype,"needsupdate",{set:function(a){!0="==a&&this.version++}});Object.assign(sb.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(a){if(Array.isArray(a))throw" typeerror("three.bufferattribute:="" array="" should="" typed="" array.");this.count="void" this},="" setdynamic:function(a){this.dynamic="a;return" this},copy:function(a){this.array="new" a.array.constructor(a.array);this.count="a.count;this.stride=a.stride;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.stride;c*=b.stride;for(var" this},set:function(a,b){void="" this},clone:function(){return(new="" this.constructor).copy(this)},onupload:function(a){this.onuploadcallback="a;return" this}});="" object.defineproperties(fc.prototype,{count:{get:function(){return="" this.data.count}},array:{get:function(){return="" this.data.array}}});object.assign(fc.prototype,{isinterleavedbufferattribute:!0,setx:function(a,b){this.data.array[a*this.data.stride+this.offset]="b;return" this},sety:function(a,b){this.data.array[a*this.data.stride+this.offset+1]="b;return" this},setz:function(a,b){this.data.array[a*this.data.stride+this.offset+2]="b;return" this},setw:function(a,b){this.data.array[a*this.data.stride+this.offset+="" 3]="b;return" this},getx:function(a){return="" this.data.array[a*this.data.stride+this.offset]},gety:function(a){return="" this.data.array[a*this.data.stride+this.offset+1]},getz:function(a){return="" this.data.array[a*this.data.stride+this.offset+2]},getw:function(a){return="" this.data.array[a*this.data.stride+this.offset+3]},setxy:function(a,b,c){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return" this},setxyz:function(a,b,c,d){a="a*this.data.stride+this.offset;this.data.array[a+" 0]="b;this.data.array[a+1]=c;this.data.array[a+2]=d;return" this},setxyzw:function(a,b,c,d,e){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return" this}});ib.prototype="Object.create(Q.prototype);ib.prototype.constructor=ib;ib.prototype.isSpriteMaterial=!0;ib.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;this.sizeAttenuation=a.sizeAttenuation;return" this};="" var="" sb;gc.prototype="Object.assign(Object.create(C.prototype),{constructor:Gc,isSprite:!0,raycast:function(){function" a(a,b,c,d,h,k){e.subvectors(a,c).addscalar(.5).multiply(d);void="" n,c="new" n,d="new" n,e="new" z,f="new" z,g="new" j,h="new" n,k="new" n,m="new" n,l="new" z,p="new" z,t="new" z;return="" function(e,f){c.setfrommatrixscale(this.matrixworld);g.getinverse(this.modelviewmatrix).premultiply(this.matrixworld);="" d.setfrommatrixposition(this.modelviewmatrix);var="" n="Math.cos(q);var" r="Math.sin(q)}q=this.center;a(h.set(-.5,-.5,0),d,q,c,r,n);a(k.set(.5,-.5,0),d,q,c,r,n);a(m.set(.5,.5,0),d,q,c,r,n);l.set(0,0);p.set(1,0);t.set(1,1);var" v="e.ray.intersectTriangle(h,k,m,!1,b);if(null===v&&(a(k.set(-.5,.5,0),d,q,c,r,n),p.set(0,1),v=e.ray.intersectTriangle(h,m,k,!1,b),null===v))return;r=e.ray.origin.distanceTo(b);r<e.near||r">e.far||f.push({distance:r,point:b.clone(),uv:ua.getUV(b,
h,k,m,l,p,t,new z),face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)},copy:function(a){C.prototype.copy.call(this,a);void 0!==a.center&&this.center.copy(a.center);return this}});Hc.prototype=Object.assign(Object.create(C.prototype),{constructor:Hc,copy:function(a){C.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var 0="==b&&(b=0);b=" d="a[b];this.addLevel(d.object.clone(),d.distance)}return" this},addlevel:function(a,b){void="" math.abs(b);for(var="" c="this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var" b="this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return" b[c-1].object},raycast:function(){var="" a="new" n;return="" function(b,c){a.setfrommatrixposition(this.matrixworld);var="" n,b="new" function(c){var="" b.setfrommatrixposition(this.matrixworld);c="a.distanceTo(b);d[0].object.visible=!0;for(var" e="1,f=d.length;e<f;e++)if(c">=d[e].distance)d[e-1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),tojson:function(a){a=c.prototype.tojson.call(this,a);a.object.levels=[];for(var 0="==b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var" b="this.levels,c=0,d=b.length;c<d;c++){var" e="b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return" a}});ic.prototype="Object.assign(Object.create(va.prototype),{constructor:Ic," isskinnedmesh:!0,bind:function(a,b){this.skeleton="a;void" a="new" v,b="this.geometry.attributes.skinWeight,c=0,d=b.count;c<d;c++){a.x=b.getX(c);a.y=b.getY(c);a.z=b.getZ(c);a.w=b.getW(c);var" a.y,a.z,a.w)}},updatematrixworld:function(a){va.prototype.updatematrixworld.call(this,a);"attached"="==this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):" detached"="==this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh:"" unrecognized="" bindmode:="" "+this.bindmode)},clone:function(){return(new="" this.constructor(this.geometry,this.material)).copy(this)}});object.assign(ad.prototype,{calculateinverses:function(){this.boneinverses="[];for(var" this.bones.length;a<b;a++){var="" c="new" j;this.bones[a]&&c.getinverse(this.bones[a].matrixworld);this.boneinverses.push(c)}},pose:function(){var="" a,b;var="" j,b="new" j;return="" function(){for(var="" 0!="=f&&(f.needsUpdate=!0)}}(),clone:function(){return" new="" ad(this.bones,this.boneinverses)},getbonebyname:function(a){for(var="" d="this.bones[b];if(d.name===a)return" d}}});fe.prototype="Object.assign(Object.create(C.prototype),{constructor:fe,isBone:!0});W.prototype=" object.create(q.prototype);w.prototype.constructor="W;W.prototype.isLineBasicMaterial=!0;W.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return" this};ea.prototype="Object.assign(Object.create(C.prototype),{constructor:ea,isLine:!0,computeLineDistances:function(){var" n,b="new" n;return="" function(){var="" b(e,1))}else="" console.warn("three.line.computelinedistances():="" computation="" only="" possible="" with="" non-indexed="" buffergeometry.");else="" if(c.isgeometry)for(d="c.vertices,e=c.lineDistances,e[0]=0,f=1,g=d.length;f<g;f++)e[f]=e[f-1],e[f]+=d[f-1].distanceTo(d[f]);return" this}}(),raycast:function(){var="" rb,c="new" ga;return="" function(d,e){var="" f="d.linePrecision," g="this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);c.radius+=f;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);f/=(this.scale.x+this.scale.y+this.scale.z)/3;f*=f;var" k="new" n,m="new" n;h="new" n;var="" l="new" n,p="this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var" t="g.index,v=g.attributes.position.array;if(null!==t){t=t.array;g=0;for(var" r="t.length-1;g<r;g+=p){var" u="t[g+1];k.fromArray(v,3*t[g]);" m.fromarray(v,3*u);u="b.distanceSqToSegment(k,m,l,h);u">f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}else for(g=0,r=v.length/3-1;g<r;g+=p)k.fromarray(v,3*g),m.fromarray(v,3*g+3),u=b.distancesqtosegment(k,m,l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),
index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(k=g.vertices,m=k.length,g=0;g<m-1;g+=p)u=b.distancesqtosegment(k[g],k[g+1],l,h),u>f||(l.applyMatrix4(this.matrixWorld),u=d.ray.origin.distanceTo(l),u<d.near||u>d.far||e.push({distance:u,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),copy:function(a){C.prototype.copy.call(this,a);this.geometry.copy(a.geometry);this.material.copy(a.material);return this},clone:function(){return(new this.constructor).copy(this)}});
U.prototype=Object.assign(Object.create(ea.prototype),{constructor:U,isLineSegments:!0,computeLineDistances:function(){var a=new n,b=new n;return function(){var c=this.geometry;if(c.isBufferGeometry)if(null===c.index){for(var d=c.attributes.position,e=[],f=0,g=d.count;f<g;f+=2)a.frombufferattribute(d,f),b.frombufferattribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceto(b);c.addattribute("linedistance",new b(e,1))}else="" console.warn("three.linesegments.computelinedistances():="" computation="" only="" possible="" with="" non-indexed="" buffergeometry.");="" else="" if(c.isgeometry)for(d="c.vertices,e=c.lineDistances,f=0,g=d.length;f<g;f+=2)a.copy(d[f]),b.copy(d[f+1]),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceTo(b);return" this}}()});bd.prototype="Object.assign(Object.create(ea.prototype),{constructor:Bd,isLineLoop:!0});Ha.prototype=Object.create(Q.prototype);Ha.prototype.constructor=Ha;Ha.prototype.isPointsMaterial=!0;Ha.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;" this.morphtargets="a.morphTargets;return" this};tb.prototype="Object.assign(Object.create(C.prototype),{constructor:Tb,isPoints:!0,raycast:function(){var" a="new" j,b="new" rb,c="new" ga;return="" function(d,e){function="" f(a,c){var="" f="b.distanceSqToPoint(a);f<l&&(b.closestPointToPoint(a,p),p.applyMatrix4(k),a=d.ray.origin.distanceTo(p),a<d.near||a">d.far||e.push({distance:a,distanceToRay:Math.sqrt(f),point:p.clone(),index:c,face:null,object:g}))}var g=this,h=this.geometry,k=this.matrixWorld,m=d.params.Points.threshold;
null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(k);c.radius+=m;if(!1!==d.ray.intersectsSphere(c)){a.getInverse(k);b.copy(d.ray).applyMatrix4(a);m/=(this.scale.x+this.scale.y+this.scale.z)/3;var l=m*m;m=new n;var p=new n;if(h.isBufferGeometry){var t=h.index;h=h.attributes.position.array;if(null!==t){var v=t.array;t=0;for(var r=v.length;t<r;t++){var u="v[t];m.fromArray(h,3*u);f(m,u)}}else" for(t="0,v=h.length/3;t<v;t++)m.fromArray(h,3*t),f(m,t)}else" for(m="h.vertices," t="0,v=m.length;t<v;t++)f(m[t],t)}}}(),clone:function(){return(new" this.constructor(this.geometry,this.material)).copy(this)}});ge.prototype="Object.assign(Object.create(S.prototype),{constructor:ge,isVideoTexture:!0,update:function(){var" a="this.image;a.readyState">=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Ub.prototype=Object.create(S.prototype);Ub.prototype.constructor=Ub;Ub.prototype.isCompressedTexture=!0;Jc.prototype=Object.create(S.prototype);Jc.prototype.constructor=Jc;Jc.prototype.isCanvasTexture=
!0;Kc.prototype=Object.create(S.prototype);Kc.prototype.constructor=Kc;Kc.prototype.isDepthTexture=!0;Vb.prototype=Object.create(D.prototype);Vb.prototype.constructor=Vb;Lc.prototype=Object.create(R.prototype);Lc.prototype.constructor=Lc;Wb.prototype=Object.create(D.prototype);Wb.prototype.constructor=Wb;Mc.prototype=Object.create(R.prototype);Mc.prototype.constructor=Mc;za.prototype=Object.create(D.prototype);za.prototype.constructor=za;Nc.prototype=Object.create(R.prototype);Nc.prototype.constructor=
Nc;Xb.prototype=Object.create(za.prototype);Xb.prototype.constructor=Xb;Oc.prototype=Object.create(R.prototype);Oc.prototype.constructor=Oc;tb.prototype=Object.create(za.prototype);tb.prototype.constructor=tb;Pc.prototype=Object.create(R.prototype);Pc.prototype.constructor=Pc;Yb.prototype=Object.create(za.prototype);Yb.prototype.constructor=Yb;Qc.prototype=Object.create(R.prototype);Qc.prototype.constructor=Qc;Zb.prototype=Object.create(za.prototype);Zb.prototype.constructor=Zb;Rc.prototype=Object.create(R.prototype);
Rc.prototype.constructor=Rc;$b.prototype=Object.create(D.prototype);$b.prototype.constructor=$b;Sc.prototype=Object.create(R.prototype);Sc.prototype.constructor=Sc;ac.prototype=Object.create(D.prototype);ac.prototype.constructor=ac;Tc.prototype=Object.create(R.prototype);Tc.prototype.constructor=Tc;bc.prototype=Object.create(D.prototype);bc.prototype.constructor=bc;var fh={triangulate:function(a,b,c){c=c||2;var d=b&&b.length,e=d?b[0]*c:a.length,f=of(a,0,e,c,!0),g=[];if(!f)return g;var h;if(d){var k=
c;d=[];var m;var l=0;for(m=b.length;l<m;l++){var p="b[l]*k;var" n="l<m-1?b[l+1]*k:a.length;p=of(a,p,n,k,!1);p===p.next&&(p.steiner=!0);d.push($g(p))}d.sort(Yg);for(l=0;l<d.length;l++){b=d[l];k=f;if(k=Zg(b,k))b=rf(k,b),Vc(b,b.next);f=Vc(f,f.next)}}if(a.length">80*c){var v=h=a[0];var r=d=a[1];for(k=c;k<e;k+=c)l=a[k],b=a[k+1],l<v&&(v=l),b<r&&(r=b),l>h&&(h=l),b>d&&(d=b);h=Math.max(h-v,d-r);h=0!==h?1/h:0}Wc(f,g,c,v,r,h);return g}},$a={area:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d].x*a[e].y- 0="" a[e].x*a[d].y;return.5*c},isclockwise:function(a){return="">$a.area(a)},triangulateShape:function(a,b){var c=[],d=[],e=[];sf(a);tf(c,a);var f=a.length;b.forEach(sf);for(a=0;a<b.length;a++)d.push(f),f+=b[a].length,tf(c,b[a]);b=fh.triangulate(c,d);for(a=0;a<b.length;a+=3)e.push(b.slice(a,a+3));return e}};vb.prototype="Object.create(R.prototype);vb.prototype.constructor=vb;vb.prototype.toJSON=function(){var" a="R.prototype.toJSON.call(this);return" uf(this.parameters.shapes,this.parameters.options,a)};ua.prototype="Object.create(D.prototype);Ua.prototype.constructor=Ua;Ua.prototype.toJSON=function(){var" uf(this.parameters.shapes,this.parameters.options,a)};var="" ah="{generateTopUV:function(a,b,c,d,e){a=b[3*d];d=b[3*d+1];var" f="b[3*e];e=b[3*e+1];return[new" z(b[3*c],b[3*c+1]),new="" z(a,d),new="" z(f,e)]},generatesidewalluv:function(a,b,c,d,e,f){a="b[3*c];var" g="b[3*c+1];c=b[3*c+2];var" h="b[3*d],k=b[3*d+1];d=b[3*d+2];var" m="b[3*e],l=b[3*e+1];e=b[3*e+2];var" p="b[3*f],n=b[3*f+1];b=b[3*f+" 2];return.01="">Math.abs(g-k)?[new z(a,1-c),new z(h,1-d),new z(m,1-e),new z(p,1-b)]:[new z(g,1-c),new z(k,1-d),new z(l,1-e),new z(n,1-b)]}};Yc.prototype=Object.create(R.prototype);Yc.prototype.constructor=Yc;cc.prototype=Object.create(Ua.prototype);cc.prototype.constructor=cc;Zc.prototype=Object.create(R.prototype);Zc.prototype.constructor=Zc;wb.prototype=Object.create(D.prototype);wb.prototype.constructor=wb;$c.prototype=Object.create(R.prototype);$c.prototype.constructor=$c;dc.prototype=Object.create(D.prototype);
dc.prototype.constructor=dc;ad.prototype=Object.create(R.prototype);ad.prototype.constructor=ad;ec.prototype=Object.create(D.prototype);ec.prototype.constructor=ec;xb.prototype=Object.create(R.prototype);xb.prototype.constructor=xb;xb.prototype.toJSON=function(){var a=R.prototype.toJSON.call(this);return vf(this.parameters.shapes,a)};yb.prototype=Object.create(D.prototype);yb.prototype.constructor=yb;yb.prototype.toJSON=function(){var a=D.prototype.toJSON.call(this);return vf(this.parameters.shapes,
a)};fc.prototype=Object.create(D.prototype);fc.prototype.constructor=fc;zb.prototype=Object.create(R.prototype);zb.prototype.constructor=zb;ab.prototype=Object.create(D.prototype);ab.prototype.constructor=ab;bd.prototype=Object.create(zb.prototype);bd.prototype.constructor=bd;cd.prototype=Object.create(ab.prototype);cd.prototype.constructor=cd;dd.prototype=Object.create(R.prototype);dd.prototype.constructor=dd;gc.prototype=Object.create(D.prototype);gc.prototype.constructor=gc;var ia=Object.freeze({WireframeGeometry:Vb,
ParametricGeometry:Lc,ParametricBufferGeometry:Wb,TetrahedronGeometry:Nc,TetrahedronBufferGeometry:Xb,OctahedronGeometry:Oc,OctahedronBufferGeometry:tb,IcosahedronGeometry:Pc,IcosahedronBufferGeometry:Yb,DodecahedronGeometry:Qc,DodecahedronBufferGeometry:Zb,PolyhedronGeometry:Mc,PolyhedronBufferGeometry:za,TubeGeometry:Rc,TubeBufferGeometry:$b,TorusKnotGeometry:Sc,TorusKnotBufferGeometry:ac,TorusGeometry:Tc,TorusBufferGeometry:bc,TextGeometry:Yc,TextBufferGeometry:cc,SphereGeometry:Zc,SphereBufferGeometry:wb,
RingGeometry:$c,RingBufferGeometry:dc,PlaneGeometry:Ac,PlaneBufferGeometry:qb,LatheGeometry:ad,LatheBufferGeometry:ec,ShapeGeometry:xb,ShapeBufferGeometry:yb,ExtrudeGeometry:vb,ExtrudeBufferGeometry:Ua,EdgesGeometry:fc,ConeGeometry:bd,ConeBufferGeometry:cd,CylinderGeometry:zb,CylinderBufferGeometry:ab,CircleGeometry:dd,CircleBufferGeometry:gc,BoxGeometry:Mb,BoxBufferGeometry:pb});Ab.prototype=Object.create(Q.prototype);Ab.prototype.constructor=Ab;Ab.prototype.isShadowMaterial=!0;Ab.prototype.copy=
function(a){Q.prototype.copy.call(this,a);this.color.copy(a.color);return this};hc.prototype=Object.create(Ca.prototype);hc.prototype.constructor=hc;hc.prototype.isRawShaderMaterial=!0;Va.prototype=Object.create(Q.prototype);Va.prototype.constructor=Va;Va.prototype.isMeshStandardMaterial=!0;Va.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=
a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=
a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Bb.prototype=Object.create(Va.prototype);Bb.prototype.constructor=Bb;Bb.prototype.isMeshPhysicalMaterial=
!0;Bb.prototype.copy=function(a){Va.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};Ia.prototype=Object.create(Q.prototype);Ia.prototype.constructor=Ia;Ia.prototype.isMeshPhongMaterial=!0;Ia.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=
a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;
this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Cb.prototype=Object.create(Ia.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isMeshToonMaterial=!0;Cb.prototype.copy=function(a){Ia.prototype.copy.call(this,
a);this.gradientMap=a.gradientMap;return this};Db.prototype=Object.create(Q.prototype);Db.prototype.constructor=Db;Db.prototype.isMeshNormalMaterial=!0;Db.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;
this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Eb.prototype=Object.create(Q.prototype);Eb.prototype.constructor=Eb;Eb.prototype.isMeshLambertMaterial=!0;Eb.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);
this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};
Fb.prototype=Object.create(Q.prototype);Fb.prototype.constructor=Fb;Fb.prototype.isMeshMatcapMaterial=!0;Fb.prototype.copy=function(a){Q.prototype.copy.call(this,a);this.defines={MATCAP:""};this.color.copy(a.color);this.matcap=a.matcap;this.map=a.map;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=
a.displacementBias;this.alphaMap=a.alphaMap;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};Gb.prototype=Object.create(W.prototype);Gb.prototype.constructor=Gb;Gb.prototype.isLineDashedMaterial=!0;Gb.prototype.copy=function(a){W.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var gh=Object.freeze({ShadowMaterial:Ab,SpriteMaterial:ib,RawShaderMaterial:hc,ShaderMaterial:Ca,PointsMaterial:Ha,
MeshPhysicalMaterial:Bb,MeshStandardMaterial:Va,MeshPhongMaterial:Ia,MeshToonMaterial:Cb,MeshNormalMaterial:Db,MeshLambertMaterial:Eb,MeshDepthMaterial:fb,MeshDistanceMaterial:gb,MeshBasicMaterial:xa,MeshMatcapMaterial:Fb,LineDashedMaterial:Gb,LineBasicMaterial:W,Material:Q}),sa={arraySlice:function(a,b,c){return sa.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==c?c:a.length)):a.slice(b,c)},convertArray:function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?
new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,c=Array(b),d=0;d!==b;++d)c[d]=d;c.sort(function(b,c){return a[b]-a[c]});return c},sortedArray:function(a,b,c){for(var d=a.length,e=new a.constructor(d),f=0,g=0;g!==d;++f)for(var h=c[f]*b,k=0;k!==b;++k)e[g++]=a[h+k];return e},flattenJSON:function(a,b,c,d){for(var e=1,f=a[0];void 0!==f&&void 0===f[d];)f=a[e++];if(void 0!==f){var g=f[d];
if(void 0!==g)if(Array.isArray(g)){do g=f[d],void 0!==g&&(b.push(f.time),c.push.apply(c,g)),f=a[e++];while(void 0!==f)}else if(void 0!==g.toArray){do g=f[d],void 0!==g&&(b.push(f.time),g.toArray(c,c.length)),f=a[e++];while(void 0!==f)}else{do g=f[d],void 0!==g&&(b.push(f.time),c.push(g)),f=a[e++];while(void 0!==f)}}}};Object.assign(wa.prototype,{evaluate:function(a){var b=this.parameterPositions,c=this._cachedIndex,d=b[c],e=b[c-1];a:{b:{c:{d:if(!(a<d)){for(var 0="==d){if(a<e)break" f="c+2;;){if(void" d;="" this._cachedindex="c=b.length;return" this.afterend_(c-1,a,e)}if(c="==f)break;e=d;d=b[++c];if(a<d)break" b}d="b.length;break" c}if(a="">=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0="==e)return" this._cachedindex="0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a">=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0="==e)return" this._cachedindex="0,this.beforeStart_(0,a,d);if(void" c;this.intervalchanged_(c,e,d)}return="" this.interpolate_(c,e,a,d)},settings:null,defaultsettings_:{},getsettings_:function(){return="" this.settings||this.defaultsettings_},copysamplevalue_:function(a){var="" b="this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var" e="0;e!==d;++e)b[e]=c[a+e];return" b},interpolate_:function(){throw="" error("call="" to="" abstract="" method");},intervalchanged_:function(){}});object.assign(wa.prototype,{beforestart_:wa.prototype.copysamplevalue_,afterend_:wa.prototype.copysamplevalue_});="" dd.prototype="Object.assign(Object.create(wa.prototype),{constructor:Dd,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,b,c){var" d="this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void" 2401:e="a;g=2*b-c;break;case" 2402:e="d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void" 2401:f="a;h=2*c-b;break;case" 2402:f="1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;" this._weightprev="a/(b-g);this._weightNext=a/(h-c);this._offsetPrev=e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var" h="a-g,k=this._offsetPrev,m=this._offsetNext,l=this._weightPrev,p=this._weightNext,n=(c-b)/(d-b);c=n*n;d=c*n;b=-l*d+2*l*c-l*n;l=(1+l)*d+(-1.5-2*l)*c+(-.5+l)*n+1;n=(-1-p)*d+(1.5+p)*c+.5*n;p=p*d-p*c;for(c=0;c!==g;++c)e[c]=b*f[k+c]+l*f[h+c]+n*f[a+c]+p*f[m+c];return" e}});ed.prototype="Object.assign(Object.create(wa.prototype)," {constructor:ed,interpolate_:function(a,b,c,d){var="" this.copysamplevalue_(a-1)}});object.assign(qa,{tojson:function(a){var="" 0!="=b.toJSON)b=b.toJSON(a);else{b={name:a.name,times:sa.convertArray(a.times,Array),values:sa.convertArray(a.values," array)};var="" c="a.getInterpolation();c!==a.DefaultInterpolation&&(b.interpolation=c)}b.type=a.ValueTypeName;return" b}});object.assign(qa.prototype,{constructor:qa,timebuffertype:float32array,valuebuffertype:float32array,defaultinterpolation:2301,interpolantfactorymethoddiscrete:function(a){return="" new="" ed(this.times,this.values,this.getvaluesize(),a)},interpolantfactorymethodlinear:function(a){return="" ed(this.times,this.values,this.getvaluesize(),a)},interpolantfactorymethodsmooth:function(a){return="" dd(this.times,="" this.values,this.getvaluesize(),a)},setinterpolation:function(a){switch(a){case="" 2300:var="" 2301:b="this.InterpolantFactoryMethodLinear;break;case" 2302:b="this.InterpolantFactoryMethodSmooth}if(void" interpolation="" for="" "+this.valuetypename+"="" keyframe="" track="" named="" "+this.name;if(void="" throw="" error(b);console.warn("three.keyframetrack:",="" b);return="" this}this.createinterpolant="b;return" this},getinterpolation:function(){switch(this.createinterpolant){case="" this.interpolantfactorymethoddiscrete:return="" 2300;case="" this.interpolantfactorymethodlinear:return="" 2301;case="" this.interpolantfactorymethodsmooth:return="" 2302}},getvaluesize:function(){return="" this.values.length="" this.times.length},shift:function(a){if(0!="=a)for(var" this},scale:function(a){if(1!="=a)for(var" d;++c)b[c]*="a;return" this},trim:function(a,b){for(var="">b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),a=this.getValueSize(),this.times=sa.arraySlice(c,e,f),this.values=sa.arraySlice(this.values,e*a,f*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var c=this.times;b=this.values;var d=c.length;0===d&&(console.error("THREE.KeyframeTrack: Track is empty.",
this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&sa.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,
c=this.getValueSize(),d=2302===this.getInterpolation(),e=1,f=a.length-1,g=1;g<f;++g){var 0="==d.length?null:new" h="!1,k=a[g];if(k!==a[g+1]&&(1!==g||k!==k[0]))if(d)h=!0;else{var" m="g*c,l=m-c,p=m+c;for(k=0;k!==c;++k){var" n="b[m+k];if(n!==b[l+k]||n!==b[p+k]){h=!0;break}}}if(h){if(g!==e)for(a[e]=a[g],h=g*c,m=e*c,k=0;k!==c;++k)b[m+k]=b[h+k];++e}}if(0<f){a[e]=a[f];h=f*c;m=e*c;for(k=0;k!==c;++k)b[m+k]=b[h+k];++e}e!==a.length&&(this.times=sa.arraySlice(a,0,e),this.values=sa.arraySlice(b,0,e*c));return" this},clone:function(){var="" a="sa.arraySlice(this.times,0),b=sa.arraySlice(this.values,0);a=new" this.constructor(this.name,a,b);a.createinterpolant="this.createInterpolant;return" a}});fd.prototype="Object.assign(Object.create(qa.prototype),{constructor:Fd,ValueTypeName:" bool",valuebuffertype:array,defaultinterpolation:2300,interpolantfactorymethodlinear:void"="" 0,interpolantfactorymethodsmooth:void="" 0});gd.prototype="Object.assign(Object.create(qa.prototype),{constructor:Gd,ValueTypeName:" color"});ic.prototype="Object.assign(Object.create(qa.prototype),"" {constructor:ic,valuetypename:"number"});hd.prototype="Object.assign(Object.create(wa.prototype),{constructor:Hd,interpolate_:function(a,b,c,d){var" e="this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ka.slerpFlat(e,0,f,a-g,f,a,b);return" e}});fd.prototype="Object.assign(Object.create(qa.prototype),{constructor:fd,ValueTypeName:" quaternion",defaultinterpolation:2301,interpolantfactorymethodlinear:function(a){return"="" new="" hd(this.times,this.values,this.getvaluesize(),="" a)},interpolantfactorymethodsmooth:void="" 0});id.prototype="Object.assign(Object.create(qa.prototype),{constructor:Id,ValueTypeName:" string",valuebuffertype:array,defaultinterpolation:2300,interpolantfactorymethodlinear:void"="" 0});jc.prototype="Object.assign(Object.create(qa.prototype),{constructor:jc,ValueTypeName:" vector"});object.assign(fa,{parse:function(a){for(var"="" b="[],c=a.tracks,d=1/(a.fps||1),e=0,f=c.length;e!==f;++e)b.push(ch(c[e]).scale(d));return" fa(a.name,="" a.duration,b)},tojson:function(a){var="" d="0,e=c.length;d!==e;++d)b.push(qa.toJSON(c[d]));return" a},createfrommorphtargetsequence:function(a,b,c,d){for(var="" ic(".morphtargetinfluences["+b[g].name+"]",h,k)).scale(1="" c))}return="" fa(a,-1,f)},findbyname:function(a,b){var="" c="a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===b)return" c[a];return="" null},createclipsfrommorphtargetsequences:function(a,b,c){for(var="" in="" d)a.push(fa.createfrommorphtargetsequence(m,d[m],b,c));return="" a},parseanimation:function(a,="" b){if(!a)return="" console.error("three.animationclip:="" no="" animation="" jsonloader="" data."),null;var="" f="[],g=[];sa.flattenJSON(c,f,g,d);0!==f.length&&e.push(new" a(b,f,g))}},d="[],e=a.name||" default",f="a.length||-1,g=a.fps||30;a=a.hierarchy||[];for(var"" k="a[h].keys;if(k&&0!==k.length)if(k[0].morphTargets){f={};for(var" l="0;l<k[m].morphTargets.length;l++)f[k[m].morphTargets[l]]=-1;for(var" p="" f){var="" r="k[m];n.push(r.time);v.push(r.morphTarget===p?1:0)}d.push(new" ic(".morphtargetinfluence["+p+"]",n,v))}f="f.length*(g||1)}else" +b[h].name+"]",c(jc,m+".position",k,"pos",d),c(fd,m+".quaternion",k,"rot",d),c(jc,m+".scale",k,"scl",d)}return="" fa(e,f,d)}});object.assign(fa.prototype,{resetduration:function(){for(var="" a;return="" this},trim:function(){for(var="" this},validate:function(){for(var="" a},optimize:function(){for(var="" this},clone:function(){for(var="" fa(this.name,this.duration,a)}});var="" ib="{enabled:!1,files:{},add:function(a,b){!1!==" this.enabled&&(this.files[a]="b)},get:function(a){if(!1!==this.enabled)return" this.files[a]},remove:function(a){delete="" this.files[a]},clear:function(){this.files="{}}},Aa=new" je,pa="{};Object.assign(Ja.prototype,{load:function(a,b,c,d){void" 0!="=this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var" e.manager.itemstart(a),settimeout(function(){b&&b(f);e.manager.itemend(a)},0),f;if(void="" else{var="" g="a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){c=g[1];var" "arraybuffer":case="" "blob":var="" uint8array(g.length);for(h="0;h<g.length;h++)m[h]=g.charCodeAt(h);var" =="=k?new" blob([m.buffer],{type:c}):m.buffer;break;case="" "document":l="(new" domparser).parsefromstring(g,c);break;case="" "json":l="JSON.parse(g);break;default:l=g}setTimeout(function(){b&&b(l);e.manager.itemEnd(a)}," 0)}catch(t){settimeout(function(){d&&d(t);e.manager.itemerror(a);e.manager.itemend(a)},0)}}else{pa[a]="[];Pa[a].push({onLoad:b,onProgress:c,onError:d});var" xmlhttprequest;p.open("get",a,!0);p.addeventlistener("load",function(b){var="" pa[a];if(200="==this.status||0===this.status){0===this.status&&console.warn(" three.fileloader:"="" http="" status="" received.");for(var="" d[f],h.onerror)h.onerror(b);e.manager.itemerror(a)}e.manager.itemend(a)},!1);p.addeventlistener("progress",function(b){for(var="" pa[a];for(var="" e.manager.itemend(a)},!1);void="" this.requestheader)p.setrequestheader(h,this.requestheader[h]);p.send(null)}e.manager.itemstart(a);return="" p}},setpath:function(a){this.path="a;return" this},setresponsetype:function(a){this.responsetype="a;return" this},setwithcredentials:function(a){this.withcredentials="a;return" this},setmimetype:function(a){this.mimetype="a;return" this},setrequestheader:function(a){this.requestheader="a;return" this}});object.assign(wf.prototype,{load:function(a,b,c,d){var="" ja(e.manager);f.setpath(e.path);f.load(a,function(a){b(e.parse(json.parse(a)))},c,d)},parse:function(a,b){for(var="" this}});object.assign(xf.prototype,{load:function(a,b,c,d){function="" e(e){k.load(a[e],="" function(a){a="f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};m+=1;6===m&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var" ub;h.image="g;var" ja(this.manager);k.setpath(this.path);k.setresponsetype("arraybuffer");if(array.isarray(a))for(var="" k.load(a,function(a){a="f._parser(a,!0);if(a.isCubemap)for(var" for(var="" h.image.width="a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&(h.minFilter=1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return" h},setpath:function(a){this.path="a;return" this}});object.assign(ke.prototype,{load:function(a,b,c,d){var="" lb,g="new" ja(this.manager);g.setresponsetype("arraybuffer");g.setpath(this.path);="" g.load(a,function(a){if(a="e._parser(a))void" a.mipmapcount&&(f.minfilter="1006),f.needsUpdate=!0,b&&b(f,a)},c,d);return" f},setpath:function(a){this.path="a;return" this}});object.assign(gd.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){function="" e(){k.removeeventlistener("load",e,!1);k.removeeventlistener("error",f,!1);ib.add(a,this);b&&b(this);g.manager.itemend(a)}function="" f(b){k.removeeventlistener("load",e,!1);k.removeeventlistener("error",f,!1);d&&d(b);g.manager.itemerror(a);g.manager.itemend(a)}void="" (a="this.path+a);a=this.manager.resolveURL(a);var" g.manager.itemstart(a),settimeout(function(){b&&b(h);g.manager.itemend(a)},0),h;var="" k},setcrossorigin:function(a){this.crossorigin="a;return" this},setpath:function(a){this.path="a;return" this}});object.assign(le.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){function="" e(c){g.load(a[c],function(a){f.images[c]="a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void" 0,d)}var="" za,g="new" gd(this.manager);g.setcrossorigin(this.crossorigin);g.setpath(this.path);var="" f},setcrossorigin:function(a){this.crossorigin="a;return" this}});object.assign(jd.prototype,{crossorigin:"anonymous",load:function(a,="" b,c,d){var="" s,f="new" gd(this.manager);f.setcrossorigin(this.crossorigin);f.setpath(this.path);f.load(a,function(c){e.image="c;c=0<a.search(/\.jpe?g($|\?)/i)||0===a.search(/^data:image\/jpeg/);e.format=c?1022:1023;e.needsUpdate=!0;void" e},setcrossorigin:function(a){this.crossorigin="a;return" this}});object.assign(k.prototype,{getpoint:function(){console.warn("three.curve:="" .getpoint()="" not="" implemented.");return="" null},getpointat:function(a,="" b){a="this.getUtoTmapping(a);return" this.getpoint(a,b)},getpoints:function(a){void="" b},getspacedpoints:function(a){void="" b},getlength:function(){var="" a[a.length-1]},getlengths:function(a){void="" this.cachearclengths;="" this.needsupdate="!1;var" this.cachearclengths="b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var">g)e=a+1;else if(0<g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a="" (d-1);e="c[a];return(a+(b-e)/(c[a+1]-e))/(d-1)},getTangent:function(a){var" b="a-1E-4;a+=1E-4;0">b&&(b=0);1<a&&(a=1);b=this.getpoint(b);return this.getpoint(a).clone().sub(b).normalize()},gettangentat:function(a){a="this.getUtoTmapping(a);return" this.gettangent(a)},computefrenetframes:function(a,b){var="" c="new" n,d="[],e=[],f=[],g=new" n,h="new" j,k;for(k="0;k<=a;k++){var" m="k/a;d[k]=this.getTangentAt(m);d[k].normalize()}e[0]=new" n;f[0]="new" n;k="Number.MAX_VALUE;m=Math.abs(d[0].x);var" l="Math.abs(d[0].y),p=Math.abs(d[0].z);m<=k&&(k=m,c.set(1,0,0));l<=k&&(k=l,c.set(0,1,0));p<=k&&c.set(0," 0,1);g.crossvectors(d[0],c).normalize();e[0].crossvectors(d[0],g);f[0].crossvectors(d[0],e[0]);for(k="1;k<=a;k++)e[k]=e[k-1].clone(),f[k]=f[k-1].clone(),g.crossVectors(d[k-1],d[k]),g.length()">Number.EPSILON&&(g.normalize(),c=Math.acos(G.clamp(d[k-1].dot(d[k]),-1,1)),e[k].applyMatrix4(h.makeRotationAxis(g,c))),f[k].crossVectors(d[k],e[k]);if(!0===b)for(c=Math.acos(G.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossvectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applymatrix4(h.makerotationaxis(d[k], c*k)),f[k].crossvectors(d[k],e[k]);return{tangents:d,normals:e,binormals:f}},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.arclengthdivisions="a.arcLengthDivisions;return" this},tojson:function(){var="" a="{metadata:{version:4.5,type:" curve",generator:"curve.tojson"}};a.arclengthdivisions="this.arcLengthDivisions;a.type=this.type;return"" a},fromjson:function(a){this.arclengthdivisions="a.arcLengthDivisions;return" this}});ea.prototype="Object.create(K.prototype);Ea.prototype.constructor=" ea;ea.prototype.isellipsecurve="!0;Ea.prototype.getPoint=function(a,b){b=b||new" z;for(var="" c="2*Math.PI,d=this.aEndAngle-this.aStartAngle,e=Math.abs(d)<Number.EPSILON;0">d;)d+=c;for(;d>c;)d-=c;d<number.epsilon&&(d=e?0:c);!0!==this.aclockwise||e||(d=d===c?-c:d-c);c=this.astartangle+a*d;a=this.ax+this.xradius*math.cos(c);var f="this.aY+this.yRadius*Math.sin(c);0!==this.aRotation&&(c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),e=a-this.aX,f-=this.aY,a=e*c-f*d+this.aX,f=e*d+f*c+this.aY);return" b.set(a,="" f)};ea.prototype.copy="function(a){K.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return" this};ea.prototype.tojson="function(){var" a="K.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=" this.arotation;return="" a};ea.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return" this};kc.prototype="Object.create(Ea.prototype);kc.prototype.constructor=kc;kc.prototype.isArcCurve=!0;var" wd="new" n,ie="new" me,je="new" me,ke="new" me;oa.prototype="Object.create(K.prototype);oa.prototype.constructor=oa;oa.prototype.isCatmullRomCurve3=" !0;oa.prototype.getpoint="function(a,b){b=b||new" n;var="" c="this.points,d=c.length;a*=d-(this.closed?0:1);var" e="Math.floor(a);a-=e;this.closed?e+=0<e?0:(Math.floor(Math.abs(e)/d)+1)*d:0===a&&e===d-1&&(e=d-2,a=1);if(this.closed||0<e)var" wd.subvectors(c[0],c[1]).add(c[0]),f="Wd;var" g="c[e%d];var" h="c[(e+1)%d];this.closed||e+2<d?c=c[(e+2)%d]:(Wd.subVectors(c[d-1],c[d-2]).add(c[d-1]),c=Wd);if(" centripetal"="==this.curveType||"chordal"===this.curveType){var"" k="chordal" =="=this.curveType?.5:.25;" d="Math.pow(f.distanceToSquared(g),k);e=Math.pow(g.distanceToSquared(h),k);k=Math.pow(h.distanceToSquared(c),k);1E-4">e&&(e=1);1E-4>d&&(d=e);1E-4>k&&(k=e);Ie.initNonuniformCatmullRom(f.x,g.x,h.x,c.x,d,e,k);Je.initNonuniformCatmullRom(f.y,g.y,h.y,c.y,d,e,k);Ke.initNonuniformCatmullRom(f.z,g.z,h.z,c.z,d,e,k)}else"catmullrom"===this.curveType&&(Ie.initCatmullRom(f.x,g.x,h.x,c.x,this.tension),Je.initCatmullRom(f.y,g.y,h.y,c.y,this.tension),Ke.initCatmullRom(f.z,g.z,h.z,c.z,this.tension));b.set(Ie.calc(a),
Je.calc(a),Ke.calc(a));return b};oa.prototype.copy=function(a){K.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curvetype=a.curvetype;this.tension=a.tension;return this};oa.prototype.tojson="function(){var" a="K.prototype.toJSON.call(this);a.points=[];for(var" b="0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return" a};="" oa.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.points=[];for(var" d="a.points[b];this.points.push((new" n).fromarray(d))}this.closed="a.closed;this.curveType=a.curveType;this.tension=a.tension;return" this};ka.prototype="Object.create(K.prototype);Ka.prototype.constructor=Ka;Ka.prototype.isCubicBezierCurve=!0;Ka.prototype.getPoint=function(a,b){b=b||new" z;var="" c="this.v0,d=this.v1,e=this.v2,f=this.v3;b.set(id(a,c.x,d.x,e.x,f.x),id(a,c.y,d.y,e.y," f.y));return="" b};ka.prototype.copy="function(a){K.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return" this};ka.prototype.tojson="function(){var" a};ka.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return" this};="" wa.prototype="Object.create(K.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isCubicBezierCurve3=!0;Wa.prototype.getPoint=function(a,b){b=b||new" n;var="" b};wa.prototype.copy="function(a){K.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return" this};wa.prototype.tojson="function(){var" a.v1="this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return" a};wa.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return" this};ba.prototype="Object.create(K.prototype);Ba.prototype.constructor=Ba;Ba.prototype.isLineCurve=!0;Ba.prototype.getPoint=function(a,b){b=b||new" z;1="==a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return" b};ba.prototype.getpointat="function(a,b){return" this.getpoint(a,b)};ba.prototype.gettangent="function(){return" this.v2.clone().sub(this.v1).normalize()};ba.prototype.copy="function(a){K.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};ba.prototype.tojson="function(){var" a};ba.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};la.prototype="Object.create(K.prototype);La.prototype.constructor=La;La.prototype.isLineCurve3=!0;La.prototype.getPoint=function(a,b){b=b||new" n;1="==a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return" b};la.prototype.getpointat="function(a,b){return" this.getpoint(a,b)};la.prototype.copy="function(a){K.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};la.prototype.tojson="function(){var" return="" a};la.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};ma.prototype="Object.create(K.prototype);Ma.prototype.constructor=Ma;Ma.prototype.isQuadraticBezierCurve=!0;Ma.prototype.getPoint=function(a,b){b=b||new" b};ma.prototype.copy="function(a){K.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return" ma.prototype.tojson="function(){var" a};ma.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};xa.prototype="Object.create(K.prototype);Xa.prototype.constructor=Xa;Xa.prototype.isQuadraticBezierCurve3=!0;Xa.prototype.getPoint=function(a,b){b=b||new" d.x,e.x),hd(a,c.y,d.y,e.y),hd(a,c.z,d.z,e.z));return="" b};xa.prototype.copy="function(a){K.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return" this};xa.prototype.tojson="function(){var" a};xa.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return" this};na.prototype="Object.create(K.prototype);" na.prototype.constructor="Na;Na.prototype.isSplineCurve=!0;Na.prototype.getPoint=function(a,b){b=b||new" e="c[0===a?a:a-1],f=c[a],g=c[a">c.length-2?c.length-1:a+1];c=c[a>c.length-3?c.length-1:a+2];b.set(yf(d,e.x,f.x,g.x,c.x),yf(d,e.y,f.y,g.y,c.y));return b};Na.prototype.copy=function(a){K.prototype.copy.call(this,a);this.points=[];for(var b=0,c=a.points.length;b<c;b++)this.points.push(a.points[b].clone());return this};na.prototype.tojson="function(){var" a="K.prototype.toJSON.call(this);a.points=[];for(var" b="0,c=this.points.length;b<c;b++)a.points.push(this.points[b].toArray());return" a};na.prototype.fromjson="function(a){K.prototype.fromJSON.call(this,a);this.points=[];for(var" d="a.points[b];this.points.push((new" z).fromarray(d))}return="" this};var="" lf="Object.freeze({ArcCurve:kc,CatmullRomCurve3:oa,CubicBezierCurve:Ka,CubicBezierCurve3:Wa,EllipseCurve:Ea,LineCurve:Ba,LineCurve3:La,QuadraticBezierCurve:Ma,QuadraticBezierCurve3:Xa," splinecurve:na});bb.prototype="Object.assign(Object.create(K.prototype),{constructor:bb,add:function(a){this.curves.push(a)},closePath:function(){var" ba(b,a))},getpoint:function(a){var="">=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();
return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getlength(),a.push(b);return 0="==a&&(a=40);for(var" this.cachelengths="a},getSpacedPoints:function(a){void" b="[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return" b},getpoints:function(a){a="a||12;for(var" f="e[d];f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&(f.isLineCurve||f.isLineCurve3)?1:f&&f.isSplineCurve?a*f.points.length:a);for(var" g="0;g<f.length;g++){var" h="f[g];c&&c.equals(h)||(b.push(h),c=h)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return" b},copy:function(a){k.prototype.copy.call(this,a);this.curves="[];for(var" this},="" tojson:function(){var="" a="K.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var" a},fromjson:function(a){k.prototype.fromjson.call(this,a);this.autoclose="a.autoClose;this.curves=[];for(var" d="a.curves[b];this.curves.push((new" lf[d.type]).fromjson(d))}return="" this}});oa.prototype="Object.assign(Object.create(bb.prototype),{constructor:Oa,setFromPoints:function(a){this.moveTo(a[0].x," a[0].y);for(var="" c="new" ba(this.currentpoint.clone(),new="" z(a,b));this.curves.push(c);this.currentpoint.set(a,b)},quadraticcurveto:function(a,b,c,d){a="new" ma(this.currentpoint.clone(),new="" z(a,b),new="" z(c,d));this.curves.push(a);this.currentpoint.set(c,d)},beziercurveto:function(a,b,c,d,e,f){a="new" ka(this.currentpoint.clone(),new="" z(c,d),new="" z(e,f));this.curves.push(a);="" this.currentpoint.set(e,f)},splinethru:function(a){var="" na(b);this.curves.push(b);this.currentpoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentpoint.x,b+this.currentpoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentpoint.x,b+this.currentpoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a="new" ea(a,b,c,d,e,f,g,h);0<this.curves.length&&="" (b="a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)},copy:function(a){bb.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return" this},tojson:function(){var="" a},fromjson:function(a){bb.prototype.fromjson.call(this,a);this.currentpoint.fromarray(a.currentpoint);return="" this}});jb.prototype="Object.assign(Object.create(Oa.prototype)," {constructor:jb,getpointsholes:function(a){for(var="" b},extractpoints:function(a){return{shape:this.getpoints(a),holes:this.getpointsholes(a)}},copy:function(a){oa.prototype.copy.call(this,a);this.holes="[];for(var" return="" a},fromjson:function(a){oa.prototype.fromjson.call(this,a);this.uuid="a.uuid;this.holes=[];for(var" oa).fromjson(d))}return="" this}});ca.prototype="Object.assign(Object.create(C.prototype),{constructor:ca,isLight:!0,copy:function(a){C.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return" this},tojson:function(a){a="C.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=" this.intensity;void="" 0!="=this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void" a}});kd.prototype="Object.assign(Object.create(ca.prototype),{constructor:Kd,isHemisphereLight:!0,copy:function(a){ca.prototype.copy.call(this," a);this.groundcolor.copy(a.groundcolor);return="" this}});object.assign(hb.prototype,{copy:function(a){this.camera="a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return" this},clone:function(){return(new="" this.constructor).copy(this)},tojson:function(){var="" a.camera.matrix;="" a}});ld.prototype="Object.assign(Object.create(Hb.prototype),{constructor:Ld,isSpotLightShadow:!0,update:function(a){var" a.penumbra;this.decay="a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return" this}});nd.prototype="Object.assign(Object.create(ca.prototype),{constructor:Nd,isPointLight:!0,copy:function(a){ca.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return" this}});jd.prototype="Object.assign(Object.create(Ta.prototype),{constructor:jd,isOrthographicCamera:!0,copy:function(a,b){Ta.prototype.copy.call(this,a,b);this.left=a.left;this.right=" a.right;this.top="a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return" this},setviewoffset:function(a,b,c,d,e,f){null="==this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=c;this.view.offsetY=d;this.view.width=e;this.view.height=f;this.updateProjectionMatrix()},clearViewOffset:function(){null!==" this.view&&(this.view.enabled="!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var" c*f;c="e+this.view.width/c*f;a-=this.view.offsetY/b*d;b=a-this.view.height/b*d}this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){a=C.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return" a}});="" od.prototype="Object.assign(Object.create(Hb.prototype),{constructor:Od});Pd.prototype=Object.assign(Object.create(ca.prototype),{constructor:Pd,isDirectionalLight:!0,copy:function(a){ca.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return" this}});qd.prototype="Object.assign(Object.create(ca.prototype),{constructor:Qd,isAmbientLight:!0});Rd.prototype=Object.assign(Object.create(ca.prototype),{constructor:Rd,isRectAreaLight:!0,copy:function(a){ca.prototype.copy.call(this," a);this.width="a.width;this.height=a.height;return" a}});object.assign(sd.prototype,{load:function(a,b,c,d){var="" e="this,f=new" ja(e.manager);f.setpath(e.path);f.load(a,function(a){b(e.parse(json.parse(a)))},c,d)},parse:function(a){function="" b(a){void="" undefined="" texture",a);return="" c[a]}var="" gh[a.type];void="" (d.uuid="a.uuid);void" a.vertexcolors);void="" void="" (d.polygonoffset="a.polygonOffset);void" in="" a.uniforms){var="" {};switch(f.type){case="" "t":d.uniforms[e].value="b(f.value);break;case" "c":d.uniforms[e].value="(new" h).sethex(f.value);break;case="" "v2":d.uniforms[e].value="(new" z).fromarray(f.value);break;case="" "v3":d.uniforms[e].value="(new" n).fromarray(f.value);break;case="" "v4":d.uniforms[e].value="(new" v).fromarray(f.value);break;case="" "m3":d.uniforms[e].value="(new" ra).fromarray(f.value);case="" "m4":d.uniforms[e].value="(new" j).fromarray(f.value);break;default:d.uniforms[e].value="f.value}}void" a.defines);void="" a.extensions)d.extensions[g]="a.extensions[g];void" z).fromarray(e));void="" (d.roughnessmap="b(a.roughnessMap));void" a.lightmapintensity&&(d.lightmapintensity="a.lightMapIntensity);void" d},setpath:function(a){this.path="a;return" this},settextures:function(a){this.textures="a;return" this}});var="" le="{decodeText:function(a){if(" undefined"!="=typeof"" textdecoder)return(new="" textdecoder).decode(a);for(var="" ,c="0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);return" decodeuricomponent(escape(b))},="" extracturlbase:function(a){var="" ja(e.manager);f.setpath(e.path);f.load(a,function(a){b(e.parse(json.parse(a)))},c,d)},parse:function(a){var="" d,c="a.data.index;void" mf[c.type](c.array),b.setindex(new="" l(c,1)));var="" d){var="" mf[e.type](e.array);b.addattribute(f,new="" l(c,e.itemsize,e.normalized))}var="" a.data.offsets;if(void="" n,void="" ga(c,f.radius));a.name&&(b.name="a.name);a.userData&&(b.userData=a.userData);return" b},setpath:function(a){this.path="a;return" mf="{Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:" uint8clampedarray?uint8clampedarray:uint8array,int16array:int16array,="" uint16array:uint16array,int32array:int32array,uint32array:uint32array,float32array:float32array,float64array:float64array};object.assign(oe.prototype,{crossorigin:"anonymous",load:function(a,b,c,d){var="" ja(e.manager);f.setpath(this.path);f.load(a,function(c){var="" can't="" parse="" "+a+".",k.message);return}c="f.metadata;" load="" "+a):e.parse(f,b)},c,d)},setpath:function(a){this.path="a;return" this},setresourcepath:function(a){this.resourcepath="a;return" this},setcrossorigin:function(a){this.crossorigin="a;return" this},parse:function(a,b){var="" d);var="" e},parseshape:function(a){var="" jb).fromjson(a[c]);b[e.uuid]="e}return" b},parsegeometries:function(a,b){var="" ne,e="0,f=a.length;e<f;e++){var" "planegeometry":case="" "planebuffergeometry":var="" ia[g.type](g.width,g.height,="" g.widthsegments,g.heightsegments);break;case="" "boxgeometry":case="" "boxbuffergeometry":case="" "cubegeometry":h="new" ia[g.type](g.width,g.height,g.depth,g.widthsegments,g.heightsegments,g.depthsegments);break;case="" "circlegeometry":case="" "circlebuffergeometry":h="new" ia[g.type](g.radius,g.segments,g.thetastart,g.thetalength);break;case="" "cylindergeometry":case="" "cylinderbuffergeometry":h="new" ia[g.type](g.radiustop,g.radiusbottom,g.height,g.radialsegments,g.heightsegments,g.openended,g.thetastart,g.thetalength);="" break;case="" "conegeometry":case="" "conebuffergeometry":h="new" ia[g.type](g.radius,g.height,g.radialsegments,g.heightsegments,g.openended,g.thetastart,g.thetalength);break;case="" "spheregeometry":case="" "spherebuffergeometry":h="new" ia[g.type](g.radius,g.widthsegments,g.heightsegments,g.phistart,g.philength,g.thetastart,g.thetalength);break;case="" "dodecahedrongeometry":case="" "dodecahedronbuffergeometry":case="" "icosahedrongeometry":case="" "icosahedronbuffergeometry":case="" "octahedrongeometry":case="" "octahedronbuffergeometry":case="" "tetrahedrongeometry":case="" "tetrahedronbuffergeometry":h="new" ia[g.type](g.radius,g.detail);break;case="" "ringgeometry":case="" "ringbuffergeometry":h="new" ia[g.type](g.innerradius,g.outerradius,g.thetasegments,g.phisegments,g.thetastart,g.thetalength);break;case="" "torusgeometry":case="" "torusbuffergeometry":h="new" ia[g.type](g.radius,g.tube,g.radialsegments,g.tubularsegments,g.arc);break;case="" "torusknotgeometry":case="" "torusknotbuffergeometry":h="new" ia[g.type](g.radius,g.tube,g.tubularsegments,g.radialsegments,g.p,g.q);break;case="" "lathegeometry":case="" "lathebuffergeometry":h="new" ia[g.type](g.points,g.segments,g.phistart,g.philength);break;case="" "polyhedrongeometry":case="" "polyhedronbuffergeometry":h="new" ia[g.type](g.vertices,g.indices,g.radius,g.details);break;case="" "shapegeometry":case="" "shapebuffergeometry":h="[];for(var" k="0,m=g.shapes.length;k<m;k++){var" l="b[g.shapes[k]];h.push(l)}h=new" ia[g.type](h,g.curvesegments);break;case="" "extrudegeometry":case="" "extrudebuffergeometry":h="[];k=0;for(m=g.shapes.length;k<m;k++)l=b[g.shapes[k]],h.push(l);k=g.options.extrudePath;void" k&&(g.options.extrudepath="(new" lf[k.type]).fromjson(k));h="new" ia[g.type](h,g.options);break;case="" "buffergeometry":h="d.parse(g);break;case" "geometry":"three"in="" window&&"legacyjsonloader"in="" three?h="(new" three.legacyjsonloader).parse(g,this.resourcepath).geometry:console.error('three.objectloader:="" you="" have="" to="" import="" legacyjsonloader="" order="" geometry="" data="" of="" type="" "geometry".');break;default:console.warn('three.objectloader:="" unsupported="" "'+g.type+'"');continue}h.uuid="g.uuid;void" g.name&&(h.name="g.name);!0===h.isBufferGeometry&&void" c},parsematerials:function(a,b){var="" sd;e.settextures(b);b="0;for(var" m="g.materials[k];void" d},parseanimations:function(a){for(var="" b},parseimages:function(a,b){function="" c(a){d.manager.itemstart(a);return="" f.load(a,function(){d.manager.itemend(a)},void="" 0,function(){d.manager.itemerror(a);d.manager.itemend(a)})}var="" je(b);var="" gd(b);f.setcrossorigin(this.crossorigin);b="0;for(var" p="k[m];p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:d.resourcePath+p;e[h.uuid].push(c(p))}}else" e},parsetextures:function(a,b){function="" c(a,b){if("number"="==typeof" a)return="" a;console.warn("three.objectloader.parsetexture:="" constant="" should="" be="" numeric="" form.",a);return="" b[a]}var="" no="" "image"="" specified="" for',="" g.uuid);void="" image",g.image);var="" za(b[g.image]):new="" s(b[g.image]);h.needsupdate="!0;h.uuid=g.uuid;void" h.wrapt="c(g.wrap[1],Nf));void" d},parseobject:function(a,="" b,c){function="" d(a){void="" geometry",a);return="" b[a]}function="" e(a){if(void="" material",f);b.push(c[f])}return="" b}void="" material",a);return="" c[a]}}switch(a.type){case="" "scene":var="" zd;void="" h(a.background));="" rb(a.fog.color,a.fog.near,a.fog.far):"fogexp2"="==a.fog.type&&(f.fog=new" qb(a.fog.color,a.fog.density)));break;case="" "perspectivecamera":f="new" x(a.fov,a.aspect,a.near,a.far);void="" "orthographiccamera":f="new" jd(a.left,a.right,a.top,a.bottom,="" a.near,a.far);void="" "ambientlight":f="new" qd(a.color,a.intensity);break;case="" "directionallight":f="new" pd(a.color,a.intensity);break;case="" "pointlight":f="new" nd(a.color,a.intensity,a.distance,a.decay);break;case="" "rectarealight":f="new" rd(a.color,a.intensity,a.width,a.height);break;case="" "spotlight":f="new" md(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case="" "hemispherelight":f="new" kd(a.color,a.groundcolor,="" a.intensity);break;case="" "skinnedmesh":console.warn("three.objectloader.parseobject()="" does="" not="" support="" skinnedmesh="" yet.");case="" "mesh":f="d(a.geometry);var" ic(f,g):new="" va(f,g);void="" "lod":f="new" hc;break;case="" "line":f="new" ea(d(a.geometry),e(a.material),a.mode);break;case="" "lineloop":f="new" bd(d(a.geometry),e(a.material));break;case="" "linesegments":f="new" u(d(a.geometry),e(a.material));break;case="" "pointcloud":case="" "points":f="new" tb(d(a.geometry),e(a.material));break;case="" "sprite":f="new" gc(e(a.material));break;case="" "group":f="new" pb;break;default:f="new" c}f.uuid="a.uuid;void" (f.frustumculled="a.frustumCulled);void" f}});var="" hh="{UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302," equirectangularreflectionmapping:303,equirectangularrefractionmapping:304,sphericalreflectionmapping:305,cubeuvreflectionmapping:306,cubeuvrefractionmapping:307},nf="{RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Of={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};pe.prototype={constructor:pe,setOptions:function(a){this.options=a;return" this},load:function(a,="" b,c,d){void="" e.manager.itemstart(a),settimeout(function(){b&&b(f);e.manager.itemend(a)},0),f;fetch(a).then(function(a){return="" a.blob()}).then(function(a){return="" createimagebitmap(a,e.options)}).then(function(c){ib.add(a,c);b&&b(c);e.manager.itemend(a)}).catch(function(b){d&&d(b);e.manager.itemerror(a);e.manager.itemend(a)})},setcrossorigin:function(){return="" this},setpath:function(a){this.path="a;return" this}};object.assign(qe.prototype,{moveto:function(a,b){this.currentpath="new" oa;this.subpaths.push(this.currentpath);this.currentpath.moveto(a,b)},lineto:function(a,b){this.currentpath.lineto(a,b)},quadraticcurveto:function(a,b,c,d){this.currentpath.quadraticcurveto(a,b,c,d)},beziercurveto:function(a,b,c,d,e,f){this.currentpath.beziercurveto(a,b,c,d,e,f)},splinethru:function(a){this.currentpath.splinethru(a)},toshapes:function(a,b){function="" c(a){for(var="" jb;f.curves="e.curves;b.push(f)}return" b}function="" d(a,b){for(var="">Number.EPSILON){if(0>l&&(g=b[f],k=-k,h=b[e],l=-l),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=l*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return 0="==b&&(b=100);var" d}var="" e="$a.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return" c(f);b="[];if(1===" f.length){var="" g="f[0];var" h="new" jb;h.curves="g.curves;b.push(h);return" b}var="" k="!e(f[0].getPoints());k=a?!k:k;h=[];var" l="[],q=[],p=0;l[p]=void" 0;q[p]="[];for(var" n="0,v=f.length;n<v;n++){g=f[n];var" r="g.getPoints();var" u="e(r);(u=a?!u:u)?(!k&&l[p]&&p++,l[p]={s:new" jb,p:r},l[p].s.curves="g.curves,k&&p++,q[p]=[]):q[p].push({h:g,p:r[0]})}if(!l[0])return" c(f);if(1<l.length){n="!1;a=[];e=0;for(f=l.length;e<f;e++)h[e]=[];e=0;for(f=l.length;e<f;e++)for(g=q[e],u=0;u<g.length;u++){k=g[u];p=!0;for(r=0;r<l.length;r++)d(k.p," l[r].p)&&(e!="=r&&a.push({froms:e,tos:r,hole:u}),p?(p=!1,h[r].push(k)):n=!0);p&&h[e].push(k)}0<a.length&&(n||(q=h))}n=0;for(e=l.length;n<e;n++)for(h=l[n].s,b.push(h),a=q[n],f=0,g=a.length;f<g;f++)h.holes.push(a[f].h);return" b}});object.assign(re.prototype,{isfont:!0,generateshapes:function(a,b){void="" c="[],d=b;b=this.data;var" f="(b.boundingBox.yMax-b.boundingBox.yMin+b.underlineThickness)*d;a=[];for(var" e.length;k++){var="" q="d;var" p="g,n=h;if(l=b.glyphs[l]||b.glyphs[" ?"]){var"="" v="new" qe;if(l.o)for(var="" ")),u="0,x=r.length;u<x;)switch(r[u++]){case" "m":var="" a="r[u++]*q+p;var" w="r[u++]*q+n;v.moveTo(A,w);break;case" "l":a="r[u++]*q+p;w=r[u++]*q+n;v.lineTo(A,w);break;case" "q":var="" z="r[u++]*q+p;var" y="r[u++]*q+n;var" b="r[u++]*q+p;var" "b":z="r[u++]*q+p,y=r[u++]*q+n,B=r[u++]*q+p,C=r[u++]*" q+n,a="r[u++]*q+p,w=r[u++]*q+n,v.bezierCurveTo(B,C,A,w,z,y)}q={offsetX:l.ha*q,path:v}}else" 0;g+="q.offsetX;a.push(q.path)}}b=0;for(e=a.length;b<e;b++)Array.prototype.push.apply(c,a[b].toShapes());return" c}});object.assign(zf.prototype,{load:function(a,b,c,d){var="" ja(this.manager);f.setpath(this.path);f.load(a,function(a){try{var="" typeface.js="" support="" is="" being="" deprecated.="" use="" typeface.json="" instead."),c="JSON.parse(a.substring(65," a.length-2))}a="e.parse(c);b&&b(a)},c,d)},parse:function(a){return" new="" re(a)},setpath:function(a){this.path="a;return" this}});kd.handlers="{handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var" e}return="" null}};object.assign(kd.prototype,{crossorigin:"anonymous",onloadstart:function(){},onloadprogress:function(){},onloadcomplete:function(){},initmaterials:function(a,b,c){for(var="" d="[],e=0;e<a.length;++e)d[e]=" this.creatematerial(a[e],b,c);return="" d},creatematerial:function(){var="" h,c="new" jd,d="new" sd;return="" function(e,f,g){function="" h(a,b,d,e,h){a="f+a;var" 0!="=b&&(a.repeat.fromArray(b),1!==b[0]&&(a.wrapS=1E3),1!==b[1]&&(a.wrapT=1E3));void" e[0]&&(a.wraps="1002)," repeat"="==e[1]&&(a.wrapT=1E3),"mirror"===e[1]&&(a.wrapT=1002));void"" in="" e){var="" "dbgcolor":case="" "dbgindex":case="" "opticaldensity":case="" "illumination":break;case="" "dbgname":l.name="p;break;case" "blending":l.blending="a[p];break;case" "colorambient":case="" "mapambient":console.warn("three.loader.creatematerial:",q,"is="" no="" longer="" supported.");="" break;case="" "colordiffuse":l.color="b.fromArray(p).getHex();break;case" "colorspecular":l.specular="b.fromArray(p).getHex();break;case" "coloremissive":l.emissive="b.fromArray(p).getHex();break;case" "specularcoef":l.shininess="p;break;case" "shading":"basic"="==p.toLowerCase()&&(l.type=" meshbasicmaterial");"phong"="==p.toLowerCase()&&(l.type="MeshPhongMaterial");"standard"===p.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"" "mapdiffuse":l.map="h(p,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap," e.mapdiffuseanisotropy);break;case="" "mapdiffuserepeat":case="" "mapdiffuseoffset":case="" "mapdiffusewrap":case="" "mapdiffuseanisotropy":break;case="" "mapemissive":l.emissivemap="h(p,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case" "mapemissiverepeat":case="" "mapemissiveoffset":case="" "mapemissivewrap":case="" "mapemissiveanisotropy":break;case="" "maplight":l.lightmap="h(p,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case" "maplightrepeat":case="" "maplightoffset":case="" "maplightwrap":case="" "maplightanisotropy":break;="" case="" "mapao":l.aomap="h(p,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case" "mapaorepeat":case="" "mapaooffset":case="" "mapaowrap":case="" "mapaoanisotropy":break;case="" "mapbump":l.bumpmap="h(p,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case" "mapbumpscale":l.bumpscale="p;break;case" "mapbumprepeat":case="" "mapbumpoffset":case="" "mapbumpwrap":case="" "mapbumpanisotropy":break;case="" "mapnormal":l.normalmap="h(p,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);" "mapnormalfactor":l.normalscale="p;break;case" "mapnormalrepeat":case="" "mapnormaloffset":case="" "mapnormalwrap":case="" "mapnormalanisotropy":break;case="" "mapspecular":l.specularmap="h(p,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case" "mapspecularrepeat":case="" "mapspecularoffset":case="" "mapspecularwrap":case="" "mapspecularanisotropy":break;case="" "mapmetalness":l.metalnessmap="h(p,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);" "mapmetalnessrepeat":case="" "mapmetalnessoffset":case="" "mapmetalnesswrap":case="" "mapmetalnessanisotropy":break;case="" "maproughness":l.roughnessmap="h(p,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case" "maproughnessrepeat":case="" "maproughnessoffset":case="" "maproughnesswrap":case="" "maproughnessanisotropy":break;case="" "mapalpha":l.alphamap="h(p,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case" "mapalpharepeat":case="" "mapalphaoffset":case="" "mapalphawrap":case="" "mapalphaanisotropy":break;="" "flipsided":l.side="1;break;case" "doublesided":l.side="2;break;case" "transparency":console.warn("three.loader.creatematerial:="" transparency="" has="" been="" renamed="" to="" opacity");l.opacity="p;break;case" "depthtest":case="" "depthwrite":case="" "colorwrite":case="" "opacity":case="" "reflectivity":case="" "transparent":case="" "visible":case="" "wireframe":l[q]="p;break;case" "vertexcolors":!0="==p&&(l.vertexColors=2);" face"="==p&&(l.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial:"" unsupported",q,p)}}"meshbasicmaterial"="==" l.type&&delete="" l.emissive;"meshphongmaterial"!="=l.type&&delete" l.specular;1="">l.opacity&&(l.transparent=!0);d.setTextures(k);return d.parse(l)}}()});var Xd,ve={getContext:function(){void 0===Xd&&(Xd=new (window.AudioContext||window.webkitAudioContext));return Xd},setContext:function(a){Xd=a}};Object.assign(se.prototype,{load:function(a,b,c,d){var e=new Ja(this.manager);e.setResponseType("arraybuffer");e.setPath(this.path);e.load(a,function(a){a=a.slice(0);ve.getContext().decodeAudioData(a,function(a){b(a)})},
c,d)},setPath:function(a){this.path=a;return this}});Object.assign(Af.prototype,{update:function(){var a,b,c,d,e,f,g,h,k=new J,l=new J;return function(m){if(a!==this||b!==m.focus||c!==m.fov||d!==m.aspect*this.aspect||e!==m.near||f!==m.far||g!==m.zoom||h!==this.eyeSep){a=this;b=m.focus;c=m.fov;d=m.aspect*this.aspect;e=m.near;f=m.far;g=m.zoom;var p=m.projectionMatrix.clone();h=this.eyeSep/2;var q=h*e/b,n=e*Math.tan(G.DEG2RAD*c*.5)/g;l.elements[12]=-h;k.elements[12]=h;var r=-n*d+q;var u=n*d+q;p.elements[0]=
2*e/(u-r);p.elements[8]=(u+r)/(u-r);this.cameraL.projectionMatrix.copy(p);r=-n*d-q;u=n*d-q;p.elements[0]=2*e/(u-r);p.elements[8]=(u+r)/(u-r);this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(m.matrixWorld).multiply(l);this.cameraR.matrixWorld.copy(m.matrixWorld).multiply(k)}}()});ld.prototype=Object.create(C.prototype);ld.prototype.constructor=ld;Object.assign(te.prototype,{start:function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=
0;this.running=!0},stop:function(){this.getElapsedTime();this.autoStart=this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=("undefined"===typeof performance?Date:performance).now();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a}});ue.prototype=Object.assign(Object.create(C.prototype),{constructor:ue,getInput:function(){return this.gain},removeFilter:function(){null!==
this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination);return this},getMasterVolume:function(){return this.gain.gain.value},
setMasterVolume:function(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this},updateMatrixWorld:function(){var a=new n,b=new ka,c=new n,d=new n,e=new te;return function(f){C.prototype.updateMatrixWorld.call(this,f);f=this.context.listener;var g=this.up;this.timeDelta=e.getDelta();this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);if(f.positionX){var h=this.context.currentTime+this.timeDelta;f.positionX.linearRampToValueAtTime(a.x,h);f.positionY.linearRampToValueAtTime(a.y,
h);f.positionZ.linearRampToValueAtTime(a.z,h);f.forwardX.linearRampToValueAtTime(d.x,h);f.forwardY.linearRampToValueAtTime(d.y,h);f.forwardZ.linearRampToValueAtTime(d.z,h);f.upX.linearRampToValueAtTime(g.x,h);f.upY.linearRampToValueAtTime(g.y,h);f.upZ.linearRampToValueAtTime(g.z,h)}else f.setPosition(a.x,a.y,a.z),f.setOrientation(d.x,d.y,d.z,g.x,g.y,g.z)}}()});lc.prototype=Object.assign(Object.create(C.prototype),{constructor:lc,getOutput:function(){return this.gain},setNodeSource:function(a){this.hasPlaybackControl=
!1;this.sourceType="audioNode";this.source=a;this.connect();return this},setMediaElementSource:function(a){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return this},setBuffer:function(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");
else{var a=this.context.createBufferSource();a.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);this.startTime=this.context.currentTime;a.start(this.startTime,this.offset);this.isPlaying=!0;this.source=a;this.setDetune(this.detune);this.setPlaybackRate(this.playbackRate);return this.connect()}},pause:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this.source.stop(),this.source.onended=
null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a="1,b=this.filters.length;a<b;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-" 1].connect(this.getoutput())}else="" this.source.connect(this.getoutput());return="" this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var="" this.source.disconnect(this.getoutput());return="" this},getfilters:function(){return="" this.filters},setfilters:function(a){a||(a="[]);!0===this.isPlaying?(this.disconnect(),this.filters=" a,this.connect()):this.filters="a;return" this},setdetune:function(a){this.detune="a;if(void" 0!="=this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return" this.detune},getfilter:function(){return="" this.getfilters()[0]},setfilter:function(a){return="" this.setfilters(a?[a]:[])},setplaybackrate:function(a){if(!1="==this.hasPlaybackControl)console.warn(" three.audio:"="" this="" audio="" has="" no="" playback="" control.");else="" return="" this.playbackrate="a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return" this.playbackrate},onended:function(){this.isplaying="!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn(" control."),!1):this.loop},setloop:function(a){if(!1="==this.hasPlaybackControl)console.warn(" this.loop="a,!0===this.isPlaying&&" (this.source.loop="this.loop),this},getVolume:function(){return" this.gain.gain.value},setvolume:function(a){this.gain.gain.settargetattime(a,this.context.currenttime,.01);return="" this}});we.prototype="Object.assign(Object.create(lc.prototype),{constructor:we,getOutput:function(){return" this.panner},getrefdistance:function(){return="" this.panner.refdistance},setrefdistance:function(a){this.panner.refdistance="a;return" this},getrollofffactor:function(){return="" this.panner.rollofffactor},setrollofffactor:function(a){this.panner.rollofffactor="a;return" this},getdistancemodel:function(){return="" this.panner.distancemodel},setdistancemodel:function(a){this.panner.distancemodel="a;return" this},getmaxdistance:function(){return="" this.panner.maxdistance},setmaxdistance:function(a){this.panner.maxdistance="a;return" this},setdirectionalcone:function(a,b,c){this.panner.coneinnerangle="a;this.panner.coneOuterAngle=b;this.panner.coneOuterGain=c;return" this},updatematrixworld:function(){var="" n,b="new" ka,c="new" n,d="new" n;return="" function(e){c.prototype.updatematrixworld.call(this,="" e);if(!0!="=this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(a,b,c),d.set(0,0,1).applyQuaternion(b),e=this.panner,e.positionX){var" f="this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(a.x,f);e.positionY.linearRampToValueAtTime(a.y,f);e.positionZ.linearRampToValueAtTime(a.z,f);e.orientationX.linearRampToValueAtTime(d.x,f);e.orientationY.linearRampToValueAtTime(d.y,f);e.orientationZ.linearRampToValueAtTime(d.z,f)}else" e.setposition(a.x,a.y,="" a.z),e.setorientation(d.x,d.y,d.z)}}()});object.assign(xe.prototype,{getfrequencydata:function(){this.analyser.getbytefrequencydata(this.data);return="" this.data},getaveragefrequency:function(){for(var="" b.length}});object.assign(ye.prototype,{accumulate:function(a,b){var="" c="this.buffer,d=this.valueSize;a=a*d+d;var" e="this.cumulativeWeight;if(0===e){for(e=0;e!==d;++e)c[a+e]=c[e];e=b}else" e+="b,this._mixBufferRegion(c,a,0,b/e,d);this.cumulativeWeight=" e},apply:function(a){var="" b="this.valueSize,c=this.buffer;a=a*b+b;var" d="this.cumulativeWeight,e=this.binding;this.cumulativeWeight=0;1">d&&this._mixBufferRegion(c,a,3*b,1-d,b);d=b;for(var f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,
b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ka.slerpflat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var 0="==a[c]){console.error(" three.propertybinding:"="" f="1-d,g=0;g!==e;++g){var" h="b+g;a[h]=a[h]*f+a[c+g]*d}}});Object.assign(Bf.prototype,{getValue:function(a,b){this.bind();var" c="this._bindings[this._targetGroup.nCachedObjects_];void" 0!="=c&&c.getValue(a,b)},setValue:function(a,b){for(var" a="this._bindings," b="this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()},unbind:function(){for(var" a&&a.isanimationobjectgroup?new="" ma.composite(a,b,c):new="" ma(a,b,c)},sanitizenodename:function(){var="" function(b){return="" b.replace(="" \s="" g,"_").replace(a,"")}}(),parsetrackname:function(){var="" +"\\[\\]\\.:\\="" ".replace("\\.","")+"]",="" regexp("^"+b+a+c+d+"$"),f="[" material","materials","bones"];return"="" function(a){var="" error("propertybinding:="" cannot="" parse="" trackname:="" "+a);b="{nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};var" b.nodename.lastindexof(".");if(void="" d="b.nodeName.substring(c+1);-1!==f.indexOf(d)&&(b.nodeName=b.nodeName.substring(0,c),b.objectName=d)}if(null===b.propertyName||0===b.propertyName.length)throw" can="" not="" propertyname="" from="" "+a);return="" b}}(),findnode:function(a,b){if(!b||""="==b||" root"="==b||"."===b||-1===b||b===a.name||b===a.uuid)return"" a;if(a.skeleton){var="" c}if(a.children){var="" e="a[c];if(e.name===b||e.uuid===b||(e=d(e.children)))return" e}return="" null};if(a="d(a.children))return" a}return="" null}});object.assign(ma.prototype,{_getvalue_unavailable:function(){},_setvalue_unavailable:function(){},bindingtype:{direct:0,entirearray:1,arrayelement:2,hasfromtoarray:3},versioning:{none:0,needsupdate:1,matrixworldneedsupdate:2},getterbybindingtype:[function(a,b){a[b]="this.node[this.propertyName]},function(a,b){for(var" c[d]},function(a,b){a[b]="this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var" b)},function(a,b){this.resolvedproperty.fromarray(a,b);this.targetobject.needsupdate="!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,b){this.bind();this.setValue(a,b)},bind:function(){var" this.setvalue="this._setValue_unavailable;if(a){if(c){var" "materials":if(!a.material){console.error("three.propertybinding:="" bind="" to="" material="" as="" node="" does="" have="" material.",this);return}if(!a.material.materials){console.error("three.propertybinding:="" material.materials="" node.material="" materials="" array.",this);return}a="a.material.materials;break;case" "bones":if(!a.skeleton){console.error("three.propertybinding:="" bones="" skeleton.",="" this);return}a="a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void" objectname="" of="" undefined.",this);return}a="a[c]}if(void" trying="" objectindex="" objectname,="" but="" is="" undefined.",this,a);return}a="a[f]}}f=a[d];if(void" update="" property="" for="" track:="" "+b.nodename+"."+d+"="" it="" wasn't="" found.",="" a);else{b="this.Versioning.None;this.targetObject=a;void" morphtargetinfluences="" because="" geometry.",this);return}if(a.geometry.isbuffergeometry){if(!a.geometry.morphattributes){console.error("three.propertybinding:="" geometry.morphattributes.",="" this);return}for(c="0;c<this.node.geometry.morphAttributes.position.length;c++)if(a.geometry.morphAttributes.position[c].name===e){e=c;break}}else{if(!a.geometry.morphTargets){console.error(" geometry.morphtargets.",this);return}for(c="0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else" void="" f.fromarray&&void="" console.error("three.propertybinding:="" "+this.path+"="" found.")},unbind:function(){this.node="null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});" object.assign(ma.prototype,{_getvalue_unbound:ma.prototype.getvalue,_setvalue_unbound:ma.prototype.setvalue});object.assign(cf.prototype,{isanimationobjectgroup:!0,add:function(){for(var="" 0,l="0,q=arguments.length;l!==q;++l){var" p="arguments[l],n=p.uuid,v=d[n];if(void" r="h;n!==r;++n)g[n].push(new" ma(p,e[n],f[n]))}else="" if(v<="" c){k="a[v];var" u="--c;r=a[u];d[r.uuid]=v;a[v]=r;d[n]=u;a[u]=p;n=0;for(r=h;n!==r;++n){var" x="g[n],A=x[v];x[v]=x[u];void" ma(p,e[n],f[n]));x[u]="A}}else" a[v]!="=k&&console.error(" three.animationobjectgroup:"="" different="" objects="" with="" the="" same="" uuid="" detected.="" clean="" caches="" or="" recreate="" your="" infrastructure="" when="" reloading="" scenes.")}this.ncachedobjects_="c},remove:function(){for(var">=b){var n=b++,p=a[n];c[p.uuid]=l;a[l]=p;c[k]=n;a[n]=h;h=0;for(k=e;h!==k;++h){p=d[h];var t=p[l];p[l]=p[n];p[n]=t}}}this.nCachedObjects_=b},uncache:function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,d=this._indicesByUUID,e=this._bindings,f=e.length,g=0,h=arguments.length;g!==h;++g){var k=arguments[g].uuid,l=d[k];if(void 0!==l)if(delete d[k],l<c){k=--c;var n="a[k],p=--b,t=a[p];d[n.uuid]=l;a[l]=n;d[t.uuid]=k;a[k]=t;a.pop();n=0;for(t=f;n!==" t;++n){var="" v="e[n],r=v[p];v[l]=v[k];v[k]=r;v.pop()}}else" for(p="--b,t=a[p],d[t.uuid]=l,a[l]=t,a.pop(),n=0,t=f;n!==t;++n)v=e[n],v[l]=v[p],v.pop()}this.nCachedObjects_=c},subscribe_:function(a,b){var" c="this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void" 0!="=d)return" e[d];var="" f="this._paths,g=this._parsedPaths,h=this._objects,k=this.nCachedObjects_,l=Array(h.length);d=e.length;c[a]=d;f.push(a);g.push(b);e.push(l);c=k;for(d=h.length;c!==d;++c)l[c]=new" ma(h[c],a,b);return="" l},unsubscribe_:function(a){var="" b="this._bindingsIndicesByPath,c=b[a];if(void" d="this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}});Object.assign(Df.prototype,{play:function(){this._mixer._activateAction(this);return" this},stop:function(){this._mixer._deactivateaction(this);return="" this.reset()},reset:function(){this.paused="!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return" this.stopfading().stopwarping()},isrunning:function(){return="" this.enabled&&="" !this.paused&&0!="=this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return" this._mixer._isactiveaction(this)},startat:function(a){this._starttime="a;return" this},setloop:function(a,b){this.loop="a;this.repetitions=b;return" this},seteffectiveweight:function(a){this.weight="a;this._effectiveWeight=this.enabled?a:0;return" this.stopfading()},geteffectiveweight:function(){return="" this._effectiveweight},fadein:function(a){return="" this._schedulefading(a,0,1)},fadeout:function(a){return="" this._schedulefading(a,="" 1,0)},crossfadefrom:function(a,b,c){a.fadeout(b);this.fadein(b);if(c){c="this._clip.duration;var" this},crossfadeto:function(a,b,c){return="" a.crossfadefrom(this,b,c)},stopfading:function(){var="" a="this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return" this},seteffectivetimescale:function(a){this.timescale="a;this._effectiveTimeScale=this.paused?0:a;return" this.stopwarping()},geteffectivetimescale:function(){return="" this._effectivetimescale},="" setduration:function(a){this.timescale="this._clip.duration/a;return" this.stopwarping()},syncwith:function(a){this.time="a.time;this.timeScale=a.timeScale;return" this.stopwarping()},halt:function(a){return="" this.warp(this._effectivetimescale,0,a)},warp:function(a,b,c){var="" this},stopwarping:function(){var="" this},getmixer:function(){return="" this._mixer},getclip:function(){return="" this._clip},getroot:function(){return="" this._localroot||this._mixer._root},_update:function(a,b,c,d){if(this.enabled){var="" e="this._startTime;if(null!==e){b=(a-e)*c;if(0">b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants; e="this._propertyBindings;for(var" f="0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}}else" this._updateweight(a)},_updateweight:function(a){var="" b="0;if(this.enabled){b=this.weight;var" c="this._weightInterpolant;if(null!==c){var" d="c.evaluate(a)[0];b*=d;a">c.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0];
b*=d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a,c=this._clip.duration,d=this.loop,e=this._loopCount,f=2202===d;if(0===a)return-1===e?b:f&&1===(e&1)?c-b:b;if(2200===d)a:{if(-1===e&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>
a?-1:1})}else{-1===e&&(0<=a?(e=0,this._setendings(!0,0===this.repetitions,f)):this._setendings(0===this.repetitions,!0,f));if(b>=c||0>b){d=Math.floor(b/c);b-=c*d;e+=Math.abs(d);var g=this.repetitions-e;0>=g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchevent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0>a,this._setEndings(a,!a,f)):this._setEndings(!1,!1,f),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d}))}if(f&&
1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}});ze.prototype=
Object.assign(Object.create(ja.prototype),{constructor:ze,_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings;a=a._interpolants;var g=c.uuid,h=this._bindingsByRootAndName,k=h[g];void 0===k&&(k={},h[g]=k);for(h=0;h!==e;++h){var l=d[h],n=l.name,p=k[n];if(void 0===p){p=f[h];if(void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,g,n));continue}p=new ye(ma.create(c,n,b&&b._propertyBindings[h].binding.parsedPath),l.ValueTypeName,
l.getValueSize());++p.referenceCount;this._addInactiveBinding(p,g,n)}f[h]=p;a[h].resultBuffer=p.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=
a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},
get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nactiveactions},_addinactiveaction:function(a,b,c){var 0="==f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);" d="this._actions,e=this._actionsByClip,f=e[b];void" f.actionbyroot[c]="a},_removeInactiveAction:function(a){var" b="this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;c=this._actionsByClip;d=c[b];var" e="d.knownActions,f=e[e.length-1],g=a._byClipCacheIndex;f._byClipCacheIndex=g;e[g]=f;e.pop();a._byClipCacheIndex=null;delete" d.actionbyroot[(a._localroot||this._root).uuid];0="==e.length&&delete" c[b];this._removeinactivebindingsforaction(a)},_removeinactivebindingsforaction:function(a){a="a._propertyBindings;" for(var="" e);e[c]="a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var" f[c];a:{for(var="" h="" in="" f)break="" a;delete="" e[d]}},_lendbinding:function(a){var="" a="this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void" ed(new="" float32array(2),new="" float32array(2),1,this._controlinterpolantsresultbuffer),c.__cacheindex="b,a[b]=c);return" c},_takebackcontrolinterpolant:function(a){var="" c;b[c]="e},_controlInterpolantsResultBuffer:new" float32array(1),clipaction:function(a,b){var="" c="b||this._root,d=c.uuid;c=" string"="==typeof"" a?fa.findbyname(c,a):a;a="null!==c?c.uuid:a;var" 0!="=e){f=e.actionByRoot[d];if(void" f;f="e.knownActions[0];null===c&&(c=f._clip)}if(null===c)return" null;b="new" df(this,c,b);this._bindaction(b,f);this._addinactiveaction(b,a,d);return="" b},existingaction:function(a,b){var="" a?="" fa.findbyname(c,a):a;a="this._actionsByClip[c?c.uuid:a];return" void="" this},update:function(a){a*="this.timeScale;for(var" f);a="this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return" this},getroot:function(){return="" this._root},uncacheclip:function(a){var="" g="d[e];this._deactivateAction(g);var" c[a]}},uncacheroot:function(a){a="a.uuid;var" b){var="" d)a="d[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});Td.prototype.clone=function(){return" new="" td(void="" object.assign(object.create(d.prototype),{constructor:ae,isinstancedbuffergeometry:!0,copy:function(a){d.prototype.copy.call(this,a);this.maxinstancedcount="a.maxInstancedCount;return" this},clone:function(){return(new="" this.constructor).copy(this)}});be.prototype="Object.assign(Object.create(sb.prototype),{constructor:Be,isInstancedInterleavedBuffer:!0,copy:function(a){sb.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this}});ce.prototype="Object.assign(Object.create(L.prototype)," {constructor:ce,isinstancedbufferattribute:!0,copy:function(a){l.prototype.copy.call(this,a);this.meshperattribute="a.meshPerAttribute;return" this}});object.assign(ef.prototype,{lineprecision:1,set:function(a,b){this.ray.set(a,b)},setfromcamera:function(a,b){b&&b.isperspectivecamera?(this.ray.origin.setfrommatrixposition(b.matrixworld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isorthographiccamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)="" (b.near-b.far)).unproject(b),="" this.ray.direction.set(0,0,-1).transformdirection(b.matrixworld)):console.error("three.raycaster:="" unsupported="" camera="" type.")},intersectobject:function(a,b,c){c="c||[];De(a,this,c,b);c.sort(Ff);return" c},intersectobjects:function(a,b,c){c="c||[];if(!1===Array.isArray(a))return" console.warn("three.raycaster.intersectobjects:="" objects="" is="" not="" an="" array."),c;for(var="" c}});object.assign(gf.prototype,{set:function(a,b,c){this.radius="a;this.phi=b;this.theta=" c;return="" this.constructor).copy(this)},copy:function(a){this.radius="a.radius;this.phi=a.phi;this.theta=a.theta;return" this},makesafe:function(){this.phi="Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return" this},setfromvector3:function(a){return="" this.setfromcartesiancoords(a.x,a.y,a.z)},setfromcartesiancoords:function(a,b,c){this.radius="Math.sqrt(a*a+b*b+c*c);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a,c),this.phi=Math.acos(G.clamp(b/this.radius," -1,1)));return="" this}});object.assign(hf.prototype,{set:function(a,b,c){this.radius="a;this.theta=b;this.y=c;return" this}});object.assign(ee.prototype,{set:function(a,b){this.min.copy(a);="" this.max.copy(b);return="" this},setfrompoints:function(a){this.makeempty();for(var="" this},setfromcenterandsize:function(){var="" z;return="" function(b,c){c="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return" this}}(),clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return="" this},makeempty:function(){this.min.x="this.min.y=Infinity;this.max.x=this.max.y=" -infinity;return="" this},isempty:function(){return="" this.max.x<this.min.x||this.max.y<this.min.y},getcenter:function(a){void="" .getcenter()="" target="" now="" required"),a="new" z);return="" this.isempty()?a.set(0,0):a.addvectors(this.min,this.max).multiplyscalar(.5)},getsize:function(a){void="" .getsize()="" this.isempty()?a.set(0,0):a.subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);="" return="" this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return="" this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return="" this},containspoint:function(a){return="" a.x<this.min.x||a.x="">this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getparameter:function(a,b){void 0="==b&&(console.warn(" three.box2:"="" .getparameter()="" target="" is="" now="" required"),b="new" z);="" return="" b.set((a.x-this.min.x)="" (this.max.x-this.min.x),(a.y-this.min.y)="" (this.max.y-this.min.y))},intersectsbox:function(a){return="" a.max.x<this.min.x||a.min.x="">this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){void 0===b&&(console.warn("THREE.Box2: .clampPoint() target is now required"),b=new z);return b.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new z;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);
this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}});Object.assign(Fe.prototype,{set:function(a,b){this.start.copy(a);this.end.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},getCenter:function(a){void 0===
a&&(console.warn("THREE.Line3: .getCenter() target is now required"),a=new n);return a.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){void 0===a&&(console.warn("THREE.Line3: .delta() target is now required"),a=new n);return a.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,b){void 0===b&&(console.warn("THREE.Line3: .at() target is now required"),b=
new n);return this.delta(b).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new n,b=new n;return function(c,d){a.subVectors(c,this.start);b.subVectors(this.end,this.start);c=b.dot(b);c=b.dot(a)/c;d&&(c=G.clamp(c,0,1));return c}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);void 0===c&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),c=new n);return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}});md.prototype=Object.create(C.prototype);md.prototype.constructor=md;md.prototype.isImmediateRenderObject=!0;nd.prototype=Object.create(U.prototype);nd.prototype.constructor=nd;nd.prototype.update=function(){var a=new n,b=new n,c=new ra;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,f=
this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,k=g.faces,l=g=0,n=k.length;l<n;l++)for(var p="k[l],t=0,v=p.vertexNormals.length;t<v;t++){var" r="p.vertexNormals[t];a.copy(h[p[d[t]]]).applyMatrix4(e);b.copy(r).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else" if(g&&g.isbuffergeometry)for(d="g.attributes.position,h=g.attributes.normal,t=g=0,v=d.count;t<v;t++)a.set(d.getX(t),d.getY(t)," d.getz(t)).applymatrix4(e),b.set(h.getx(t),h.gety(t),h.getz(t)),b.applymatrix3(c).normalize().multiplyscalar(this.size).add(a),f.setxyz(g,a.x,a.y,a.z),g+="1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0}}();mc.prototype=Object.create(C.prototype);mc.prototype.constructor=mc;mc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};mc.prototype.update=function(){var" a="new" n;return="" function(){this.light.updatematrixworld();var="" b="this.light.distance?this.light.distance:" 1e3,c="b*Math.tan(this.light.angle);this.cone.scale.set(c,c,b);a.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(a);void" 0!="=this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();nc.prototype=Object.create(U.prototype);nc.prototype.constructor=nc;nc.prototype.updateMatrixWorld=function(){var" n,b="new" j,c="new" j;return="" function(d){var="" e="this.bones,f=this.geometry,g=f.getAttribute(" position");c.getinverse(this.root.matrixworld);"="" for(var="" h="0,k=0;h<e.length;h++){var" l="e[h];l.parent&&l.parent.isBone&&(b.multiplyMatrices(c,l.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k,a.x,a.y,a.z),b.multiplyMatrices(c,l.parent.matrixWorld),a.setFromMatrixPosition(b),g.setXYZ(k+1,a.x,a.y,a.z),k+=2)}f.getAttribute(" position").needsupdate="!0;C.prototype.updateMatrixWorld.call(this,d)}}();oc.prototype=Object.create(va.prototype);oc.prototype.constructor=oc;oc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};oc.prototype.update="" function(){void="" a.g,a.b);1<b&&a.multiplyscalar(1="" b);this.children[0].material.color.copy(this.material.color)}};pc.prototype.dispose="function(){this.geometry.dispose();this.material.dispose();this.children[0].geometry.dispose();this.children[0].material.dispose()};qc.prototype=Object.create(C.prototype);qc.prototype.constructor=qc;qc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};qc.prototype.update=function(){var" h,c="new" h;return="" function(){var="" d="this.children[0];if(void" f="0,g=e.count;f<g;f++){var" rc.prototype.constructor="rc;rc.prototype.update=function(){function" a(a,b,d,e){d="(b-a)/d;v.setXYZ(k,0,0,0);l++;for(n=a;n<b;n+=d)p=k+l,v.setXYZ(p,Math.sin(n)*c,0,Math.cos(n)*c),v.setXYZ(p+1,Math.sin(Math.min(n+d,b))*c,0,Math.cos(Math.min(n+d,b))*c),v.setXYZ(p+2,0,0,0),l+=3;t.addGroup(k,l,e);k+=l;l=0}var" g="f/2,h=b/2,k=0,l=0,n,p,t=this.geometry," v="t.attributes.position;t.clearGroups();a(-h,-g,e,0);a(-g,g,d,1);a(g,h,e,0);v.needsUpdate=!0;f===b&&(this.material[0].visible=!1)};rc.prototype.dispose=function(){this.geometry.dispose();this.material[0].dispose();this.material[1].dispose()};pd.prototype=Object.create(U.prototype);pd.prototype.constructor=pd;pd.prototype.update=function(){var" n,c="new" ra;return="" function(){this.object.updatematrixworld(!0);c.getnormalmatrix(this.object.matrixworld);var="" n="f[k],p=n.normal;a.copy(g[n.a]).add(g[n.b]).add(g[n.c]).divideScalar(3).applyMatrix4(d);b.copy(p).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0}}();sc.prototype=Object.create(C.prototype);sc.prototype.constructor=sc;sc.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();" this.targetline.material.dispose()};sc.prototype.update="function(){var" function(){a.setfrommatrixposition(this.light.matrixworld);b.setfrommatrixposition(this.light.target.matrixworld);c.subvectors(b,a);this.lightplane.lookat(b);void="" this.targetline.scale.z="c.length()}}();qd.prototype=Object.create(U.prototype);qd.prototype.constructor=qd;qd.prototype.update=function(){function" a(a,g,h,k){d.set(g,h,k).unproject(e);a="c[a];if(void" b,c,d="new" n,e="new" ta;return="" function(){b="this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a(" c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,"="" 1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.getattribute("position").needsupdate="!0}}();cb.prototype=Object.create(U.prototype);cb.prototype.constructor=cb;cb.prototype.update=function(){var" ya;return="" function(b){void="" .update()="" has="" no="" longer="" arguments.");="" void="" c="a.max,d=this.geometry.attributes.position,e=d.array;e[0]=c.x;e[1]=c.y;e[2]=c.z;e[3]=b.x;e[4]=c.y;e[5]=c.z;e[6]=b.x;e[7]=b.y;e[8]=c.z;e[9]=c.x;e[10]=b.y;e[11]=c.z;e[12]=c.x;e[13]=c.y;e[14]=b.z;e[15]=b.x;e[16]=c.y;e[17]=b.z;e[18]=b.x;e[19]=b.y;e[20]=b.z;e[21]=c.x;e[22]=b.y;e[23]=b.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}}}();cb.prototype.setFromObject=function(a){this.object=a;this.update();return" this};="" cb.prototype.copy="function(a){U.prototype.copy.call(this,a);this.object=a.object;return" this};cb.prototype.clone="function(){return(new" this.constructor).copy(this)};rd.prototype="Object.create(U.prototype);rd.prototype.constructor=rd;rd.prototype.updateMatrixWorld=function(a){var" function(a){var="">Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.children[0].material.side=0>b?1:0;this.lookAt(this.plane.normal);C.prototype.updateMatrixWorld.call(this,a)};var Vd,Ge;db.prototype=Object.create(C.prototype);db.prototype.constructor=db;db.prototype.setDirection=function(){var a=new n,b;return function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999>c.y?this.quaternion.set(1,0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),
this.quaternion.setFromAxisAngle(a,b))}}();db.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};db.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};db.prototype.copy=function(a){C.prototype.copy.call(this,a,!1);this.line.copy(a.line);this.cone.copy(a.cone);return this};db.prototype.clone=
function(){return(new this.constructor).copy(this)};td.prototype=Object.create(U.prototype);td.prototype.constructor=td;K.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(K.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(bb.prototype,{createPointsGeometry:function(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getPoints(a);
return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new R,c=0,d=a.length;c</c.y?this.quaternion.set(0,0,0,1):-.99999></n;l++)for(var></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getparameter:function(a,b){void></this.min.y||a.y></this._nactiveactions},_addinactiveaction:function(a,b,c){var></a?c:0,this._mixer.dispatchevent({type:"finished",action:this,direction:0<a?1:-1})):(1===g?(a=0></=a?(e=0,this._setendings(!0,0===this.repetitions,f)):this._setendings(0===this.repetitions,!0,f));if(b></a){b=this._interpolants;></c){k=--c;var></=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d){ka.slerpflat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var></this.filters.length){this.source.connect(this.filters[0]);for(var></=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return></g.y||a.y></d;c++)b+=this.curves[c].getlength(),a.push(b);return></c;b++)this.points.push(a.points[b].clone());return></c;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curvetype=a.curvetype;this.tension=a.tension;return></number.epsilon&&(d=e?0:c);!0!==this.aclockwise||e||(d=d===c?-c:d-c);c=this.astartangle+a*d;a=this.ax+this.xradius*math.cos(c);var></d[0].dot(g.crossvectors(e[0],e[a]))&&(c=-c),k=1;k<=a;k++)e[k].applymatrix4(h.makerotationaxis(d[k],></a&&(a=1);b=this.getpoint(b);return></g)f=a-1;else{f=a;break}a=f;if(c[a]===b)return></f;++g){var></b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void></d;)e=c+d></f&&(c=2,e=f);for(f=c-2;;){if(void></d)){for(var></b.length;a++)d.push(f),f+=b[a].length,tf(c,b[a]);b=fh.triangulate(c,d);for(a=0;a<b.length;a+=3)e.push(b.slice(a,a+3));return></b;d=e++)c+=a[d].x*a[e].y-></e;k+=c)l=a[k],b=a[k+1],l<v&&(v=l),b<r&&(r=b),l></m;l++){var></r;t++){var></g;f+=2)a.frombufferattribute(d,f),b.frombufferattribute(d,f+1),e[f]=0===f?0:e[f-1],e[f+1]=e[f]+a.distanceto(b);c.addattribute("linedistance",new></d.near||u></m-1;g+=p)u=b.distancesqtosegment(k[g],k[g+1],l,h),u></d.near||u></r;g+=p)k.fromarray(v,3*g),m.fromarray(v,3*g+3),u=b.distancesqtosegment(k,m,l,h),u></d.near||u></f;e++)d[e].object.visible=!1}}}(),tojson:function(a){a=c.prototype.tojson.call(this,a);a.object.levels=[];for(var></c;b++){var></c;e++){var></=r-v&&0<=g-x)return></=t&&0></=x&&g<=x)return></=p&&0></=v&&r<=v)return></b?e.multiplyscalar(1></=g?g:c,b)},intersectsbox:function(){var></c||c!==c)c=a;return></c||c!==c)c=d;0<=e?(h=(a.min.z-f.z)*e,a=(a.max.z-f.z)*e):(h=(a.max.z-f.z)*e,a=(a.min.z-f.z)*e);if(g></=c){var></=a.radius*a.radius},distancetoplane:function(a){var></=n?(h=1></t){d=k*l-m;e=k*></this.alphatest&&(d.alphatest=this.alphatest);!0===this.premultipliedalpha&&(d.premultipliedalpha=this.premultipliedalpha);></=f;f--)for(d=a[f],this.faces.splice(d,1),c=0,e=></a|0},enable:function(a){this.mask=></d?6:0);break;case></16^255*this.g<<8^255*this.b<<0},gethexstring:function(){return("000000"+this.gethex().tostring(16)).slice(-6)},gethsl:function(a){void></a.length&&(c=eh[a],void></2></d&&--d;return></fog_vertex></clipping_planes_vertex></logdepthbuf_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></fog_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></alphatest_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></fog_pars_fragment></map_pars_fragment></uv_pars_fragment></common></fog_vertex></shadowmap_vertex></worldpos_vertex></project_vertex></begin_vertex></shadowmap_pars_vertex></fog_pars_vertex></fog_fragment></shadowmask_pars_fragment></shadowmap_pars_fragment></lights_pars_begin></bsdfs></fog_pars_fragment></packing></common></fog_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></morphtarget_vertex></begin_vertex></color_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></alphatest_fragment></color_fragment></map_particle_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></fog_pars_fragment></map_particle_pars_fragment></color_pars_fragment></common></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></uv_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></normal_fragment_maps></normal_fragment_begin></logdepthbuf_fragment></logdepthbuf_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></uv_pars_fragment></packing></fog_vertex></shadowmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></displacementmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></aomap_fragment></lights_fragment_end></lights_fragment_maps></lights_fragment_begin></lights_physical_fragment></emissivemap_fragment></normal_fragment_maps></normal_fragment_begin></metalnessmap_fragment></roughnessmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></metalnessmap_pars_fragment></roughnessmap_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></shadowmap_pars_fragment></lights_physical_pars_fragment></lights_pars_begin></fog_pars_fragment></envmap_physical_pars_fragment></envmap_pars_fragment></cube_uv_reflection_fragment></bsdfs></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></shadowmap_vertex></envmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></envmap_pars_vertex></displacementmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></envmap_fragment></aomap_fragment></lights_fragment_end></lights_fragment_maps></lights_fragment_begin></lights_phong_fragment></emissivemap_fragment></normal_fragment_maps></normal_fragment_begin></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></shadowmap_pars_fragment></lights_phong_pars_fragment></lights_pars_begin></bsdfs></fog_pars_fragment></gradientmap_pars_fragment></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></normal_fragment_maps></normal_fragment_begin></alphatest_fragment></alphamap_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></fog_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv_pars_fragment></common></fog_vertex></shadowmap_vertex></lights_lambert_vertex></envmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></lights_pars_begin></bsdfs></envmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></dithering_fragment></premultiplied_alpha_fragment></fog_fragment></encodings_fragment></tonemapping_fragment></envmap_fragment></aomap_fragment></lightmap_fragment></emissivemap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></shadowmask_pars_fragment></shadowmap_pars_fragment></fog_pars_fragment></lights_pars_begin></bsdfs></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></dithering_pars_fragment></packing></common></fog_vertex></envmap_vertex></clipping_planes_vertex></worldpos_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></envmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></envmap_fragment></aomap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></fog_pars_fragment></envmap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></common></fog_vertex></clipping_planes_vertex></logdepthbuf_vertex></color_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></fog_pars_vertex></color_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></color_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></fog_pars_fragment></color_pars_fragment></common></project_vertex></begin_vertex></common></encodings_fragment></tonemapping_fragment></common></clipping_planes_vertex></worldpos_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></uv_vertex></clipping_planes_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></common></alphatest_fragment></alphamap_fragment></map_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv_pars_fragment></packing></common></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></displacementmap_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></common></logdepthbuf_fragment></alphatest_fragment></alphamap_fragment></map_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv_pars_fragment></packing></common></project_vertex></begin_vertex></common></encodings_fragment></tonemapping_fragment></encodings_fragment></tonemapping_fragment></=></=></e.normal.x?b.max.x:b.min.x;a.y=0<e.normal.y?b.max.y:b.min.y;a.z=0<e.normal.z?b.max.z:b.min.z;if(0></a)return!1;return!0},intersectsbox:function(){var></b},intersectsbox:function(a){return></a||0></e))return></=this.radius*this.radius},distancetopoint:function(a){return></f;e++)c=math.max(c,d.distancetosquared(b[e]));this.radius=math.sqrt(c);return></=e;f+=3){h.fromarray(a,f);var></=b.radius*b.radius}}(),intersectsplane:function(a){if(0<a.normal.x){var></this.min.z||a.min.z></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getparameter:function(a,b){void></this.min.z||a.z></this.min.y||a.y></c;b++)this.expandbypoint(a[b]);return></k;h++){var></k;h+=3){var></a.y)switch(this.wrapt){case></a.x)switch(this.wraps){case></a.width||2048<a.height?a.todataurl("image></d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix3(this),b.setxyz(c,a.x,a.y,a.z);return></=g)return></m?(c=.5></=t?1:-1,r=1-t*t;r></d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix4(this),b.setxyz(c,a.x,a.y,a.z);return></=b)return></=b)return></a?1:+a});!1==="name"in></a.children.length;c++)b.push.apply(b,if(a.children[c]));return></e;d++)de(a[d],b,c,!0)}}function></=b)f=a[d.index1],c.push(f.x,f.y,f.z),f=a[d.index2],></h;g++){var></-number.epsilon?f<-number.epsilon&&(a=!0):math.sign(e)===math.sign(g)&&(a=!0),a?(f=-e,e=math.sqrt(h)):(f=d,d=e,e=math.sqrt(h></b&&a[b-1].equals(a[0])&&a.pop()}function></=pa(a,b,a.next)&&0<=pa(a,a.prev,b):0></8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function></k?d:f,e,></c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return></=d&&g></(r.next.x-r.x)*(u-r.y)></=pa(n.prev,n,n.next)){r=!1;break></p.x?q.x<v.x?q.x:v.x:p.x<v.x?p.x:v.x,q.y<p.y?q.y<v.y?q.y:v.y:p.y<v.y?p.y:v.y,l,n,a);l=he(w,i,l,n,a);for(n=r.nextz;n&&n.z<=l;){if(n!==r.prev&&n!==r.next&&cd(q.x,q.y,p.x,p.y,v.x,v.y,n.x,n.y)&&0<=pa(n.prev,n,n.next)){r=!1;break></v&&(p++,u=u.nextz,u);m++);for(l=v;0<p||0<l&&u;)0!==p&&(0===l||!u||k.z<=u.z)?(m=k,k=k.nextz,p--):(m=u,u=u.nextz,l--),r?r.nextz=m:h=m,m.prevz=r,r=m;k=u}r.nextz=null;v*=2}while(1<q)}for(h=a;a.prev!==a.next;){k=a.prev;u=a.next;if(f)a:{r=a;l=d;var></=d;l++){var></b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var></=c;t++){var></d;m++)for(c=0;3></e;++a)for(m=></=b&&b<=a.width-></=v){var></h.length;a++){b=h[a];b:{c=a;for(var></n;da++)f=ta[da],1023!==b.format&&1022!==b.format?-1<c.getcompressedtextureformats().indexof(y)?c.compressedteximage2d(34069+v,da,a,f.width,f.height,0,f.data):console.warn("three.webglrenderer:></a.version&&e.__version!==a.version)if(f=a.image,void></parseint(d);c++)a+=e.replace(></"+c+"></d)return></i;z++){var></arguments.length&&console.error("three.matrix4:>